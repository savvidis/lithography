function makeBackgroundResponsive(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=document.querySelectorAll("div.bg-responsive");if(0!==t.length){var n;n=t[0].hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){return null!==e.getAttribute(t)};for(var r=window.devicePixelRatio&&window.devicePixelRatio>=1.2?1:0,i=0;i<t.length;i++){var o=t[i],a=r&&n(o,"data-src2x")?"data-src2x":"data-src",s=r&&n(o,"data-src-base2x")?"data-src-base2x":"data-src-base";if(n(o,a))for(var l=n(o,s)?o.getAttribute(s):"",c=l,u=o.getAttribute(a),d=u.split(","),f=0;f<d.length;f++){var p,h,m=d[f].replace(":","||").split("||"),g=m[0],v=m[1];if(-1!==g.indexOf("<"))if(p=g.split("<"),d[f-1]){var y=d[f-1].split(/:(.+)/),b=y[0].split("<");h=e<=p[1]&&e>b[1]}else h=e<=p[1];else if(p=g.split(">"),d[f+1]){var x=d[f+1].split(/:(.+)/),w=x[0].split(">");h=e>=p[1]&&e<w[1]}else h=e>=p[1];if(h){var C,T=-1!==v.indexOf("//")?1:0;if(C=1===T?"background-image: url('"+v+"');":"background-image: url('"+c+v+"');",o.src!==C){var S=o.getAttribute("style");o.setAttribute("style",C+" "+S)}break}}}}}function makeImagesResponsive(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=document.getElementsByTagName("body")[0].getElementsByTagName("img");if(0!==t.length){var n;n=t[0].hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){return null!==e.getAttribute(t)};for(var r=window.devicePixelRatio&&window.devicePixelRatio>=1.2?1:0,i=0;i<t.length;i++){var o=t[i],a=r&&n(o,"data-src2x")?"data-src2x":"data-src",s=r&&n(o,"data-src-base2x")?"data-src-base2x":"data-src-base";if(n(o,a))for(var l=n(o,s)?o.getAttribute(s):"",c=o.getAttribute(a),u=c.split(","),d=0;d<u.length;d++){var f,p,h=u[d].replace(":","||").split("||"),m=h[0],g=h[1];if(-1!==m.indexOf("<"))if(f=m.split("<"),u[d-1]){var v=u[d-1].split(/:(.+)/),y=v[0].split("<");p=e<=f[1]&&e>y[1]}else p=e<=f[1];else if(f=m.split(">"),u[d+1]){var b=u[d+1].split(/:(.+)/),x=b[0].split(">");p=e>=f[1]&&e<x[1]}else p=e>=f[1];if(p){var w,C=-1!==g.indexOf("//")?1:0;w=1===C?g:l+g,o.src!==w&&o.setAttribute("src",w);break}}}}}function MediumEditor(e,t){"use strict";return this.init(e,t)}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=it.type(e);return"function"===n||it.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(it.isFunction(t))return it.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return it.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ft.test(t))return it.filter(t,e,n);t=it.filter(t,e)}return it.grep(e,function(e){return it.inArray(e,t)>=0!==n})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=xt[e]={};return it.each(e.match(bt)||[],function(e,n){t[n]=!0}),t}function a(){ht.addEventListener?(ht.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(ht.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(ht.addEventListener||"load"===event.type||"complete"===ht.readyState)&&(a(),it.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(kt,"-$1").toLowerCase();if(n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:St.test(n)?it.parseJSON(n):n}catch(i){}it.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!it.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,r){if(it.acceptData(e)){var i,o,a=it.expando,s=e.nodeType,l=s?it.cache:e,c=s?e[a]:e[a]&&a;if(c&&l[c]&&(r||l[c].data)||void 0!==n||"string"!=typeof t)return c||(c=s?e[a]=G.pop()||it.guid++:a),l[c]||(l[c]=s?{}:{toJSON:it.noop}),("object"==typeof t||"function"==typeof t)&&(r?l[c]=it.extend(l[c],t):l[c].data=it.extend(l[c].data,t)),o=l[c],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[it.camelCase(t)]=n),"string"==typeof t?(i=o[t],null==i&&(i=o[it.camelCase(t)])):i=o,i}}function d(e,t,n){if(it.acceptData(e)){var r,i,o=e.nodeType,a=o?it.cache:e,s=o?e[it.expando]:it.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){it.isArray(t)?t=t.concat(it.map(t,it.camelCase)):t in r?t=[t]:(t=it.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!c(r):!it.isEmptyObject(r))return}(n||(delete a[s].data,c(a[s])))&&(o?it.cleanData([e],!0):nt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function p(){return!1}function h(){try{return ht.activeElement}catch(e){}}function m(e){var t=Ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==Tt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Tt?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||it.nodeName(r,t)?o.push(r):it.merge(o,g(r,t));return void 0===t||t&&it.nodeName(e,t)?it.merge([e],o):o}function v(e){$t.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return it.nodeName(e,"table")&&it.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==it.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Xt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)it._data(n,"globalEval",!t||it._data(t[r],"globalEval"))}function C(e,t){if(1===t.nodeType&&it.hasData(e)){var n,r,i,o=it._data(e),a=it._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)it.event.add(t,n,s[n][r])}a.data&&(a.data=it.extend({},a.data))}}function T(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[it.expando]){i=it._data(t);for(r in i.events)it.removeEvent(t,r,i.handle);t.removeAttribute(it.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!it.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&$t.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var r,i=it(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:it.css(i[0],"display");return i.detach(),o}function k(e){var t=ht,n=Zt[e];return n||(n=S(e,t),"none"!==n&&n||(Jt=(Jt||it("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Jt[0].contentWindow||Jt[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Jt.detach()),Zt[e]=n),n}function L(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=pn.length;i--;)if(t=pn[i]+n,t in e)return t;return r}function N(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=it._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Nt(r)&&(o[a]=it._data(r,"olddisplay",k(r.nodeName)))):(i=Nt(r),(n&&"none"!==n||!i)&&it._data(r,"olddisplay",i?n:it.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function A(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function $(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=it.css(e,n+Et[o],!0,i)),r?("content"===n&&(a-=it.css(e,"padding"+Et[o],!0,i)),"margin"!==n&&(a-=it.css(e,"border"+Et[o]+"Width",!0,i))):(a+=it.css(e,"padding"+Et[o],!0,i),"padding"!==n&&(a+=it.css(e,"border"+Et[o]+"Width",!0,i)));return a}function M(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=en(e),a=nt.boxSizing&&"border-box"===it.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=tn(e,t,o),(0>i||null==i)&&(i=e.style[t]),rn.test(i))return i;r=a&&(nt.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+$(e,t,n||(a?"border":"content"),r,o)+"px"}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function j(){return setTimeout(function(){hn=void 0}),hn=it.now()}function O(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Et[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function _(e,t,n){for(var r,i=(xn[t]||[]).concat(xn["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function H(e,t,n){var r,i,o,a,s,l,c,u,d=this,f={},p=e.style,h=e.nodeType&&Nt(e),m=it._data(e,"fxshow");n.queue||(s=it._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,it.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=it.css(e,"display"),u="none"===c?it._data(e,"olddisplay")||k(e.nodeName):c,"inline"===u&&"none"===it.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==k(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",nt.shrinkWrapBlocks()||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],gn.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;h=!0}f[r]=m&&m[r]||it.style(e,r)}else c=void 0;if(it.isEmptyObject(f))"inline"===("none"===c?k(e.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(h=m.hidden):m=it._data(e,"fxshow",{}),o&&(m.hidden=!h),h?it(e).show():d.done(function(){it(e).hide()}),d.done(function(){var t;it._removeData(e,"fxshow");for(t in f)it.style(e,t,f[t])});for(r in f)a=_(h?m[r]:0,r,d),r in m||(m[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function I(e,t){var n,r,i,o,a;for(n in e)if(r=it.camelCase(n),i=t[r],o=e[n],it.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=it.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function P(e,t,n){var r,i,o=0,a=bn.length,s=it.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=hn||j(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),1>o&&l?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:it.extend({},t),opts:it.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:hn||j(),duration:n.duration,tweens:[],createTween:function(t,n){var r=it.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return t?s.resolveWith(e,[c,t]):s.rejectWith(e,[c,t]),this}}),u=c.props;for(I(u,c.opts.specialEasing);a>o;o++)if(r=bn[o].call(c,e,u,c.opts))return r;return it.map(u,_,c),it.isFunction(c.opts.start)&&c.opts.start.call(e,c),it.fx.timer(it.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(bt)||[];if(it.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function R(e,t,n,r){function i(s){var l;return o[s]=!0,it.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),l}var o={},a=e===qn;return i(t.dataTypes[0])||!o["*"]&&i("*")}function B(e,t){var n,r,i=it.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&it.extend(!0,e,n),e}function W(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function z(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function q(e,t,n,r){var i;if(it.isArray(t))it.each(t,function(t,i){n||Gn.test(e)?r(e,i):q(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==it.type(t))r(e,t);else for(i in t)q(e+"["+i+"]",t[i],n,r)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function V(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function X(e){return it.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],K=G.slice,Y=G.concat,Q=G.push,J=G.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt={},rt="1.11.1",it=function(e,t){return new it.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,lt=function(e,t){return t.toUpperCase()};it.fn=it.prototype={jquery:rt,constructor:it,selector:"",length:0,toArray:function(){return K.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:K.call(this)},pushStack:function(e){var t=it.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return it.each(this,e,t)},map:function(e){return this.pushStack(it.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:G.sort,splice:G.splice},it.extend=it.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||it.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],n=i[r],a!==n&&(c&&n&&(it.isPlainObject(n)||(t=it.isArray(n)))?(t?(t=!1,o=e&&it.isArray(e)?e:[]):o=e&&it.isPlainObject(e)?e:{},a[r]=it.extend(c,o,n)):void 0!==n&&(a[r]=n));return a},it.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===it.type(e)},isArray:Array.isArray||function(e){return"array"===it.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!it.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==it.type(e)||e.nodeType||it.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&it.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(at,"ms-").replace(st,lt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?it.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(J)return J.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),l=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&l.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&l.push(i);return Y.apply([],l)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),it.isFunction(e)?(n=K.call(arguments,2),r=function(){return e.apply(t||this,n.concat(K.call(arguments)))},r.guid=e.guid=e.guid||it.guid++,r):void 0},now:function(){return+new Date},support:nt}),it.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ct=function(e){function t(e,t,n,r){var i,o,a,s,l,c,d,p,h,m;if((t?t.ownerDocument||t:R)!==D&&M(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(O&&!r){if(i=yt.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&P(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!_||!_.test(e))){if(p=d=F,h=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=k(e),(d=t.getAttribute("id"))?p=d.replace(xt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+f(c[l]);h=bt.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return E(e.replace(lt,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&typeof e.getElementsByTagName!==X&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=W++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,c=[B,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[F]||(t[F]={}),(s=l[r])&&s[0]===B&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[F]&&(i=v(i)),o&&!o[F]&&(o=v(o,a)),r(function(r,a,s,l){var c,u,d,f=[],p=[],h=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:g(v,f,e,s,l),b=n?o||(r?e:h||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(c=g(b,p),i(c,[],s,l),u=c.length;u--;)(d=c[u])&&(b[p[u]]=!(y[p[u]]=d));if(r){if(o||e){if(o){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(y[u]=d);o(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=o?tt.call(r,d):f[u])>-1&&(r[c]=!(a[c]=d))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return tt.call(t,e)>-1},a,!0),u=[function(e,n,r){return!o&&(r||n!==N)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];i>s;s++)if(n=C.relative[e[s].type])u=[p(h(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;i>r&&!C.relative[e[r].type];r++);return v(s>1&&h(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(lt,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}u.push(n)}return h(u)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,c){var u,d,f,p=0,h="0",m=r&&[],v=[],y=N,b=r||o&&C.find.TAG("*",c),x=B+=null==y?1:Math.random()||.1,w=b.length;for(c&&(N=a!==D&&a);h!==w&&null!=(u=b[h]);h++){if(o&&u){for(d=0;f=e[d++];)if(f(u,a,s)){l.push(u);break}c&&(B=x)}i&&((u=!f&&u)&&p--,r&&m.push(u))}if(p+=h,i&&h!==p){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(p>0)for(;h--;)m[h]||v[h]||(v[h]=Q.call(l));v=g(v)}Z.apply(l,v),c&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(B=x,N=y),m};return i?r(a):a}var x,w,C,T,S,k,L,E,N,A,$,M,D,j,O,_,H,I,P,F="sizzle"+-new Date,R=e.document,B=0,W=0,z=n(),q=n(),U=n(),V=function(e,t){return e===t&&($=!0),0},X="undefined",G=1<<31,K={}.hasOwnProperty,Y=[],Q=Y.pop,J=Y.push,Z=Y.push,et=Y.slice,tt=Y.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=it.replace("w","w#"),at="\\["+rt+"*("+it+")(?:"+rt+"*([*^$|!~]?=)"+rt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+rt+"*\\]",st=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",lt=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),ct=new RegExp("^"+rt+"*,"+rt+"*"),ut=new RegExp("^"+rt+"*([>+~]|"+rt+")"+rt+"*"),dt=new RegExp("="+rt+"*([^\\]'\"]*?)"+rt+"*\\]","g"),ft=new RegExp(st),pt=new RegExp("^"+ot+"$"),ht={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,xt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+rt+"?|("+rt+")|.)","ig"),Ct=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply(Y=et.call(R.childNodes),R.childNodes),Y[R.childNodes.length].nodeType}catch(Tt){Z={apply:Y.length?function(e,t){J.apply(e,et.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:R,r=n.defaultView;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,j=n.documentElement,O=!S(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){M()},!1):r.attachEvent&&r.attachEvent("onunload",function(){M()})),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=i(function(e){return j.appendChild(e).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),w.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==X&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(wt,Ct);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(wt,Ct);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&O?t.getElementsByClassName(e):void 0},H=[],_=[],(w.qsa=vt.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&_.push("[*^$]="+rt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+rt+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||_.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+rt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(w.matchesSelector=vt.test(I=j.matches||j.webkitMatchesSelector||j.mozMatchesSelector||j.oMatchesSelector||j.msMatchesSelector))&&i(function(e){w.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),H.push("!=",st)}),_=_.length&&new RegExp(_.join("|")),H=H.length&&new RegExp(H.join("|")),t=vt.test(j.compareDocumentPosition),P=t||vt.test(j.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return $=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!w.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===R&&P(R,e)?-1:t===n||t.ownerDocument===R&&P(R,t)?1:A?tt.call(A,e)-tt.call(A,t):0:4&r?-1:1)}:function(e,t){if(e===t)return $=!0,0;var r,i=0,o=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:A?tt.call(A,e)-tt.call(A,t):0;if(o===s)return a(e,t);for(r=e;r=r.parentNode;)l.unshift(r);for(r=t;r=r.parentNode;)c.unshift(r);for(;l[i]===c[i];)i++;return i?a(l[i],c[i]):l[i]===R?-1:c[i]===R?1:0},n):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&M(e),n=n.replace(dt,"='$1']"),!(!w.matchesSelector||!O||H&&H.test(n)||_&&_.test(n)))try{var r=I.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&M(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&M(e);var n=C.attrHandle[t.toLowerCase()],r=n&&K.call(C.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if($=!w.detectDuplicates,A=!w.sortStable&&e.slice(0),e.sort(V),$){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return A=null,e},T=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=T(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=T(t);return n},C=t.selectors={cacheLength:50,createPseudo:r,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,Ct),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,Ct),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ht.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ft.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,Ct).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(u=g[F]||(g[F]={}),c=u[e]||[],p=c[0]===B&&c[1],f=c[0]===B&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[B,p,f];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===B)f=c[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[F]||(d[F]={}))[e]=[B,f]),d!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(i=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=tt.call(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=L(e.replace(lt,"$1"));return i[F]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||T(t)).indexOf(e)>-1}}),lang:r(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,Ct).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===j},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;
return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=l(x);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,k=t.tokenize=function(e,n){var r,i,o,a,s,l,c,u=q[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=C.preFilter;s;){(!r||(i=ct.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ut.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(lt," ")}),s=s.slice(r.length));for(a in C.filter)!(i=ht[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):q(e,l).slice(0)},L=t.compile=function(e,t){var n,r=[],i=[],o=U[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[F]?r.push(o):i.push(o);o=U(e,b(i,r)),o.selector=e}return o},E=t.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,d=!r&&k(e=c.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&O&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(wt,Ct),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=ht.needsContext.test(e)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((l=C.find[s])&&(r=l(a.matches[0].replace(wt,Ct),bt.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return Z.apply(n,r),n;break}}return(c||L(e,d))(r,t,!O,n,bt.test(e)&&u(t.parentNode)||t),n},w.sortStable=F.split("").sort(V).join("")===F,w.detectDuplicates=!!$,M(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(nt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);it.find=ct,it.expr=ct.selectors,it.expr[":"]=it.expr.pseudos,it.unique=ct.uniqueSort,it.text=ct.getText,it.isXMLDoc=ct.isXML,it.contains=ct.contains;var ut=it.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ft=/^.[^:#\[\.,]*$/;it.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?it.find.matchesSelector(r,e)?[r]:[]:it.find.matches(e,it.grep(t,function(e){return 1===e.nodeType}))},it.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(it(e).filter(function(){for(t=0;i>t;t++)if(it.contains(r[t],this))return!0}));for(t=0;i>t;t++)it.find(e,r[t],n);return n=this.pushStack(i>1?it.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ut.test(e)?it(e):e||[],!1).length}});var pt,ht=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,gt=it.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof it?t[0]:t,it.merge(this,it.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ht,!0)),dt.test(n[1])&&it.isPlainObject(t))for(n in t)it.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=ht.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return pt.find(e);this.length=1,this[0]=r}return this.context=ht,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):it.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(it):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),it.makeArray(e,this))};gt.prototype=it.fn,pt=it(ht);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};it.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!it(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),it.fn.extend({has:function(e){var t,n=it(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(it.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ut.test(e)||"string"!=typeof e?it(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&it.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?it.unique(o):o)},index:function(e){return e?"string"==typeof e?it.inArray(this[0],it(e)):it.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(it.unique(it.merge(this.get(),it(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),it.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return it.dir(e,"parentNode")},parentsUntil:function(e,t,n){return it.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return it.dir(e,"nextSibling")},prevAll:function(e){return it.dir(e,"previousSibling")},nextUntil:function(e,t,n){return it.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return it.dir(e,"previousSibling",n)},siblings:function(e){return it.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return it.sibling(e.firstChild)},contents:function(e){return it.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:it.merge([],e.childNodes)}},function(e,t){it.fn[e]=function(n,r){var i=it.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=it.filter(r,i)),this.length>1&&(yt[e]||(i=it.unique(i)),vt.test(e)&&(i=i.reverse())),this.pushStack(i)}});var bt=/\S+/g,xt={};it.Callbacks=function(e){e="string"==typeof e?xt[e]||o(e):it.extend({},e);var t,n,r,i,a,s,l=[],c=!e.once&&[],u=function(o){for(n=e.memory&&o,r=!0,a=s||0,s=0,i=l.length,t=!0;l&&i>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,l&&(c?c.length&&u(c.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var r=l.length;!function o(t){it.each(t,function(t,n){var r=it.type(n);"function"===r?e.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),t?i=l.length:n&&(s=r,u(n))}return this},remove:function(){return l&&it.each(arguments,function(e,n){for(var r;(r=it.inArray(n,l,r))>-1;)l.splice(r,1),t&&(i>=r&&i--,a>=r&&a--)}),this},has:function(e){return e?it.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=c=n=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,n||d.disable(),this},locked:function(){return!c},fireWith:function(e,n){return!l||r&&!c||(n=n||[],n=[e,n.slice?n.slice():n],t?c.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},it.extend({Deferred:function(e){var t=[["resolve","done",it.Callbacks("once memory"),"resolved"],["reject","fail",it.Callbacks("once memory"),"rejected"],["notify","progress",it.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return it.Deferred(function(n){it.each(t,function(t,o){var a=it.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&it.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?it.extend(e,r):r}},i={};return r.pipe=r.then,it.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=K.call(arguments),a=o.length,s=1!==a||e&&it.isFunction(e.promise)?a:0,l=1===s?e:it.Deferred(),c=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?K.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&it.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(l.reject).progress(c(i,n,t)):--s;return s||l.resolveWith(r,o),l.promise()}});var wt;it.fn.ready=function(e){return it.ready.promise().done(e),this},it.extend({isReady:!1,readyWait:1,holdReady:function(e){e?it.readyWait++:it.ready(!0)},ready:function(e){if(e===!0?!--it.readyWait:!it.isReady){if(!ht.body)return setTimeout(it.ready);it.isReady=!0,e!==!0&&--it.readyWait>0||(wt.resolveWith(ht,[it]),it.fn.triggerHandler&&(it(ht).triggerHandler("ready"),it(ht).off("ready")))}}}),it.ready.promise=function(t){if(!wt)if(wt=it.Deferred(),"complete"===ht.readyState)setTimeout(it.ready);else if(ht.addEventListener)ht.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{ht.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&ht.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!it.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}a(),it.ready()}}()}return wt.promise(t)};var Ct,Tt="undefined";for(Ct in it(nt))break;nt.ownLast="0"!==Ct,nt.inlineBlockNeedsLayout=!1,it(function(){var e,t,n,r;n=ht.getElementsByTagName("body")[0],n&&n.style&&(t=ht.createElement("div"),r=ht.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Tt&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=ht.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),it.acceptData=function(e){var t=it.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var St=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kt=/([A-Z])/g;it.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?it.cache[e[it.expando]]:e[it.expando],!!e&&!c(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),it.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=it.data(o),1===o.nodeType&&!it._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=it.camelCase(r.slice(5)),l(o,r,i[r])));it._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){it.data(this,e)}):arguments.length>1?this.each(function(){it.data(this,e,t)}):o?l(o,e,it.data(o,e)):void 0},removeData:function(e){return this.each(function(){it.removeData(this,e)})}}),it.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=it._data(e,t),n&&(!r||it.isArray(n)?r=it._data(e,t,it.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=it.queue(e,t),r=n.length,i=n.shift(),o=it._queueHooks(e,t),a=function(){it.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return it._data(e,n)||it._data(e,n,{empty:it.Callbacks("once memory").add(function(){it._removeData(e,t+"queue"),it._removeData(e,n)})})}}),it.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?it.queue(this[0],e):void 0===t?this:this.each(function(){var n=it.queue(this,e,t);it._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&it.dequeue(this,e)})},dequeue:function(e){return this.each(function(){it.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=it.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=it._data(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Lt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Et=["Top","Right","Bottom","Left"],Nt=function(e,t){return e=t||e,"none"===it.css(e,"display")||!it.contains(e.ownerDocument,e)},At=it.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===it.type(n)){i=!0;for(s in n)it.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,it.isFunction(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(it(e),n)})),t))for(;l>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o},$t=/^(?:checkbox|radio)$/i;!function(){var e=ht.createElement("input"),t=ht.createElement("div"),n=ht.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ht.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(r){nt.deleteExpando=!1}}}(),function(){var t,n,r=ht.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),nt[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Mt=/^(?:input|select|textarea)$/i,Dt=/^key/,jt=/^(?:mouse|pointer|contextmenu)|click/,Ot=/^(?:focusinfocus|focusoutblur)$/,_t=/^([^.]*)(?:\.(.+)|)$/;it.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,g=it._data(e);if(g){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=it.guid++),(a=g.events)||(a=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof it===Tt||e&&it.event.triggered===e.type?void 0:it.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(bt)||[""],s=t.length;s--;)o=_t.exec(t[s])||[],p=m=o[1],h=(o[2]||"").split(".").sort(),p&&(c=it.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,c=it.event.special[p]||{},d=it.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&it.expr.match.needsContext.test(i),namespace:h.join(".")},l),(f=a[p])||(f=a[p]=[],f.delegateCount=0,c.setup&&c.setup.call(e,r,h,u)!==!1||(e.addEventListener?e.addEventListener(p,u,!1):e.attachEvent&&e.attachEvent("on"+p,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),it.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,c,u,d,f,p,h,m,g=it.hasData(e)&&it._data(e);if(g&&(u=g.events)){for(t=(t||"").match(bt)||[""],c=t.length;c--;)if(s=_t.exec(t[c])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=it.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,f=u[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));l&&!f.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||it.removeEvent(e,p,g.handle),delete u[p])}else for(p in u)it.event.remove(e,p+t[c],n,r,!0);it.isEmptyObject(u)&&(delete g.handle,it._removeData(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,c,u,d,f=[r||ht],p=tt.call(t,"type")?t.type:t,h=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=u=r=r||ht,3!==r.nodeType&&8!==r.nodeType&&!Ot.test(p+it.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[it.expando]?t:new it.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:it.makeArray(n,[t]),c=it.event.special[p]||{},i||!c.trigger||c.trigger.apply(r,n)!==!1)){if(!i&&!c.noBubble&&!it.isWindow(r)){for(l=c.delegateType||p,Ot.test(l+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),u=s;u===(r.ownerDocument||ht)&&f.push(u.defaultView||u.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||p,o=(it._data(s,"events")||{})[t.type]&&it._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&it.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(f.pop(),n)===!1)&&it.acceptData(r)&&a&&r[p]&&!it.isWindow(r)){u=r[a],u&&(r[a]=null),it.event.triggered=p;try{r[p]()}catch(m){}it.event.triggered=void 0,u&&(r[a]=u)}return t.result}},dispatch:function(e){e=it.event.fix(e);var t,n,r,i,o,a=[],s=K.call(arguments),l=(it._data(this,"events")||{})[e.type]||[],c=it.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=it.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((it.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],o=0;s>o;o++)r=t[o],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?it(n,this).index(l)>=0:it.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[it.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=jt.test(i)?this.mouseHooks:Dt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new it.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||ht),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||ht,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return it.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return it.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=it.extend(new it.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?it.event.trigger(i,null,t):it.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},it.removeEvent=ht.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Tt&&(e[r]=null),e.detachEvent(r,n))},it.Event=function(e,t){return this instanceof it.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:p):this.type=e,t&&it.extend(this,t),this.timeStamp=e&&e.timeStamp||it.now(),void(this[it.expando]=!0)):new it.Event(e,t)},it.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},it.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){it.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!it.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(it.event.special.submit={setup:function(){return it.nodeName(this,"form")?!1:void it.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=it.nodeName(t,"input")||it.nodeName(t,"button")?t.form:void 0;n&&!it._data(n,"submitBubbles")&&(it.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),it._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&it.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return it.nodeName(this,"form")?!1:void it.event.remove(this,"._submit")}}),nt.changeBubbles||(it.event.special.change={setup:function(){return Mt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(it.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),it.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),it.event.simulate("change",this,e,!0)})),!1):void it.event.add(this,"beforeactivate._change",function(e){var t=e.target;Mt.test(t.nodeName)&&!it._data(t,"changeBubbles")&&(it.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||it.event.simulate("change",this.parentNode,e,!0)}),it._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return it.event.remove(this,"._change"),!Mt.test(this.nodeName)}}),nt.focusinBubbles||it.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){it.event.simulate(t,e.target,it.event.fix(e),!0)};it.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=it._data(r,t);i||r.addEventListener(e,n,!0),it._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=it._data(r,t)-1;i?it._data(r,t,i):(r.removeEventListener(e,n,!0),it._removeData(r,t))}}}),it.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=p;else if(!r)return this;return 1===i&&(a=r,r=function(e){return it().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=it.guid++)),this.each(function(){it.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,it(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=p),this.each(function(){it.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){it.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?it.event.trigger(e,t,n,!0):void 0}});var Ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",It=/ jQuery\d+="(?:null|\d+)"/g,Pt=new RegExp("<(?:"+Ht+")[\\s/>]","i"),Ft=/^\s+/,Rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,Wt=/<tbody/i,zt=/<|&#?\w+;/,qt=/<(?:script|style|link)/i,Ut=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^$|\/(?:java|ecma)script/i,Xt=/^true\/(.*)/,Gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Kt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Yt=m(ht),Qt=Yt.appendChild(ht.createElement("div"));Kt.optgroup=Kt.option,Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td,it.extend({clone:function(e,t,n){var r,i,o,a,s,l=it.contains(e.ownerDocument,e);if(nt.html5Clone||it.isXMLDoc(e)||!Pt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Qt.innerHTML=e.outerHTML,Qt.removeChild(o=Qt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||it.isXMLDoc(e)))for(r=g(o),s=g(e),a=0;null!=(i=s[a]);++a)r[a]&&T(i,r[a]);if(t)if(n)for(s=s||g(e),r=r||g(o),a=0;null!=(i=s[a]);a++)C(i,r[a]);else C(e,o);return r=g(o,"script"),r.length>0&&w(r,!l&&g(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,c,u,d=e.length,f=m(t),p=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===it.type(o))it.merge(p,o.nodeType?[o]:o);else if(zt.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(Bt.exec(o)||["",""])[1].toLowerCase(),u=Kt[l]||Kt._default,s.innerHTML=u[1]+o.replace(Rt,"<$1></$2>")+u[2],i=u[0];i--;)s=s.lastChild;if(!nt.leadingWhitespace&&Ft.test(o)&&p.push(t.createTextNode(Ft.exec(o)[0])),!nt.tbody)for(o="table"!==l||Wt.test(o)?"<table>"!==u[1]||Wt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)it.nodeName(c=o.childNodes[i],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(it.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else p.push(t.createTextNode(o));for(s&&f.removeChild(s),nt.appendChecked||it.grep(g(p,"input"),v),h=0;o=p[h++];)if((!r||-1===it.inArray(o,r))&&(a=it.contains(o.ownerDocument,o),s=g(f.appendChild(o),"script"),a&&w(s),n))for(i=0;o=s[i++];)Vt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,i,o,a=0,s=it.expando,l=it.cache,c=nt.deleteExpando,u=it.event.special;null!=(n=e[a]);a++)if((t||it.acceptData(n))&&(i=n[s],o=i&&l[i])){if(o.events)for(r in o.events)u[r]?it.event.remove(n,r):it.removeEvent(n,r,o.handle);l[i]&&(delete l[i],c?delete n[s]:typeof n.removeAttribute!==Tt?n.removeAttribute(s):n[s]=null,G.push(i))}}}),it.fn.extend({text:function(e){return At(this,function(e){return void 0===e?it.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ht).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?it.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||it.cleanData(g(n)),n.parentNode&&(t&&it.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&it.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&it.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return it.clone(this,e,t)})},html:function(e){return At(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(It,""):void 0;if(!("string"!=typeof e||qt.test(e)||!nt.htmlSerialize&&Pt.test(e)||!nt.leadingWhitespace&&Ft.test(e)||Kt[(Bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Rt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(it.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,it.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Y.apply([],e);var n,r,i,o,a,s,l=0,c=this.length,u=this,d=c-1,f=e[0],p=it.isFunction(f);if(p||c>1&&"string"==typeof f&&!nt.checkClone&&Ut.test(f))return this.each(function(n){var r=u.eq(n);p&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(c&&(s=it.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=it.map(g(s,"script"),b),i=o.length;c>l;l++)r=s,l!==d&&(r=it.clone(r,!0,!0),i&&it.merge(o,g(r,"script"))),t.call(this[l],r,l);if(i)for(a=o[o.length-1].ownerDocument,it.map(o,x),l=0;i>l;l++)r=o[l],Vt.test(r.type||"")&&!it._data(r,"globalEval")&&it.contains(a,r)&&(r.src?it._evalUrl&&it._evalUrl(r.src):it.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Gt,"")));s=n=null}return this}}),it.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){it.fn[e]=function(e){for(var n,r=0,i=[],o=it(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),it(o[r])[t](n),Q.apply(i,n.get());return this.pushStack(i)}});var Jt,Zt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=ht.getElementsByTagName("body")[0],n&&n.style?(t=ht.createElement("div"),r=ht.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Tt&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ht.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0
}}();var en,tn,nn=/^margin/,rn=new RegExp("^("+Lt+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var r,i,o,a,s=e.style;return n=n||en(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||it.contains(e.ownerDocument,e)||(a=it.style(e,t)),rn.test(a)&&nn.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):ht.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var r,i,o,a,s=e.style;return n=n||en(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),rn.test(a)&&!on.test(t)&&(r=s.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,r,i;n=ht.getElementsByTagName("body")[0],n&&n.style&&(t=ht.createElement("div"),r=ht.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,i=t.appendChild(ht.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===i[0].offsetHeight,s&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,o,a,s,l;n=ht.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=n.getElementsByTagName("a")[0],r=i&&i.style,r&&(r.cssText="float:left;opacity:.5",nt.opacity="0.5"===r.opacity,nt.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,it.extend(nt,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==l&&t(),l}}))}(),it.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,ln=/^(none|table(?!-c[ea]).+)/,cn=new RegExp("^("+Lt+")(.*)$","i"),un=new RegExp("^([+-])=("+Lt+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},fn={letterSpacing:"0",fontWeight:"400"},pn=["Webkit","O","Moz","ms"];it.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=it.camelCase(t),l=e.style;if(t=it.cssProps[s]||(it.cssProps[s]=E(l,s)),a=it.cssHooks[t]||it.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];if(o=typeof n,"string"===o&&(i=un.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(it.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||it.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]=n}catch(c){}}},css:function(e,t,n,r){var i,o,a,s=it.camelCase(t);return t=it.cssProps[s]||(it.cssProps[s]=E(e.style,s)),a=it.cssHooks[t]||it.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tn(e,t,r)),"normal"===o&&t in fn&&(o=fn[t]),""===n||n?(i=parseFloat(o),n===!0||it.isNumeric(i)?i||0:o):o}}),it.each(["height","width"],function(e,t){it.cssHooks[t]={get:function(e,n,r){return n?ln.test(it.css(e,"display"))&&0===e.offsetWidth?it.swap(e,dn,function(){return M(e,t,r)}):M(e,t,r):void 0},set:function(e,n,r){var i=r&&en(e);return A(e,n,r?$(e,t,r,nt.boxSizing&&"border-box"===it.css(e,"boxSizing",!1,i),i):0)}}}),nt.opacity||(it.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=it.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===it.trim(o.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=an.test(o)?o.replace(an,i):o+" "+i)}}),it.cssHooks.marginRight=L(nt.reliableMarginRight,function(e,t){return t?it.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),it.each({margin:"",padding:"",border:"Width"},function(e,t){it.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Et[r]+t]=o[r]||o[r-2]||o[0];return i}},nn.test(e)||(it.cssHooks[e+t].set=A)}),it.fn.extend({css:function(e,t){return At(this,function(e,t,n){var r,i,o={},a=0;if(it.isArray(t)){for(r=en(e),i=t.length;i>a;a++)o[t[a]]=it.css(e,t[a],!1,r);return o}return void 0!==n?it.style(e,t,n):it.css(e,t)},e,t,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Nt(this)?it(this).show():it(this).hide()})}}),it.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(it.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.pos=t=this.options.duration?it.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=it.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){it.fx.step[e.prop]?it.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[it.cssProps[e.prop]]||it.cssHooks[e.prop])?it.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},it.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},it.fx=D.prototype.init,it.fx.step={};var hn,mn,gn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+Lt+")([a-z%]*)$","i"),yn=/queueHooks$/,bn=[H],xn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=vn.exec(t),o=i&&i[3]||(it.cssNumber[e]?"":"px"),a=(it.cssNumber[e]||"px"!==o&&+r)&&vn.exec(it.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,it.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};it.Animation=it.extend(P,{tweener:function(e,t){it.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],xn[n]=xn[n]||[],xn[n].unshift(t)},prefilter:function(e,t){t?bn.unshift(e):bn.push(e)}}),it.speed=function(e,t,n){var r=e&&"object"==typeof e?it.extend({},e):{complete:n||!n&&t||it.isFunction(e)&&e,duration:e,easing:n&&t||t&&!it.isFunction(t)&&t};return r.duration=it.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in it.fx.speeds?it.fx.speeds[r.duration]:it.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){it.isFunction(r.old)&&r.old.call(this),r.queue&&it.dequeue(this,r.queue)},r},it.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Nt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=it.isEmptyObject(e),o=it.speed(t,n,r),a=function(){var t=P(this,it.extend({},e),o);(i||it._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=it.timers,a=it._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&yn.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&it.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=it._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=it.timers,a=r?r.length:0;for(n.finish=!0,it.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),it.each(["toggle","show","hide"],function(e,t){var n=it.fn[t];it.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(O(t,!0),e,r,i)}}),it.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){it.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),it.timers=[],it.fx.tick=function(){var e,t=it.timers,n=0;for(hn=it.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||it.fx.stop(),hn=void 0},it.fx.timer=function(e){it.timers.push(e),e()?it.fx.start():it.timers.pop()},it.fx.interval=13,it.fx.start=function(){mn||(mn=setInterval(it.fx.tick,it.fx.interval))},it.fx.stop=function(){clearInterval(mn),mn=null},it.fx.speeds={slow:600,fast:200,_default:400},it.fn.delay=function(e,t){return e=it.fx?it.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=ht.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=ht.createElement("select"),i=n.appendChild(ht.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(r.getAttribute("style")),nt.hrefNormalized="/a"===r.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=i.selected,nt.enctype=!!ht.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!i.disabled,e=ht.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var wn=/\r/g;it.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=it.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,it(this).val()):e,null==i?i="":"number"==typeof i?i+="":it.isArray(i)&&(i=it.map(i,function(e){return null==e?"":e+""})),t=it.valHooks[this.type]||it.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=it.valHooks[i.type]||it.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)}}}),it.extend({valHooks:{option:{get:function(e){var t=it.find.attr(e,"value");return null!=t?t:it.trim(it.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&it.nodeName(n.parentNode,"optgroup"))){if(t=it(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=it.makeArray(t),a=i.length;a--;)if(r=i[a],it.inArray(it.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(s){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),it.each(["radio","checkbox"],function(){it.valHooks[this]={set:function(e,t){return it.isArray(t)?e.checked=it.inArray(it(e).val(),t)>=0:void 0}},nt.checkOn||(it.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Cn,Tn,Sn=it.expr.attrHandle,kn=/^(?:checked|selected)$/i,Ln=nt.getSetAttribute,En=nt.input;it.fn.extend({attr:function(e,t){return At(this,it.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){it.removeAttr(this,e)})}}),it.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Tt?it.prop(e,t,n):(1===o&&it.isXMLDoc(e)||(t=t.toLowerCase(),r=it.attrHooks[t]||(it.expr.match.bool.test(t)?Tn:Cn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=it.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void it.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(bt);if(o&&1===e.nodeType)for(;n=o[i++];)r=it.propFix[n]||n,it.expr.match.bool.test(n)?En&&Ln||!kn.test(n)?e[r]=!1:e[it.camelCase("default-"+n)]=e[r]=!1:it.attr(e,n,""),e.removeAttribute(Ln?n:r)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&it.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Tn={set:function(e,t,n){return t===!1?it.removeAttr(e,n):En&&Ln||!kn.test(n)?e.setAttribute(!Ln&&it.propFix[n]||n,n):e[it.camelCase("default-"+n)]=e[n]=!0,n}},it.each(it.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Sn[t]||it.find.attr;Sn[t]=En&&Ln||!kn.test(t)?function(e,t,r){var i,o;return r||(o=Sn[t],Sn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Sn[t]=o),i}:function(e,t,n){return n?void 0:e[it.camelCase("default-"+t)]?t.toLowerCase():null}}),En&&Ln||(it.attrHooks.value={set:function(e,t,n){return it.nodeName(e,"input")?void(e.defaultValue=t):Cn&&Cn.set(e,t,n)}}),Ln||(Cn={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},it.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Cn.set},it.attrHooks.contenteditable={set:function(e,t,n){Cn.set(e,""===t?!1:t,n)}},it.each(["width","height"],function(e,t){it.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(it.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Nn=/^(?:input|select|textarea|button|object)$/i,An=/^(?:a|area)$/i;it.fn.extend({prop:function(e,t){return At(this,it.prop,e,t,arguments.length>1)},removeProp:function(e){return e=it.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),it.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!it.isXMLDoc(e),o&&(t=it.propFix[t]||t,i=it.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=it.find.attr(e,"tabindex");return t?parseInt(t,10):Nn.test(e.nodeName)||An.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||it.each(["href","src"],function(e,t){it.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(it.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),it.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){it.propFix[this.toLowerCase()]=this}),nt.enctype||(it.propFix.enctype="encoding");var $n=/[\t\r\n\f]/g;it.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,c="string"==typeof e&&e;if(it.isFunction(e))return this.each(function(t){it(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace($n," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=it.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(it.isFunction(e))return this.each(function(t){it(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(bt)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace($n," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?it.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(it.isFunction(e)?function(n){it(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=it(this),o=e.match(bt)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Tt||"boolean"===n)&&(this.className&&it._data(this,"__className__",this.className),this.className=this.className||e===!1?"":it._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace($n," ").indexOf(t)>=0)return!0;return!1}}),it.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){it.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),it.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Mn=it.now(),Dn=/\?/,jn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;it.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=it.trim(t+"");return i&&!it.trim(i.replace(jn,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+i)():it.error("Invalid JSON: "+t)},it.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||it.error("Invalid XML: "+t),n};var On,_n,Hn=/#.*$/,In=/([?&])_=[^&]*/,Pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Wn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,zn={},qn={},Un="*/".concat("*");try{_n=location.href}catch(Vn){_n=ht.createElement("a"),_n.href="",_n=_n.href}On=Wn.exec(_n.toLowerCase())||[],it.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_n,type:"GET",isLocal:Fn.test(On[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":it.parseJSON,"text xml":it.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,it.ajaxSettings),t):B(it.ajaxSettings,e)},ajaxPrefilter:F(zn),ajaxTransport:F(qn),ajax:function(e,t){function n(e,t,n,r){var i,u,v,y,x,C=t;2!==b&&(b=2,s&&clearTimeout(s),c=void 0,a=r||"",w.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=W(d,w,n)),y=z(d,y,w,i),i?(d.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(it.lastModified[o]=x),x=w.getResponseHeader("etag"),x&&(it.etag[o]=x)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=y.state,u=y.data,v=y.error,i=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),w.status=e,w.statusText=(t||C)+"",i?h.resolveWith(f,[u,C,w]):h.rejectWith(f,[w,C,v]),w.statusCode(g),g=void 0,l&&p.trigger(i?"ajaxSuccess":"ajaxError",[w,d,i?u:v]),m.fireWith(f,[w,C]),l&&(p.trigger("ajaxComplete",[w,d]),--it.active||it.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,c,u,d=it.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?it(f):it.event,h=it.Deferred(),m=it.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!u)for(u={};t=Pn.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return c&&c.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||_n)+"").replace(Hn,"").replace(Bn,On[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=it.trim(d.dataType||"*").toLowerCase().match(bt)||[""],null==d.crossDomain&&(r=Wn.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===On[1]&&r[2]===On[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(On[3]||("http:"===On[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=it.param(d.data,d.traditional)),R(zn,d,t,w),2===b)return w;l=d.global,l&&0===it.active++&&it.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Rn.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Dn.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=In.test(o)?o.replace(In,"$1_="+Mn++):o+(Dn.test(o)?"&":"?")+"_="+Mn++)),d.ifModified&&(it.lastModified[o]&&w.setRequestHeader("If-Modified-Since",it.lastModified[o]),it.etag[o]&&w.setRequestHeader("If-None-Match",it.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Un+"; q=0.01":""):d.accepts["*"]);for(i in d.headers)w.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(d.beforeSend.call(f,w,d)===!1||2===b))return w.abort();x="abort";for(i in{success:1,error:1,complete:1})w[i](d[i]);if(c=R(qn,d,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,c.send(v,n)}catch(C){if(!(2>b))throw C;n(-1,C)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return it.get(e,t,n,"json")},getScript:function(e,t){return it.get(e,void 0,t,"script")}}),it.each(["get","post"],function(e,t){it[t]=function(e,n,r,i){return it.isFunction(n)&&(i=i||r,r=n,n=void 0),it.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),it.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){it.fn[t]=function(e){return this.on(t,e)}}),it._evalUrl=function(e){return it.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},it.fn.extend({wrapAll:function(e){if(it.isFunction(e))return this.each(function(t){it(this).wrapAll(e.call(this,t))});if(this[0]){var t=it(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(it.isFunction(e)?function(t){it(this).wrapInner(e.call(this,t))}:function(){var t=it(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=it.isFunction(e);return this.each(function(n){it(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){it.nodeName(this,"body")||it(this).replaceWith(this.childNodes)}).end()}}),it.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||it.css(e,"display"))},it.expr.filters.visible=function(e){return!it.expr.filters.hidden(e)};var Xn=/%20/g,Gn=/\[\]$/,Kn=/\r?\n/g,Yn=/^(?:submit|button|image|reset|file)$/i,Qn=/^(?:input|select|textarea|keygen)/i;it.param=function(e,t){var n,r=[],i=function(e,t){t=it.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=it.ajaxSettings&&it.ajaxSettings.traditional),it.isArray(e)||e.jquery&&!it.isPlainObject(e))it.each(e,function(){i(this.name,this.value)});else for(n in e)q(n,e[n],t,i);return r.join("&").replace(Xn,"+")},it.fn.extend({serialize:function(){return it.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=it.prop(this,"elements");return e?it.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!it(this).is(":disabled")&&Qn.test(this.nodeName)&&!Yn.test(e)&&(this.checked||!$t.test(e))}).map(function(e,t){var n=it(this).val();return null==n?null:it.isArray(n)?it.map(n,function(e){return{name:t.name,value:e.replace(Kn,"\r\n")}}):{name:t.name,value:n.replace(Kn,"\r\n")}}).get()}}),it.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||V()}:U;var Jn=0,Zn={},er=it.ajaxSettings.xhr();e.ActiveXObject&&it(e).on("unload",function(){for(var e in Zn)Zn[e](void 0,!0)}),nt.cors=!!er&&"withCredentials"in er,er=nt.ajax=!!er,er&&it.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++Jn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,l,c;if(t&&(i||4===o.readyState))if(delete Zn[a],t=void 0,o.onreadystatechange=it.noop,i)4!==o.readyState&&o.abort();else{c={},s=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(u){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=c.text?200:404}c&&r(s,l,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zn[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),it.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return it.globalEval(e),e}}}),it.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),it.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ht.head||it("head")[0]||ht.documentElement;return{send:function(r,i){t=ht.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var tr=[],nr=/(=)\?(?=&|$)|\?\?/;it.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tr.pop()||it.expando+"_"+Mn++;return this[e]=!0,e}}),it.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(nr.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nr.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=it.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nr,"$1"+i):t.jsonp!==!1&&(t.url+=(Dn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||it.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,tr.push(i)),a&&it.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),it.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ht;var r=dt.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=it.buildFragment([e],t,i),i&&i.length&&it(i).remove(),it.merge([],r.childNodes))};var rr=it.fn.load;it.fn.load=function(e,t,n){if("string"!=typeof e&&rr)return rr.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=it.trim(e.slice(s,e.length)),e=e.slice(0,s)),it.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&it.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?it("<div>").append(it.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},it.expr.filters.animated=function(e){return it.grep(it.timers,function(t){return e===t.elem}).length};var ir=e.document.documentElement;it.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c,u=it.css(e,"position"),d=it(e),f={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=it.css(e,"top"),l=it.css(e,"left"),c=("absolute"===u||"fixed"===u)&&it.inArray("auto",[o,l])>-1,c?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),it.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},it.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){it.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,it.contains(t,i)?(typeof i.getBoundingClientRect!==Tt&&(r=i.getBoundingClientRect()),n=X(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===it.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),it.nodeName(e[0],"html")||(n=e.offset()),n.top+=it.css(e[0],"borderTopWidth",!0),n.left+=it.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-it.css(r,"marginTop",!0),left:t.left-n.left-it.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ir;e&&!it.nodeName(e,"html")&&"static"===it.css(e,"position");)e=e.offsetParent;return e||ir})}}),it.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);it.fn[e]=function(r){return At(this,function(e,r,i){var o=X(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[r]:e[r]:void(o?o.scrollTo(n?it(o).scrollLeft():i,n?i:it(o).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),it.each(["top","left"],function(e,t){it.cssHooks[t]=L(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?it(e).position()[t]+"px":n):void 0})}),it.each({Height:"height",Width:"width"},function(e,t){it.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){it.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return At(this,function(t,n,r){var i;return it.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?it.css(t,n,a):it.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),it.fn.size=function(){return this.length},it.fn.andSelf=it.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return it
});var or=e.jQuery,ar=e.$;return it.noConflict=function(t){return e.$===it&&(e.$=ar),t&&e.jQuery===it&&(e.jQuery=or),it},typeof t===Tt&&(e.jQuery=e.$=it),it}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote], button[data-confirm]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(r){var i,o,a,s,l,c,u,d;if(n.fire(r,"ajax:before")){if(s=r.data("cross-domain"),l=s===t?null:s,c=r.data("with-credentials")||null,u=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,r.is("form")){i=r.attr("method"),o=r.attr("action"),a=r.serializeArray();var f=r.data("ujs:submit-button");f&&(a.push(f),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),o=r.data("url"),a=r.serialize(),r.data("params")&&(a=a+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(i=r.data("method")||"get",o=r.data("url"),a=r.serialize(),r.data("params")&&(a=a+"&"+r.data("params"))):(i=r.data("method"),o=n.href(r),a=r.data("params")||null);return d={type:i||"GET",data:a,dataType:u,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])?void r.trigger("ajax:send",e):!1},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:l},c&&(d.xhrFields={withCredentials:c}),o&&(d.url=o),n.ajax(d)}return!1},handleMethod:function(r){var i=n.href(r),o=r.data("method"),a=r.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+i+'"></form>'),u='<input name="_method" value="'+o+'" type="hidden" />';l!==t&&s!==t&&(u+='<input name="'+l+'" value="'+s+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,r;n=e.is("button")?"html":"val",r=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),r!==t&&e[n](r),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,r=e.data("confirm"),i=!1;return r?(n.fire(e,"confirm")&&(i=n.confirm(r),t=n.fire(e,"confirm:complete",[i])),i&&t):!0},blankInputs:function(t,n,r){var i,o,a=e(),s=n||"input,textarea",l=t.find(s);return l.each(function(){if(i=e(this),o=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val(),!o==!r){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;a=a.add(i)}}),a.length?a:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var r=e.data("disable-with");e.data("ujs:enable-with",e.html()),r!==t&&e.html(r),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),r.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),r.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),r.delegate(n.linkClickSelector,"click.rails",function(r){var i=e(this),o=i.data("method"),a=i.data("params"),s=r.metaKey||r.ctrlKey;if(!n.allowAction(i))return n.stopEverything(r);if(!s&&i.is(n.linkDisableSelector)&&n.disableElement(i),i.data("remote")!==t){if(s&&(!o||"GET"===o)&&!a)return!0;var l=n.handleRemote(i);return l===!1?n.enableElement(i):l.error(function(){n.enableElement(i)}),!1}return i.data("method")?(n.handleMethod(i),!1):void 0}),r.delegate(n.buttonClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);r.is(n.buttonDisableSelector)&&n.disableFormElement(r);var i=n.handleRemote(r);return i===!1?n.enableFormElement(r):i.error(function(){n.enableFormElement(r)}),!1}),r.delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.delegate(n.formSubmitSelector,"submit.rails",function(r){var i,o,a=e(this),s=a.data("remote")!==t;if(!n.allowAction(a))return n.stopEverything(r);if(a.attr("novalidate")==t&&(i=n.blankInputs(a,n.requiredInputSelector),i&&n.fire(a,"ajax:aborted:required",[i])))return n.stopEverything(r);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var l=n.fire(a,"ajax:aborted:file",[o]);return l||setTimeout(function(){n.enableFormElements(a)},13),l}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),r.delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),o=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",o)}),r.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),r.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),window.Modernizr=function(e,t,n){function r(e){y.cssText=e}function i(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&y[i]!==n)return"pfx"==t?i:!0}return!1}function s(e,t,r){for(var o in e){var a=t[e[o]];if(a!==n)return r===!1?e[o]:i(a,"function")?a.bind(r||t):a}return!1}function l(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+x.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?a(o,t):(o=(e+" "+w.join(r+" ")+r).split(" "),s(o,t,n))}var c,u,d,f="2.7.1",p={},h=!0,m=t.documentElement,g="modernizr",v=t.createElement(g),y=v.style,b=({}.toString,"Webkit Moz O ms"),x=b.split(" "),w=b.toLowerCase().split(" "),C={},T=[],S=T.slice,k={}.hasOwnProperty;d=i(k,"undefined")||i(k.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return k.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=S.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var o=new i,a=t.apply(o,n.concat(S.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(S.call(arguments)))};return r}),C.csstransitions=function(){return l("transition")};for(var L in C)d(C,L)&&(u=L.toLowerCase(),p[u]=C[L](),T.push((p[u]?"":"no-")+u));return p.addTest=function(e,t){if("object"==typeof e)for(var r in e)d(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof h&&h&&(m.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),v=c=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=v[e[m]];return t||(t={},g++,e[m]=g,v[g]=t),t}function o(e,n,r){if(n||(n=t),u)return n.createElement(e);r||(r=i(n));var o;return o=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!o.canHaveChildren||p.test(e)||o.tagUrn?o:r.frag.appendChild(o)}function a(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||i(e);for(var o=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function l(e){e||(e=t);var r=i(e);return y.shivCSS&&!c&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||s(e,r),e}var c,u,d="3.7.0",f=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",g=0,v={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",c="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){c=!0,u=!0}}();var y={elements:f.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:f.shivCSS!==!1,supportsUnknownElements:u,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};e.html5=y,l(t)}(this,t),p._version=f,p._domPrefixes=w,p._cssomPrefixes=x,p.testProp=function(e){return a([e])},p.testAllProps=l,p.prefixed=function(e,t,n){return t?l(e,t,n):l(e,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+T.join(" "):""),p}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==g.call(e)}function i(e){return"string"==typeof e}function o(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();y=1,e?e.t?h(function(){("c"==e.t?f.injectCss:f.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):y=0}function l(e,n,r,i,o,l,c){function u(t){if(!p&&a(d.readyState)&&(b.r=p=1,!y&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&h(function(){w.removeChild(d)},50);for(var r in L[n])L[n].hasOwnProperty(r)&&L[n][r].onload()}}var c=c||f.errorTimeout,d=t.createElement(e),p=0,g=0,b={t:r,s:n,e:o,a:l,x:c};1===L[n]&&(g=1,L[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,g)},v.splice(i,0,b),"img"!=e&&(g||2===L[n]?(w.insertBefore(d,x?null:m),h(u,c)):L[n].push(d))}function c(e,t,n,r,o){return y=0,t=t||"j",i(e)?l("c"==t?T:C,e,t,this.i++,n,r,o):(v.splice(this.i++,0,e),1==v.length&&s()),this}function u(){var e=f;return e.loader={load:c,i:0},e}var d,f,p=t.documentElement,h=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,b="MozAppearance"in p.style,x=b&&!!t.createRange().compareNode,w=x?p:m.parentNode,p=e.opera&&"[object Opera]"==g.call(e.opera),p=!!t.attachEvent&&!p,C=b?"object":p?"script":"img",T=p?"script":C,S=Array.isArray||function(e){return"[object Array]"==g.call(e)},k=[],L={},E={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};f=function(e){function t(e){var t,n,r,e=e.split("!"),i=k.length,o=e.pop(),a=e.length,o={url:o,origUrl:o,prefixes:e};for(n=0;a>n;n++)r=e[n].split("="),(t=E[r.shift()])&&(o=t(o,r));for(n=0;i>n;n++)o=k[n](o);return o}function a(e,i,o,a,s){var l=t(e),c=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(i&&(i=r(i)?i:i[e]||i[a]||i[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,i,o,a,s):(L[l.url]?l.noexec=!0:L[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(i)||r(c))&&o.load(function(){u(),i&&i(l.origUrl,s,a),c&&c(l.origUrl,s,a),L[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(i(e))n||(d=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}),a(e,d,t,0,c);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(r(d)?d=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(f[l])),a(e[l],d,t,l,c))}else!n&&p()}var s,l,c=!!e.test,u=e.load||e.both,d=e.callback||o,f=d,p=e.complete||o;n(c?e.yep:e.nope,!!u),u&&n(u)}var l,c,d=this.yepnope.loader;if(i(e))a(e,0,d,0);else if(S(e))for(l=0;l<e.length;l++)c=e[l],i(c)?a(c,0,d,0):S(c)?f(c):Object(c)===c&&s(c,d);else Object(e)===e&&s(e,d)},f.addPrefix=function(e,t){E[e]=t},f.addFilter=function(e){k.push(e)},f.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,i,l,c){var u,d,p=t.createElement("script"),i=i||f.errorTimeout;p.src=e;for(d in r)p.setAttribute(d,r[d]);n=c?s:n||o,p.onreadystatechange=p.onload=function(){!u&&a(p.readyState)&&(u=1,n(),p.onload=p.onreadystatechange=null)},h(function(){u||(u=1,n(1))},i),l?p.onload():m.parentNode.insertBefore(p,m)},e.yepnope.injectCss=function(e,n,r,i,a,l){var c,i=t.createElement("link"),n=l?s:n||o;i.href=e,i.rel="stylesheet",i.type="text/css";for(c in r)i.setAttribute(c,r[c]);a||(m.parentNode.insertBefore(i,m),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t){return e.isFunction(t)||"object"==typeof t?t:{top:t,left:t}}var n=e.scrollTo=function(t,n,r){return e(window).scrollTo(t,n,r)};return n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==r.compatMode?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,o){return"object"==typeof i&&(o=i,i=0),"function"==typeof o&&(o={onAfter:o}),"max"==r&&(r=9e9),o=e.extend({},n.defaults,o),i=i||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(i/=2),o.offset=t(o.offset),o.over=t(o.over),this._scrollable().each(function(){function a(e){c.animate(d,i,o.easing,e&&function(){e.call(this,u,o)})}if(null!=r){var s,l=this,c=e(l),u=r,d={},f=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=f?e(u):e(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}var p=e.isFunction(o.offset)&&o.offset(l,u)||o.offset;e.each(o.axis.split(""),function(e,t){var r="x"==t?"Left":"Top",i=r.toLowerCase(),h="scroll"+r,m=l[h],g=n.max(l,t);if(s)d[h]=s[i]+(f?0:m-c.offset()[i]),o.margin&&(d[h]-=parseInt(u.css("margin"+r))||0,d[h]-=parseInt(u.css("border"+r+"Width"))||0),d[h]+=p[i]||0,o.over[i]&&(d[h]+=u["x"==t?"width":"height"]()*o.over[i]);else{var v=u[i];d[h]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*g:v}o.limit&&/^\d+$/.test(d[h])&&(d[h]=d[h]<=0?0:Math.min(d[h],g)),!e&&o.queue&&(m!=d[h]&&a(o.onAfterFirst),delete d[h])}),a(o.onAfter)}}).end()},n.max=function(t,n){var r="x"==n?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var o="client"+r,a=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(a[i],s[i])-Math.min(a[o],s[o])},n}),function(e){function t(){var t,n,r={height:c.innerHeight,width:c.innerWidth};return r.height||(t=l.compatMode,(t||!e.support.boxModel)&&(n="CSS1Compat"===t?u:l.body,r={height:n.clientHeight,width:n.clientWidth})),r}function n(){return{top:c.pageYOffset||u.scrollTop||l.body.scrollTop,left:c.pageXOffset||u.scrollLeft||l.body.scrollLeft}}function r(){var r,a=e(),l=0;if(e.each(s,function(e,t){var n=t.data.selector,r=t.$element;a=a.add(n?r.find(n):r)}),r=a.length)for(i=i||t(),o=o||n();r>l;l++)if(e.contains(u,a[l])){var c,d,f,p=e(a[l]),h={height:p.height(),width:p.width()},m=p.offset(),g=p.data("inview");if(!o||!i)return;m.top+h.height>o.top&&m.top<o.top+i.height&&m.left+h.width>o.left&&m.left<o.left+i.width?(c=o.left>m.left?"right":o.left+i.width<m.left+h.width?"left":"both",d=o.top>m.top?"bottom":o.top+i.height<m.top+h.height?"top":"both",f=c+"-"+d,g&&g===f||p.data("inview",f).trigger("inview",[!0,c,d])):g&&p.data("inview",!1).trigger("inview",[!1])}}var i,o,a,s={},l=document,c=window,u=l.documentElement,d=e.expando;e.event.special.inview={add:function(t){s[t.guid+"-"+this[d]]={data:t,$element:e(this)},a||e.isEmptyObject(s)||(a=setInterval(r,250))},remove:function(t){try{delete s[t.guid+"-"+this[d]]}catch(n){}e.isEmptyObject(s)&&(clearInterval(a),a=null)}},e(c).bind("scroll resize scrollstop",function(){i=o=null}),!u.addEventListener&&u.attachEvent&&u.attachEvent("onfocusin",function(){o=null})}(jQuery),function(e){var t=e.fn.ready;e.fn.ready=function(n){t(void 0===this.context?n:this.selector?e.proxy(function(){e(this.selector,this.context).each(n)},this):e.proxy(function(){e(this).each(n)},this))}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(e){"use strict";function t(n,r){var i=function(){},o=this,a={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:t.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:i,onSearchComplete:i,onSearchError:i,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(e,t,n){return-1!==e.value.toLowerCase().indexOf(n)},paramName:"query",transformResult:function(t){return"string"==typeof t?e.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};o.element=n,o.el=e(n),o.suggestions=[],o.badQueries=[],o.selectedIndex=-1,o.currentValue=o.element.value,o.intervalId=0,o.cachedResponse={},o.onChangeInterval=null,o.onChange=null,o.isLocal=!1,o.suggestionsContainer=null,o.noSuggestionsContainer=null,o.options=e.extend({},a,r),o.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"},o.hint=null,o.hintValue="",o.selection=null,o.initialize(),o.setOptions(r)}var n=function(){return{escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},createNode:function(e){var t=document.createElement("div");return t.className=e,t.style.position="absolute",t.style.display="none",t}}}(),r={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};t.utils=n,e.Autocomplete=t,t.formatResult=function(e,t){var r="("+n.escapeRegExChars(t)+")";return e.value.replace(new RegExp(r,"gi"),"<strong>$1</strong>")},t.prototype={killerFn:null,initialize:function(){var n,r=this,i="."+r.classes.suggestion,o=r.classes.selected,a=r.options;r.element.setAttribute("autocomplete","off"),r.killerFn=function(t){0===e(t.target).closest("."+r.options.containerClass).length&&(r.killSuggestions(),r.disableKillerFn())},r.noSuggestionsContainer=e('<div class="autocomplete-no-suggestion"></div>').html(this.options.noSuggestionNotice).get(0),r.suggestionsContainer=t.utils.createNode(a.containerClass),n=e(r.suggestionsContainer),n.appendTo(a.appendTo),"auto"!==a.width&&n.width(a.width),n.on("mouseover.autocomplete",i,function(){r.activate(e(this).data("index"))}),n.on("mouseout.autocomplete",function(){r.selectedIndex=-1,n.children("."+o).removeClass(o)}),n.on("click.autocomplete",i,function(){r.select(e(this).data("index"))}),r.fixPositionCapture=function(){r.visible&&r.fixPosition()},e(window).on("resize.autocomplete",r.fixPositionCapture),r.el.on("keydown.autocomplete",function(e){r.onKeyPress(e)}),r.el.on("keyup.autocomplete",function(e){r.onKeyUp(e)}),r.el.on("blur.autocomplete",function(){r.onBlur()}),r.el.on("focus.autocomplete",function(){r.onFocus()}),r.el.on("change.autocomplete",function(e){r.onKeyUp(e)})},onFocus:function(){var e=this;e.fixPosition(),e.options.minChars<=e.el.val().length&&e.onValueChange()},onBlur:function(){this.enableKillerFn()},setOptions:function(t){var n=this,r=n.options;e.extend(r,t),n.isLocal=e.isArray(r.lookup),n.isLocal&&(r.lookup=n.verifySuggestionsFormat(r.lookup)),r.orientation=n.validateOrientation(r.orientation,"bottom"),e(n.suggestionsContainer).css({"max-height":r.maxHeight+"px",width:r.width+"px","z-index":r.zIndex})},clearCache:function(){this.cachedResponse={},this.badQueries=[]},clear:function(){this.clearCache(),this.currentValue="",this.suggestions=[]},disable:function(){var e=this;e.disabled=!0,clearInterval(e.onChangeInterval),e.currentRequest&&e.currentRequest.abort()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,n=e(t.suggestionsContainer),r=n.parent().get(0);if(r===document.body||t.options.forceFixPosition){var i=t.options.orientation,o=n.outerHeight(),a=t.el.outerHeight(),s=t.el.offset(),l={top:s.top,left:s.left};if("auto"==i){var c=e(window).height(),u=e(window).scrollTop(),d=-u+s.top-o,f=u+c-(s.top+a+o);i=Math.max(d,f)===d?"top":"bottom"}if(l.top+="top"===i?-o:a,r!==document.body){var p,h=n.css("opacity");t.visible||n.css("opacity",0).show(),p=n.offsetParent().offset(),l.top-=p.top,l.left-=p.left,t.visible||n.css("opacity",h).hide()}"auto"===t.options.width&&(l.width=t.el.outerWidth()-2+"px"),n.css(l)}},enableKillerFn:function(){var t=this;e(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;e(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var e=this;e.stopKillSuggestions(),e.intervalId=window.setInterval(function(){e.hide(),e.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var e,t=this,n=t.el.val().length,r=t.element.selectionStart;return"number"==typeof r?r===n:document.selection?(e=document.selection.createRange(),e.moveStart("character",-n),n===e.text.length):!0},onKeyPress:function(e){var t=this;if(!t.disabled&&!t.visible&&e.which===r.DOWN&&t.currentValue)return void t.suggest();if(!t.disabled&&t.visible){switch(e.which){case r.ESC:t.el.val(t.currentValue),t.hide();break;case r.RIGHT:if(t.hint&&t.options.onHint&&t.isCursorAtEnd()){t.selectHint();break}return;case r.TAB:if(t.hint&&t.options.onHint)return void t.selectHint();case r.RETURN:if(-1===t.selectedIndex)return void t.hide();if(t.select(t.selectedIndex),e.which===r.TAB&&t.options.tabDisabled===!1)return;break;case r.UP:t.moveUp();break;case r.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}},onKeyUp:function(e){var t=this;if(!t.disabled){switch(e.which){case r.UP:case r.DOWN:return}clearInterval(t.onChangeInterval),t.currentValue!==t.el.val()&&(t.findBestHint(),t.options.deferRequestBy>0?t.onChangeInterval=setInterval(function(){t.onValueChange()},t.options.deferRequestBy):t.onValueChange())}},onValueChange:function(){var t,n=this,r=n.options,i=n.el.val(),o=n.getQuery(i);return n.selection&&n.currentValue!==o&&(n.selection=null,(r.onInvalidateSelection||e.noop).call(n.element)),clearInterval(n.onChangeInterval),n.currentValue=i,n.selectedIndex=-1,r.triggerSelectOnValidInput&&(t=n.findSuggestionIndex(o),-1!==t)?void n.select(t):void(o.length<r.minChars?n.hide():n.getSuggestions(o))},findSuggestionIndex:function(t){var n=this,r=-1,i=t.toLowerCase();return e.each(n.suggestions,function(e,t){return t.value.toLowerCase()===i?(r=e,!1):void 0}),r},getQuery:function(t){var n,r=this.options.delimiter;return r?(n=t.split(r),e.trim(n[n.length-1])):t},getSuggestionsLocal:function(t){var n,r=this,i=r.options,o=t.toLowerCase(),a=i.lookupFilter,s=parseInt(i.lookupLimit,10);return n={suggestions:e.grep(i.lookup,function(e){return a(e,t,o)})},s&&n.suggestions.length>s&&(n.suggestions=n.suggestions.slice(0,s)),n},getSuggestions:function(t){var n,r,i,o,a=this,s=a.options,l=s.serviceUrl;if(s.params[s.paramName]=t,r=s.ignoreParams?null:s.params,s.onSearchStart.call(a.element,s.params)!==!1){if(e.isFunction(a.lookup))return void a.lookup(t,function(e){a.suggestions=e.suggestions,a.suggest(),s.onSearchComplete.call(a.element,t,e.suggestions)});a.isLocal?n=a.getSuggestionsLocal(t):(e.isFunction(l)&&(l=l.call(a.element,t)),i=l+"?"+e.param(r||{}),n=a.cachedResponse[i]),n&&e.isArray(n.suggestions)?(a.suggestions=n.suggestions,a.suggest(),s.onSearchComplete.call(a.element,t,n.suggestions)):a.isBadQuery(t)?s.onSearchComplete.call(a.element,t,[]):(a.currentRequest&&a.currentRequest.abort(),o={url:l,data:r,type:s.type,dataType:s.dataType},e.extend(o,s.ajaxSettings),a.currentRequest=e.ajax(o).done(function(e){var n;a.currentRequest=null,n=s.transformResult(e),a.processResponse(n,t,i),s.onSearchComplete.call(a.element,t,n.suggestions)}).fail(function(e,n,r){s.onSearchError.call(a.element,t,e,n,r)}))}},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,n=t.length;n--;)if(0===e.indexOf(t[n]))return!0;return!1},hide:function(){var t=this;t.visible=!1,t.selectedIndex=-1,clearInterval(t.onChangeInterval),e(t.suggestionsContainer).hide(),t.signalHint(null)},suggest:function(){if(0===this.suggestions.length)return void(this.options.showNoSuggestionNotice?this.noSuggestions():this.hide());var t,n,r=this,i=r.options,o=i.groupBy,a=i.formatResult,s=r.getQuery(r.currentValue),l=r.classes.suggestion,c=r.classes.selected,u=e(r.suggestionsContainer),d=e(r.noSuggestionsContainer),f=i.beforeRender,p="",h=function(e){var n=e.data[o];return t===n?"":(t=n,'<div class="autocomplete-group"><strong>'+t+"</strong></div>")};return i.triggerSelectOnValidInput&&(n=r.findSuggestionIndex(s),-1!==n)?void r.select(n):(e.each(r.suggestions,function(e,t){o&&(p+=h(t,s,e)),p+='<div class="'+l+'" data-index="'+e+'">'+a(t,s)+"</div>"}),this.adjustContainerWidth(),d.detach(),u.html(p),e.isFunction(f)&&f.call(r.element,u),r.fixPosition(),u.show(),i.autoSelectFirst&&(r.selectedIndex=0,u.scrollTop(0),u.children().first().addClass(c)),r.visible=!0,void r.findBestHint())},noSuggestions:function(){var t=this,n=e(t.suggestionsContainer),r=e(t.noSuggestionsContainer);this.adjustContainerWidth(),r.detach(),n.empty(),n.append(r),t.fixPosition(),n.show(),t.visible=!0},adjustContainerWidth:function(){var t,n=this,r=n.options,i=e(n.suggestionsContainer);"auto"===r.width&&(t=n.el.outerWidth()-2,i.width(t>0?t:300))},findBestHint:function(){var t=this,n=t.el.val().toLowerCase(),r=null;n&&(e.each(t.suggestions,function(e,t){var i=0===t.value.toLowerCase().indexOf(n);return i&&(r=t),!i}),t.signalHint(r))},signalHint:function(t){var n="",r=this;t&&(n=r.currentValue+t.value.substr(r.currentValue.length)),r.hintValue!==n&&(r.hintValue=n,r.hint=t,(this.options.onHint||e.noop)(n))},verifySuggestionsFormat:function(t){return t.length&&"string"==typeof t[0]?e.map(t,function(e){return{value:e,data:null}}):t},validateOrientation:function(t,n){return t=e.trim(t||"").toLowerCase(),-1===e.inArray(t,["auto","bottom","top"])&&(t=n),t},processResponse:function(e,t,n){var r=this,i=r.options;e.suggestions=r.verifySuggestionsFormat(e.suggestions),i.noCache||(r.cachedResponse[n]=e,i.preventBadQueries&&0===e.suggestions.length&&r.badQueries.push(t)),t===r.getQuery(r.currentValue)&&(r.suggestions=e.suggestions,r.suggest())},activate:function(t){var n,r=this,i=r.classes.selected,o=e(r.suggestionsContainer),a=o.find("."+r.classes.suggestion);return o.find("."+i).removeClass(i),r.selectedIndex=t,-1!==r.selectedIndex&&a.length>r.selectedIndex?(n=a.get(r.selectedIndex),e(n).addClass(i),n):null},selectHint:function(){var t=this,n=e.inArray(t.hint,t.suggestions);t.select(n)},select:function(e){var t=this;t.hide(),t.onSelect(e)},moveUp:function(){var t=this;if(-1!==t.selectedIndex)return 0===t.selectedIndex?(e(t.suggestionsContainer).children().first().removeClass(t.classes.selected),t.selectedIndex=-1,t.el.val(t.currentValue),void t.findBestHint()):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var e=this;e.selectedIndex!==e.suggestions.length-1&&e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(t){var n=this,r=n.activate(t);if(r){var i,o,a,s=e(r).outerHeight();i=r.offsetTop,o=e(n.suggestionsContainer).scrollTop(),a=o+n.options.maxHeight-s,o>i?e(n.suggestionsContainer).scrollTop(i):i>a&&e(n.suggestionsContainer).scrollTop(i-n.options.maxHeight+s),n.el.val(n.getValue(n.suggestions[t].value)),n.signalHint(null)}},onSelect:function(t){var n=this,r=n.options.onSelect,i=n.suggestions[t];n.currentValue=n.getValue(i.value),n.currentValue!==n.el.val()&&n.el.val(n.currentValue),n.signalHint(null),n.suggestions=[],n.selection=i,e.isFunction(r)&&r.call(n.element,i)},getValue:function(e){var t,n,r=this,i=r.options.delimiter;return i?(t=r.currentValue,n=t.split(i),1===n.length?e:t.substr(0,t.length-n[n.length-1].length)+e):e},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete"),t.disableKillerFn(),e(window).off("resize.autocomplete",t.fixPositionCapture),e(t.suggestionsContainer).remove()}},e.fn.autocomplete=e.fn.devbridgeAutocomplete=function(n,r){var i="autocomplete";return 0===arguments.length?this.first().data(i):this.each(function(){var o=e(this),a=o.data(i);"string"==typeof n?a&&"function"==typeof a[n]&&a[n](r):(a&&a.dispose&&a.dispose(),a=new t(this,n),o.data(i,a))})}}),function(e){function t(e,t){this.element=e,this.options=t,this.init()}var n=e(window),r=function(e,t,n,r){if(3===arguments.length||r){if(e>n)return e;if(n>t)return t}return n},i=function(e){e.clientX=e.originalEvent.touches[0].clientX,e.clientY=e.originalEvent.touches[0].clientY},o=function(e){var t=(e.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(t){var n={width:0,height:0},r=new Image;return r.onload=function(){if("cover"==e.css("background-size")){var t=e.innerWidth(),i=e.innerHeight(),o=t/i;imageAspectRatio=r.width/r.height,scale=1,scale=imageAspectRatio>=o?i/r.height:t/r.width,n.width=r.width*scale,n.height=r.height*scale}else n.width=r.width,n.height=r.height},r.src=t,n}};t.prototype.init=function(){var t=e(this.element),a=(t.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],s=this.options;if(a){var l={width:0,height:0};s.bound&&(l=o(t)),t.on("mousedown.dbg touchstart.dbg",function(e){if(e.target===t[0]){if(e.preventDefault(),e.originalEvent.touches)i(e);else if(1!==e.which)return;var o=e.clientX,a=e.clientY,c=t.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],u=parseInt(c[1])||0,d=parseInt(c[2])||0;n.on("mousemove.dbg touchmove.dbg",function(e){e.preventDefault(),e.originalEvent.touches&&i(e);
var n=e.clientX,c=e.clientY,f=a-c,p=d+f/l.height*100*s.multi;d=r(0,100,p,s.bound),o=n,a=c,t.css("background-position",u+"% "+d+"%")}),n.one("mouseup.dbg touchend.dbg mouseleave.dbg",function(){s.done&&s.done(),n.off("mousemove.dbg touchmove.dbg")})}})}},t.prototype.disable=function(){var t=e(this.element);t.off("mousedown.dbg touchstart.dbg"),n.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},e.fn.backgroundDraggable=function(n){var n=n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e(this);if("undefined"==typeof n||"object"==typeof n){n=e.extend({},e.fn.backgroundDraggable.defaults,n);var o=new t(this,n);i.data("dbg",o)}else if("string"==typeof n&&i.data("dbg")){var o=i.data("dbg");t.prototype[n].apply(o,r)}})},e.fn.backgroundDraggable.defaults={bound:!0,axis:void 0,multi:3}}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():window.Sortable=e()}(function(){"use strict";function e(e,n){this.el=e,this.options=n=n||{},n.group=n.group||Math.random(),n.handle=n.handle||null,n.draggable=n.draggable||e.children[0]&&e.children[0].nodeName||(/[uo]l/i.test(e.nodeName)?"li":"*"),n.ghostClass=n.ghostClass||"sortable-ghost",n.onAdd=t(this,n.onAdd||A),n.onUpdate=t(this,n.onUpdate||A),n.onRemove=t(this,n.onRemove||A),e[C]=n.group;for(var r in this)"_"===r.charAt(0)&&(this[r]=t(this,this[r]));i(e,"add",n.onAdd),i(e,"update",n.onUpdate),i(e,"remove",n.onRemove),i(e,"mousedown",this._onTapStart),i(e,"touchstart",this._onTapStart),L&&i(e,"selectstart",this._onTapStart),i(e,"dragover",this._onDragOver),i(e,"dragenter",this._onDragOver),M.push(this._onDragOver)}function t(e,t){var n=$.call(arguments,2);return t.bind?t.bind.apply(t,[e].concat(n)):function(){return t.apply(e,n.concat($.call(arguments)))}}function n(e,t,n){if("*"===t)return e;if(e){n=n||S,t=t.split(".");var r=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")\\s","g");do if(!(""!==r&&e.nodeName!=r||t.length&&((" "+e.className+" ").match(i)||[]).length!=t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function r(e){e.dataTransfer.dropEffect="move",e.preventDefault()}function i(e,t,n){e.addEventListener(t,n,!1)}function o(e,t,n){e.removeEventListener(t,n,!1)}function a(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=r+(n?" "+t:"")}}function s(e,t,n){if(e&&e.style){if(void 0===n)return S.defaultView&&S.defaultView.getComputedStyle?n=S.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];e.style[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;o>i;i++)n(r[i],i);return r}return[]}function c(e){return e.draggable=!1}function u(){E=!1}function d(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5}var f,p,h,m,g,v,y,b,x,w,C="Sortable"+(new Date).getTime(),T=window,S=T.document,k=T.parseInt,L=!!S.createElement("div").dragDrop,E=!1,N=function(e,t){var n=S.createEvent("Event");return n.initEvent(e,!0,!0),n.item=t,n},A=function(){},$=[].slice,M=[];return e.prototype={constructor:e,_applyEffects:function(){a(f,this.options.ghostClass,!0)},_onTapStart:function(e){var t=e.touches&&e.touches[0],o=(t||e).target,a=this.options,s=this.el;if(a.handle&&(o=n(o,a.handle,s)),o=n(o,a.draggable,s),o&&"selectstart"==e.type&&"A"!=o.tagName&&"IMG"!=o.tagName&&o.dragDrop(),o&&!f&&o.parentNode===s){x=e,o.draggable=!0,l(o,"a",c),l(o,"img",c),t&&(x={target:o,clientX:t.clientX,clientY:t.clientY},this._onDragStart(x,!0),e.preventDefault()),i(this.el,"dragstart",this._onDragStart),i(this.el,"dragend",this._onDrop),i(S,"dragover",r);try{S.selection?S.selection.empty():window.getSelection().removeAllRanges()}catch(u){}}},_emulateDragOver:function(){if(w){s(p,"display","none");var e=S.elementFromPoint(w.clientX,w.clientY),t=e,n=this.options.group,r=M.length;if(t)do{if(t[C]===n){for(;r--;)M[r]({clientX:w.clientX,clientY:w.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);s(p,"display","")}},_onTouchMove:function(e){if(x){var t=e.touches[0],n=t.clientX-x.clientX,r=t.clientY-x.clientY;w=t,s(p,"webkitTransform","translate3d("+n+"px,"+r+"px,0)")}},_onDragStart:function(e,t){var n=e.target,r=e.dataTransfer;if(h=this.el,f=n,m=n.nextSibling,b=this.options.group,t){var o,a=n.getBoundingClientRect(),l=s(n);p=n.cloneNode(!0),s(p,"top",a.top-k(l.marginTop,10)),s(p,"left",a.left-k(l.marginLeft,10)),s(p,"width",a.width),s(p,"height",a.height),s(p,"opacity","0.8"),s(p,"position","fixed"),s(p,"zIndex","100000"),h.appendChild(p),o=p.getBoundingClientRect(),s(p,"width",2*a.width-o.width),s(p,"height",2*a.height-o.height),i(S,"touchmove",this._onTouchMove),i(S,"touchend",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else r.effectAllowed="move",r.setData("Text",n.textContent),i(S,"drop",this._onDrop);setTimeout(this._applyEffects)},_onDragOver:function(e){if(!E&&b===this.options.group&&(void 0===e.rootEl||e.rootEl===this.el)){var t=this.el,r=n(e.target,this.options.draggable,t);if(0===t.children.length||t.children[0]===p||t===e.target&&d(t,e))t.appendChild(f);else if(r&&r!==f&&void 0!==r.parentNode[C]){g!==r&&(g=r,v=s(r),y=r.getBoundingClientRect());var i,o=y,a=o.right-o.left,l=o.bottom-o.top,c=/left|right|inline/.test(v.cssFloat+v.display),h=(c?(e.clientX-o.left)/a:(e.clientY-o.top)/l)>.5,m=r.offsetWidth>f.offsetWidth,x=r.offsetHeight>f.offsetHeight,w=r.nextSibling;E=!0,setTimeout(u,30),i=c?r.previousElementSibling===f&&!m||h>.5&&m:r.nextElementSibling!==f&&!x||h>.5&&x,i&&!w?t.appendChild(f):r.parentNode.insertBefore(f,i?w:r)}}},_onDrop:function(e){clearInterval(this._loopId),o(S,"drop",this._onDrop),o(S,"dragover",r),o(this.el,"dragend",this._onDrop),o(this.el,"dragstart",this._onDragStart),o(this.el,"selectstart",this._onTapStart),o(S,"touchmove",this._onTouchMove),o(S,"touchend",this._onDrop),e&&(e.preventDefault(),e.stopPropagation(),p&&p.parentNode.removeChild(p),f&&(a(f,this.options.ghostClass,!1),h.contains(f)?f.nextSibling!==m&&f.dispatchEvent(N("update",f)):(h.dispatchEvent(N("remove",f)),f.dispatchEvent(N("add",f)))),h=f=p=m=x=w=g=v=b=null)},destroy:function(){var e=this.el,t=this.options;o(e,"add",t.onAdd),o(e,"update",t.onUpdate),o(e,"remove",t.onRemove),o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),o(e,"selectstart",this._onTapStart),o(e,"dragover",this._onDragOver),o(e,"dragenter",this._onDragOver),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),M.splice(M.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},e.utils={on:i,off:o,css:s,find:l,bind:t,closest:n,toggleClass:a},e.version="0.1.9",e}),"object"==typeof module&&(module.exports=MediumEditor),function(e,t){"use strict";function n(e,t){var n;if(void 0===e)return t;for(n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)===!1&&(e[n]=t[n]);return e}function r(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}function i(){var t,n,r,i=e.getSelection();if(i.getRangeAt&&i.rangeCount){for(r=[],t=0,n=i.rangeCount;n>t;t+=1)r.push(i.getRangeAt(t));return r}return null}function o(t){var n,r,i=e.getSelection();if(t)for(i.removeAllRanges(),n=0,r=t.length;r>n;n+=1)i.addRange(t[n])}function a(){var e=t.getSelection().anchorNode,n=e&&3===e.nodeType?e.parentNode:e;return n}function s(){var n,r,i,o,a="";if(void 0!==e.getSelection){if(r=e.getSelection(),r.rangeCount){for(o=t.createElement("div"),n=0,i=r.rangeCount;i>n;n+=1)o.appendChild(r.getRangeAt(n).cloneContents());a=o.innerHTML}}else void 0!==t.selection&&"Text"===t.selection.type&&(a=t.selection.createRange().htmlText);return a}function l(e){return!(!e||1!==e.nodeType)}MediumEditor.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,cleanPastedHTML:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,elementsContainer:!1,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,anchorTarget:!1,anchorButton:!1,anchorButtonClass:"btn",extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last"},isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),init:function(e,r){return this.setElementSelection(e),0!==this.elements.length?(this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.id=t.querySelectorAll(".medium-editor-toolbar").length+1,this.options=n(r,this.defaults),this.setup()):void 0},setup:function(){this.isActive=!0,this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().passInstance()},initElements:function(){this.updateElementList();var e,n=!1;for(e=0;e<this.elements.length;e+=1)this.options.disableEditing||this.elements[e].getAttribute("data-disable-editing")||this.elements[e].setAttribute("contentEditable",!0),this.elements[e].getAttribute("data-placeholder")||this.elements[e].setAttribute("data-placeholder",this.options.placeholder),this.elements[e].setAttribute("data-medium-element",!0),this.bindParagraphCreation(e).bindReturn(e).bindTab(e),this.options.disableToolbar||this.elements[e].getAttribute("data-disable-toolbar")||(n=!0);return n&&(this.options.elementsContainer||(this.options.elementsContainer=t.body),this.initToolbar().bindButtons().bindAnchorForm().bindAnchorPreview()),this},setElementSelection:function(e){this.elementSelection=e,this.updateElementList()},updateElementList:function(){this.elements="string"==typeof this.elementSelection?t.querySelectorAll(this.elementSelection):this.elementSelection,1===this.elements.nodeType&&(this.elements=[this.elements])},serialize:function(){var e,t,n={};for(e=0;e<this.elements.length;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},callExtensions:function(e){if(!(arguments.length<1)){var t,n,r=Array.prototype.slice.call(arguments,1);for(n in this.options.extensions)this.options.extensions.hasOwnProperty(n)&&(t=this.options.extensions[n],void 0!==t[e]&&t[e].apply(t,r))}},passInstance:function(){var e,t,n=this;for(t in n.options.extensions)n.options.extensions.hasOwnProperty(t)&&(e=n.options.extensions[t],e.parent&&(e.base=n));return n},bindParagraphCreation:function(e){var n=this;return this.elements[e].addEventListener("keypress",function(e){var n,r=a();32===e.which&&(n=r.tagName.toLowerCase(),"a"===n&&t.execCommand("unlink",!1,null))}),this.elements[e].addEventListener("keyup",function(e){var r,i,o=a();o&&o.getAttribute("data-medium-element")&&0===o.children.length&&!n.options.disableReturn&&!o.getAttribute("data-disable-return")&&t.execCommand("formatBlock",!1,"p"),13===e.which&&(o=a(),r=o.tagName.toLowerCase(),i=n.getSelectionElement(),n.options.disableReturn||i.getAttribute("data-disable-return")||"li"===r||n.isListItemChild(o)||(e.shiftKey||t.execCommand("formatBlock",!1,"p"),"a"===r&&t.execCommand("unlink",!1,null)))}),this},isListItemChild:function(e){for(var t=e.parentNode,n=t.tagName.toLowerCase();-1===this.parentElements.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t||!t.tagName)return!1;n=t.tagName.toLowerCase()}return!1},bindReturn:function(e){var t=this;return this.elements[e].addEventListener("keypress",function(e){if(13===e.which)if(t.options.disableReturn||this.getAttribute("data-disable-return"))e.preventDefault();else if(t.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var n=a();n&&"\n"===n.innerText&&e.preventDefault()}}),this},bindTab:function(e){return this.elements[e].addEventListener("keydown",function(e){if(9===e.which){var n=a().tagName.toLowerCase();"pre"===n&&(e.preventDefault(),t.execCommand("insertHtml",null,"    ")),"li"===n&&(e.preventDefault(),e.shiftKey?t.execCommand("outdent",e):t.execCommand("indent",e))}}),this},buttonTemplate:function(e){var t=this.getButtonLabels(this.options.buttonLabels),n={bold:'<button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+t.bold+"</button>",italic:'<button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+t.italic+"</button>",underline:'<button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+t.underline+"</button>",strikethrough:'<button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike"><strike>A</strike></button>',superscript:'<button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+t.superscript+"</button>",subscript:'<button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+t.subscript+"</button>",anchor:'<button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+t.anchor+"</button>",image:'<button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img">'+t.image+"</button>",header1:'<button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+t.header1+"</button>",header2:'<button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+t.header2+"</button>",quote:'<button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+t.quote+"</button>",orderedlist:'<button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+t.orderedlist+"</button>",unorderedlist:'<button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+t.unorderedlist+"</button>",pre:'<button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+t.pre+"</button>",indent:'<button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul">'+t.indent+"</button>",outdent:'<button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul">'+t.outdent+"</button>",justifyCenter:'<button class="medium-editor-action medium-editor-action-justifyCenter" data-action="justifyCenter" data-element="">'+t.justifyCenter+"</button>",justifyFull:'<button class="medium-editor-action medium-editor-action-justifyFull" data-action="justifyFull" data-element="">'+t.justifyFull+"</button>",justifyLeft:'<button class="medium-editor-action medium-editor-action-justifyLeft" data-action="justifyLeft" data-element="">'+t.justifyLeft+"</button>",justifyRight:'<button class="medium-editor-action medium-editor-action-justifyRight" data-action="justifyRight" data-element="">'+t.justifyRight+"</button>"};return n[e]||!1},getButtonLabels:function(e){var t,n,r={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sub></b>",anchor:"<b>#</b>",image:"<b>image</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>",justifyCenter:"<b>C</b>",justifyFull:"<b>J</b>",justifyLeft:"<b>L</b>",justifyRight:"<b>R</b>"};if("fontawesome"===e?t={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',image:'<i class="fa fa-picture-o"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>',indent:'<i class="fa fa-indent"></i>',outdent:'<i class="fa fa-outdent"></i>',justifyCenter:'<i class="fa fa-align-center"></i>',justifyFull:'<i class="fa fa-align-justify"></i>',justifyLeft:'<i class="fa fa-align-left"></i>',justifyRight:'<i class="fa fa-align-right"></i>'}:"object"==typeof e&&(t=e),"object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-input"),this.anchorTarget=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-target"),this.anchorButton=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-button"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this.anchorPreview=this.createAnchorPreview(),this)},createToolbar:function(){var e=t.createElement("div");return e.id="medium-editor-toolbar-"+this.id,e.className="medium-editor-toolbar",e.appendChild(this.toolbarButtons()),e.appendChild(this.toolbarFormAnchor()),this.options.elementsContainer.appendChild(e),e},toolbarButtons:function(){var e,n,r,i,o=this.options.buttons,a=t.createElement("ul");for(a.id="medium-editor-toolbar-actions",a.className="medium-editor-toolbar-actions clearfix",n=0;n<o.length;n+=1)this.options.extensions.hasOwnProperty(o[n])?(i=this.options.extensions[o[n]],r=void 0!==i.getButton?i.getButton():null):r=this.buttonTemplate(o[n]),r&&(e=t.createElement("li"),l(r)?e.appendChild(r):e.innerHTML=r,a.appendChild(e));return a},toolbarFormAnchor:function(){var e=t.createElement("div"),n=t.createElement("input"),r=t.createElement("label"),i=(t.createElement("input"),t.createElement("label")),o=t.createElement("input"),a=t.createElement("a"),s=t.createElement("a");return a.setAttribute("href","#"),a.className="medium-editor-toobar-anchor-close",a.innerHTML="&times;",s.setAttribute("href","#"),s.className="medium-editor-toobar-anchor-save",s.innerHTML="&#10003;",n.setAttribute("type","text"),n.className="medium-editor-toolbar-anchor-input",n.setAttribute("placeholder",this.options.anchorInputPlaceholder),o.setAttribute("type","checkbox"),o.className="medium-editor-toolbar-anchor-button",i.innerHTML="Button",i.insertBefore(o,i.firstChild),e.className="medium-editor-toolbar-form-anchor",e.id="medium-editor-toolbar-form-anchor",e.appendChild(n),e.appendChild(s),e.appendChild(a),this.options.anchorTarget&&e.appendChild(r),this.options.anchorButton&&e.appendChild(i),e},bindSelect:function(){var e,n=this,r="";for(this.checkSelectionWrapper=function(e){return e&&n.clickingIntoArchorForm(e)?!1:(clearTimeout(r),void(r=setTimeout(function(){n.checkSelection()},n.options.delay)))},t.documentElement.addEventListener("mouseup",this.checkSelectionWrapper),e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("keyup",this.checkSelectionWrapper),this.elements[e].addEventListener("blur",this.checkSelectionWrapper);return this},checkSelection:function(){var t,n;return this.keepToolbarAlive===!0||this.options.disableToolbar||(t=e.getSelection(),""===t.toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.hasMultiParagraphs()||this.selectionInContentEditableFalse()?this.hideToolbarActions():(n=this.getSelectionElement(),!n||n.getAttribute("data-disable-toolbar")?this.hideToolbarActions():this.checkSelectionElement(t,n))),this},clickingIntoArchorForm:function(e){var t=this;return e.type&&"blur"===e.type.toLowerCase()&&e.relatedTarget&&e.relatedTarget===t.anchorInput?!0:!1},hasMultiParagraphs:function(){var e=s().replace(/<[\S]+><\/[\S]+>/gim,""),t=e.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return t?t.length:0},checkSelectionElement:function(e,t){var n;for(this.selection=e,this.selectionRange=this.selection.getRangeAt(0),n=0;n<this.elements.length;n+=1)if(this.elements[n]===t)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()},findMatchingSelectionParent:function(t){var n,r,i=e.getSelection();if(0===i.rangeCount)return!1;n=i.getRangeAt(0),r=n.commonAncestorContainer;do{if(1===r.nodeType){if(t(r))return r;if(r.getAttribute("data-medium-element"))return!1}r=r.parentNode}while(r);return!1},getSelectionElement:function(){return this.findMatchingSelectionParent(function(e){return e.getAttribute("data-medium-element")})},selectionInContentEditableFalse:function(){return this.findMatchingSelectionParent(function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")})},setToolbarPosition:function(){var t=50,n=e.getSelection(),r=n.getRangeAt(0),i=r.getBoundingClientRect(),o=this.options.diffLeft-this.toolbar.offsetWidth/2,a=(i.left+i.right)/2,s=this.toolbar.offsetWidth/2;return i.top<t?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=t+i.bottom-this.options.diffTop+e.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=i.top+this.options.diffTop+e.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=s>a?o+s+"px":e.innerWidth-a<s?e.innerWidth+o-s+"px":o+a+"px",this.hideAnchorPreview(),this},setToolbarButtonStates:function(){var e,t=this.toolbarActions.querySelectorAll("button");for(e=0;e<t.length;e+=1)t[e].classList.remove(this.options.activeButtonClass);return this.checkActiveButtons(),this},checkActiveButtons:function(){for(var e=Array.prototype.slice.call(this.elements),t=this.getSelectedParentElement();void 0!==t.tagName&&-1===this.parentElements.indexOf(t.tagName.toLowerCase)&&(this.activateButton(t.tagName.toLowerCase()),this.callExtensions("checkState",t),-1===e.indexOf(t));)t=t.parentNode},activateButton:function(e){var t=this.toolbar.querySelector('[data-element="'+e+'"]');null!==t&&-1===t.className.indexOf(this.options.activeButtonClass)&&(t.className+=" "+this.options.activeButtonClass)},bindButtons:function(){var e,t=this.toolbar.querySelectorAll("button"),n=this,r=function(e){e.preventDefault(),e.stopPropagation(),void 0===n.selection&&n.checkSelection(),this.className.indexOf(n.options.activeButtonClass)>-1?this.classList.remove(n.options.activeButtonClass):this.className+=" "+n.options.activeButtonClass,this.hasAttribute("data-action")&&n.execAction(this.getAttribute("data-action"),e)};for(e=0;e<t.length;e+=1)t[e].addEventListener("click",r);return this.setFirstAndLastItems(t),this},setFirstAndLastItems:function(e){return e.length>0&&(e[0].className+=" "+this.options.firstButtonClass,e[e.length-1].className+=" "+this.options.lastButtonClass),this},execAction:function(n,r){n.indexOf("append-")>-1?(this.execFormatBlock(n.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===n?this.triggerAnchorAction(r):"image"===n?t.execCommand("insertImage",!1,e.getSelection()):(t.execCommand(n,!1,null),this.setToolbarPosition())},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(){var e=null,t=this.selectionRange;return e=this.rangeSelectsSingleNode(t)?t.startContainer.childNodes[t.startOffset]:3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer},triggerAnchorAction:function(){var e=this.getSelectedParentElement();return e.tagName&&"a"===e.tagName.toLowerCase()?t.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(e){var n=this.getSelectionData(this.selection.anchorNode);if("blockquote"===e&&n.el&&"blockquote"===n.el.parentNode.tagName.toLowerCase())return t.execCommand("outdent",!1,null);if(n.tagName===e&&(e="p"),this.isIE){if("blockquote"===e)return t.execCommand("indent",!1,e);e="<"+e+">"}return t.execCommand("formatBlock",!1,e)},getSelectionData:function(e){var t;for(e&&e.tagName&&(t=e.tagName.toLowerCase());e&&-1===this.parentElements.indexOf(t);)e=e.parentNode,e&&e.tagName&&(t=e.tagName.toLowerCase());return{el:e,tagName:t}},getFirstChild:function(e){for(var t=e.firstChild;null!==t&&1!==t.nodeType;)t=t.nextSibling;return t},hideToolbarActions:function(){this.keepToolbarAlive=!1,void 0!==this.toolbar&&this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var e,t=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(e),e=setTimeout(function(){t.toolbar&&!t.toolbar.classList.contains("medium-editor-toolbar-active")&&t.toolbar.classList.add("medium-editor-toolbar-active")},100)},saveSelection:function(){this.savedSelection=i()},restoreSelection:function(){o(this.savedSelection)},showAnchorForm:function(e){this.toolbarActions.style.display="none",this.saveSelection(),this.anchorForm.style.display="block",this.setToolbarPosition(),this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=e||""},bindAnchorForm:function(){var e=this.anchorForm.querySelector("a.medium-editor-toobar-anchor-close"),n=this.anchorForm.querySelector("a.medium-editor-toobar-anchor-save"),i=this;return this.anchorForm.addEventListener("click",function(e){e.stopPropagation(),i.keepToolbarAlive=!0}),this.anchorInput.addEventListener("keyup",function(e){var t,n=null;13===e.keyCode&&(e.preventDefault(),t="_blank",i.options.anchorButton&&i.anchorButton.checked&&(n=i.options.anchorButtonClass),i.createLink(this,t,n))}),n.addEventListener("click",function(e){var t,n=null;e.preventDefault(),t="_blank",i.options.anchorButton&&i.anchorButton.checked&&(n=i.options.anchorButtonClass),i.createLink(i.anchorInput,t,n)},!0),this.anchorInput.addEventListener("click",function(e){e.stopPropagation(),i.keepToolbarAlive=!0}),t.body.addEventListener("click",function(e){e.target===i.anchorForm||r(i.anchorForm,e.target)||r(i.toolbarActions,e.target)||(i.keepToolbarAlive=!1,i.checkSelection())},!0),t.body.addEventListener("focus",function(e){e.target===i.anchorForm||r(i.anchorForm,e.target)||r(i.toolbarActions,e.target)||(i.keepToolbarAlive=!1,i.checkSelection())},!0),e.addEventListener("click",function(e){e.preventDefault(),i.showToolbarActions(),o(i.savedSelection)}),this},hideAnchorPreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")},showAnchorPreview:function(t){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||t.getAttribute("data-disable-preview"))return!0;var n,r,i,o=this,a=40,s=t.getBoundingClientRect(),l=(s.left+s.right)/2;return o.anchorPreview.querySelector("i").textContent=t.href,n=o.anchorPreview.offsetWidth/2,r=o.options.diffLeft-n,clearTimeout(i),i=setTimeout(function(){o.anchorPreview&&!o.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&o.anchorPreview.classList.add("medium-editor-anchor-preview-active")},100),o.observeAnchorPreview(t),o.anchorPreview.classList.add("medium-toolbar-arrow-over"),o.anchorPreview.classList.remove("medium-toolbar-arrow-under"),o.anchorPreview.style.top=Math.round(a+s.bottom-o.options.diffTop+e.pageYOffset-o.anchorPreview.offsetHeight)+"px",o.anchorPreview.style.left=n>l?r+n+"px":e.innerWidth-l<n?e.innerWidth+r-n+"px":r+l+"px",this},observeAnchorPreview:function(e){var t=this,n=(new Date).getTime(),r=!0,i=function(){n=(new Date).getTime(),r=!0},o=function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(r=!1)},a=setInterval(function(){if(r)return!0;var s=(new Date).getTime()-n;s>t.options.anchorPreviewHideDelay&&(t.hideAnchorPreview(),clearInterval(a),t.anchorPreview.removeEventListener("mouseover",i),t.anchorPreview.removeEventListener("mouseout",o),e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",o))},200);t.anchorPreview.addEventListener("mouseover",i),t.anchorPreview.addEventListener("mouseout",o),e.addEventListener("mouseover",i),e.addEventListener("mouseout",o)},createAnchorPreview:function(){var e=this,n=t.createElement("div");return n.id="medium-editor-anchor-preview-"+this.id,n.className="medium-editor-anchor-preview",n.innerHTML=this.anchorPreviewTemplate(),this.options.elementsContainer.appendChild(n),n.addEventListener("click",function(){e.anchorPreviewClickHandler()}),n},anchorPreviewTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner"></i></div>'},anchorPreviewClickHandler:function(){if(this.activeAnchor){var n=this,r=t.createRange(),i=e.getSelection();r.selectNodeContents(n.activeAnchor),i.removeAllRanges(),i.addRange(r),setTimeout(function(){n.activeAnchor&&n.showAnchorForm(n.activeAnchor.href),n.keepToolbarAlive=!1},100+n.options.delay)}this.hideAnchorPreview()},editorAnchorObserver:function(e){var t=this,n=!0,r=function(){n=!1,t.activeAnchor.removeEventListener("mouseout",r)};if(e.target&&"a"===e.target.tagName.toLowerCase()){if(!/href=["']\S+["']/.test(e.target.outerHTML)||/href=["']#\S+["']/.test(e.target.outerHTML))return!0;if(this.toolbar.classList.contains("medium-editor-toolbar-active"))return!0;this.activeAnchor=e.target,this.activeAnchor.addEventListener("mouseout",r),setTimeout(function(){n&&t.showAnchorPreview(e.target)},t.options.delay)}},bindAnchorPreview:function(){var e,t=this;for(this.editorAnchorObserverWrapper=function(e){t.editorAnchorObserver(e)},e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("mouseover",this.editorAnchorObserverWrapper);return this},checkLinkFormat:function(e){var t=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(t.test(e)?"":"http://")+e},setTargetBlank:function(e){var t;if(e=e||a(),"a"===e.tagName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),t=0;t<e.length;t+=1)e[t].target="_blank"},setButtonClass:function(e){var t,n,r=a(),i=e.split(" ");if("a"===r.tagName.toLowerCase())for(n=0;n<i.length;n+=1)r.classList.add(i[n]);else for(r=r.getElementsByTagName("a"),t=0;t<r.length;t+=1)for(n=0;n<i.length;n+=1)r[t].classList.add(i[n])},createLink:function(n,r,i){var a,s;if(0===n.value.trim().length)return void this.hideToolbarActions();if(o(this.savedSelection),this.options.checkLinkFormat&&(n.value=this.checkLinkFormat(n.value)),t.execCommand("createLink",!1,n.value),(this.options.targetBlank||"_blank"===r)&&this.setTargetBlank(),i&&this.setButtonClass(i),this.options.targetBlank||"_blank"===r||i)for(s=t.createEvent("HTMLEvents"),s.initEvent("input",!0,!0,e),a=0;a<this.elements.length;a+=1)this.elements[a].dispatchEvent(s);this.checkSelection(),this.showToolbarActions(),n.value=""},bindWindowActions:function(){var t,n=this;return this.windowResizeHandler=function(){clearTimeout(t),t=setTimeout(function(){n.toolbar&&n.toolbar.classList.contains("medium-editor-toolbar-active")&&n.setToolbarPosition()},100)},e.addEventListener("resize",this.windowResizeHandler),this},activate:function(){this.isActive||this.setup()},deactivate:function(){var n;if(this.isActive)for(this.isActive=!1,void 0!==this.toolbar&&(this.options.elementsContainer.removeChild(this.anchorPreview),this.options.elementsContainer.removeChild(this.toolbar),delete this.toolbar,delete this.anchorPreview),t.documentElement.removeEventListener("mouseup",this.checkSelectionWrapper),e.removeEventListener("resize",this.windowResizeHandler),n=0;n<this.elements.length;n+=1)this.elements[n].removeEventListener("mouseover",this.editorAnchorObserverWrapper),this.elements[n].removeEventListener("keyup",this.checkSelectionWrapper),this.elements[n].removeEventListener("blur",this.checkSelectionWrapper),this.elements[n].removeEventListener("paste",this.pasteWrapper),this.elements[n].removeAttribute("contentEditable"),this.elements[n].removeAttribute("data-medium-element")},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindPaste:function(){var e,n=this;for(this.pasteWrapper=function(e){var r,i,o="";if(this.classList.remove("medium-editor-placeholder"),!n.options.forcePlainText&&!n.options.cleanPastedHTML)return this;
if(e.clipboardData&&e.clipboardData.getData&&!e.defaultPrevented){if(e.preventDefault(),n.options.cleanPastedHTML&&e.clipboardData.getData("text/html"))return n.cleanPaste(e.clipboardData.getData("text/html"));if(n.options.disableReturn||this.getAttribute("data-disable-return"))o=n.htmlEntities(e.clipboardData.getData("text/plain")),t.execCommand("insertHTML",!1,o);else{for(r=e.clipboardData.getData("text/plain").split(/[\r\n]/g),i=0;i<r.length;i+=1)""!==r[i]&&(o+=navigator.userAgent.match(/firefox/i)&&0===i?n.htmlEntities(r[i]):"<p>"+n.htmlEntities(r[i])+"</p>");t.execCommand("insertHTML",!1,o)}}},e=0;e<this.elements.length;e+=1)this.elements[e].addEventListener("paste",this.pasteWrapper);return this},setPlaceholders:function(){var e,t=function(e){e.querySelector("img")||e.querySelector("blockquote")||""!==e.textContent.replace(/^\s+|\s+$/g,"")||e.classList.add("medium-editor-placeholder")},n=function(e){this.classList.remove("medium-editor-placeholder"),"keypress"!==e.type&&t(this)};for(e=0;e<this.elements.length;e+=1)t(this.elements[e]),this.elements[e].addEventListener("blur",n),this.elements[e].addEventListener("keypress",n);return this},cleanPaste:function(e){var n,r,i,o=this.getSelectionElement(),a=/<p|<br|<div/.test(e),s=[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;|\u201c|\u201d)([^&]+)(&quot;|&rdquo;|&ldquo;|\u201c|\u201d)&gt;/gi),'<a href="$2">']];for(n=0;n<s.length;n+=1)e=e.replace(s[n][0],s[n][1]);if(a)for(r=e.split("<br><br>"),this.pasteHTML("<p>"+r.join("</p><p>")+"</p>"),t.execCommand("insertText",!1,"\n"),r=o.querySelectorAll("a,p,div,br"),n=0;n<r.length;n+=1)switch(i=r[n],i.tagName.toLowerCase()){case"a":this.options.targetBlank&&this.setTargetBlank(i);break;case"p":case"div":this.filterCommonBlocks(i);break;case"br":this.filterLineBreak(i)}else this.pasteHTML(e)},pasteHTML:function(e){var n,r,i,o,a=t.createDocumentFragment();for(a.appendChild(t.createElement("body")),o=a.querySelector("body"),o.innerHTML=e,this.cleanupSpans(o),n=o.querySelectorAll("*"),i=0;i<n.length;i+=1)r=n[i],r.removeAttribute("class"),r.removeAttribute("style"),r.removeAttribute("dir"),"meta"===r.tagName.toLowerCase()&&r.parentNode.removeChild(r);t.execCommand("insertHTML",!1,o.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.innerText)&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?e.parentNode.removeChild(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?1===e.parentNode.childElementCount&&this.removeWithParent(e):e.parentNode.removeChild(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e.parentNode))},cleanupSpans:function(e){var n,r,i,o=e.querySelectorAll(".replace-with");for(n=0;n<o.length;n+=1)r=o[n],i=t.createElement(r.classList.contains("bold")?"b":"i"),i.innerHTML=r.classList.contains("bold")&&r.classList.contains("italic")?"<i>"+r.innerHTML+"</i>":r.innerHTML,r.parentNode.replaceChild(i,r);for(o=e.querySelectorAll("span"),n=0;n<o.length;n+=1)r=o[n],/^\s*$/.test()?r.parentNode.removeChild(r):r.parentNode.replaceChild(t.createTextNode(r.innerText),r)}}}(window,document),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(n,r){if(!(this instanceof e))return new e(n,r);this.options=r=r||{},vo(Oa,r,!1),h(r);var i=r.value;"string"==typeof i&&(i=new is(i,r.mode)),this.doc=i;var o=this.display=new t(n,i);o.wrapper.CodeMirror=this,u(this),l(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!da&&Ln(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new co},ea&&11>ta&&setTimeout(yo(kn,this,!0),20),An(this),Do();var a=this;cn(this,function(){a.curOp.forceUpdate=!0,$i(a,i),r.autofocus&&!da||Lo()==o.input?setTimeout(yo(Jn,a),20):Zn(a);for(var e in _a)_a.hasOwnProperty(e)&&_a[e](a,r[e],Ha);x(a);for(var t=0;t<Ra.length;++t)Ra[t](a)})}function t(e,t){var n=this,r=n.input=Co("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");na?r.style.width="1000px":r.setAttribute("wrap","off"),ua&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=Co("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=Co("div",[Co("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=Co("div",[Co("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=Co("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=Co("div",null,"CodeMirror-gutter-filler"),n.lineDiv=Co("div",null,"CodeMirror-code"),n.selectionDiv=Co("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Co("div",null,"CodeMirror-cursors"),n.measure=Co("div",null,"CodeMirror-measure"),n.lineMeasure=Co("div",null,"CodeMirror-measure"),n.lineSpace=Co("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Co("div",[Co("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Co("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=Co("div",null,null,"position: absolute; height: "+hs+"px; width: 1px;"),n.gutters=Co("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Co("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Co("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),ea&&8>ta&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),ua&&(r.style.width="0px"),na||(n.scroller.draggable=!0),sa&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),ea&&8>ta&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new co,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),r(t)}function r(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ct(e,100),e.state.modeGen++,e.curOp&&mn(e)}function i(e){e.options.lineWrapping?(Ao(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(No(e.display.wrapper,"CodeMirror-wrap"),p(e)),a(e),mn(e),Rt(e),setTimeout(function(){v(e)},100)}function o(e){var t=Qt(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Jt(e.display)-3);return function(i){if(ri(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function a(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&Oi(e,t)})}function s(e){var t=Ua[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function l(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Rt(e)}function c(e){u(e),mn(e),setTimeout(function(){b(e)},20)}function u(e){var t=e.display.gutters,n=e.options.gutters;To(t);for(var r=0;r<n.length;++r){var i=n[r],o=t.appendChild(Co("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",d(e)}function d(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function f(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Yr(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Qr(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function p(e){var t=e.display,n=e.doc;t.maxLine=Mi(n,n.first),t.maxLineLength=f(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=f(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function h(e){var t=ho(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function m(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<hs-3}function g(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:m(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Et(e.display))}}function v(e,t){t||(t=g(e));var n=e.display,r=Oo(n.measure),i=t.docHeight+hs,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&r>0&&!t.hScrollbarTakesSpace&&(o=!1);var a=i>t.clientHeight;if(a?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=o?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),o?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=a?r+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),o&&a?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===r){var s=fa&&!la?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=s;var l=function(t){to(t)!=n.scrollbarV&&to(t)!=n.scrollbarH&&un(e,jn)(t)};us(n.scrollbarV,"mousedown",l),us(n.scrollbarH,"mousedown",l)}e.state.checkedOverlayScrollbar=!0}}function y(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Lt(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Hi(t,r),a=Hi(t,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;if(o>s)return{from:s,to:Hi(t,Ii(Mi(t,s))+e.wrapper.clientHeight)};if(Math.min(l,t.lastLine())>=a)return{from:Hi(t,Ii(Mi(t,l))-e.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(a,o+1)}}function b(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=C(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function x(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=w(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(Co("div",[Co("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",d(e),!0}return!1}function w(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function C(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function T(e,t,n){var r=e.display;this.viewport=t,this.visible=y(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.oldViewFrom=r.viewFrom,this.oldViewTo=r.viewTo,this.oldScrollerWidth=r.scroller.clientWidth,this.force=n,this.dims=M(e)}function S(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return vn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&0==wn(e))return!1;x(e)&&(vn(e),t.dims=M(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),ya&&(o=ti(e.doc,o),a=ni(e.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastSizeC!=t.wrapperHeight;xn(e,o,a),n.viewOffset=Ii(Mi(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=wn(e);if(!s&&0==l&&!t.force&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Lo();return l>4&&(n.lineDiv.style.display="none"),D(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),c&&Lo()!=c&&c.offsetHeight&&c.focus(),To(n.cursorDiv),To(n.selectionDiv),s&&(n.lastSizeC=t.wrapperHeight,Ct(e,400)),n.updateLineNumbers=null,!0}function k(e,t){for(var n=t.force,r=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)n=!0;else if(n=!1,r&&null!=r.top&&(r={top:Math.min(e.doc.height+Et(e.display)-hs-e.display.scroller.clientHeight,r.top)}),t.visible=y(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!S(e,t))break;A(e);var o=g(e);yt(e),E(e,o),v(e,o)}ro(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&ro(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function L(e,t){var n=new T(e,t);if(S(e,n)){A(e),k(e,n);var r=g(e);yt(e),E(e,r),v(e,r)}}function E(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-hs)+"px"}function N(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function A(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i,o=t.view[r];if(!o.hidden){if(ea&&8>ta){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var l=o.line.height-i;if(2>i&&(i=Qt(t)),(l>.001||-.001>l)&&(Oi(o.line,i),$(o.line),o.rest))for(var c=0;c<o.rest.length;c++)$(o.rest[c])}}}function $(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function M(e){for(var t=e.display,n={},r={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[e.options.gutters[o]]=i.offsetLeft,r[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:C(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function D(e,t,n){function r(t){var n=t.nextSibling;return na&&fa&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild,l=i.view,c=i.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node){for(;s!=d.node;)s=r(s);var f=o&&null!=t&&c>=t&&d.lineNumber;d.changes&&(ho(d.changes,"gutter")>-1&&(f=!1),j(e,d,c,n)),f&&(To(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(w(e.options,c)))),s=d.node.nextSibling}else{var p=B(e,d,c,n);a.insertBefore(p,s)}c+=d.size}for(;s;)s=r(s)}function j(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?I(e,t):"gutter"==o?F(e,t,n,r):"class"==o?P(t):"widget"==o&&R(t,r)}t.changes=null}function O(e){return e.node==e.text&&(e.node=Co("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ea&&8>ta&&(e.node.style.zIndex=2)),e.node}function _(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=O(e);e.background=n.insertBefore(Co("div",null,t),n.firstChild)}}function H(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):yi(e,t)}function I(e,t){var n=t.text.className,r=H(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,P(t)):n&&(t.text.className=n)}function P(e){_(e),e.line.wrapClass?O(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function F(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=O(t),a=t.gutter=o.insertBefore(Co("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(Co("div",w(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],c=i.hasOwnProperty(l)&&i[l];c&&a.appendChild(Co("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function R(e,t){e.alignable&&(e.alignable=null);for(var n,r=e.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&e.node.removeChild(r)}W(e,t)}function B(e,t,n,r){var i=H(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),P(t),F(e,t,n,r),W(t,r),t.node}function W(e,t){if(z(e.line,e,t,!0),e.rest)for(var n=0;n<e.rest.length;n++)z(e.rest[n],e,t,!1)}function z(e,t,n,r){if(e.widgets)for(var i=O(t),o=0,a=e.widgets;o<a.length;++o){var s=a[o],l=Co("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(l.ignoreEvents=!0),q(s,l,t,n),r&&s.above?i.insertBefore(l,t.gutter||t.text):i.appendChild(l),ro(s,"redraw")}}function q(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function U(e){return ba(e.line,e.ch)}function V(e,t){return xa(e,t)<0?t:e}function X(e,t){return xa(e,t)<0?e:t}function G(e,t){this.ranges=e,this.primIndex=t}function K(e,t){this.anchor=e,this.head=t}function Y(e,t){var n=e[t];e.sort(function(e,t){return xa(e.from(),t.from())}),t=ho(e,n);for(var r=1;r<e.length;r++){var i=e[r],o=e[r-1];if(xa(o.to(),i.from())>=0){var a=X(o.from(),i.from()),s=V(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;t>=r&&--t,e.splice(--r,2,new K(l?s:a,l?a:s))}}return new G(e,t)}function Q(e,t){return new G([new K(e,t||e)],0)}function J(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Z(e,t){if(t.line<e.first)return ba(e.first,0);var n=e.first+e.size-1;return t.line>n?ba(n,Mi(e,n).text.length):et(t,Mi(e,t.line).text.length)}function et(e,t){var n=e.ch;return null==n||n>t?ba(e.line,t):0>n?ba(e.line,0):e}function tt(e,t){return t>=e.first&&t<e.first+e.size}function nt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=Z(e,t[r]);return n}function rt(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var o=xa(n,i)<0;o!=xa(r,i)<0?(i=n,n=r):o!=xa(n,r)<0&&(n=r)}return new K(i,n)}return new K(r||n,n)}function it(e,t,n,r){ut(e,new G([rt(e,e.sel.primary(),t,n)],0),r)}function ot(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=rt(e,e.sel.ranges[i],t[i],null);var o=Y(r,e.sel.primIndex);ut(e,o,n)}function at(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,ut(e,Y(i,e.sel.primIndex),r)}function st(e,t,n,r){ut(e,Q(t,n),r)}function lt(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new K(Z(e,t[n].anchor),Z(e,t[n].head))}};return fs(e,"beforeSelectionChange",e,n),e.cm&&fs(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?Y(n.ranges,n.ranges.length-1):t}function ct(e,t,n){var r=e.history.done,i=po(r);i&&i.ranges?(r[r.length-1]=t,dt(e,t,n)):ut(e,t,n)}function ut(e,t,n){dt(e,t,n),Ui(e,e.sel,e.cm?e.cm.curOp.id:0/0,n)}function dt(e,t,n){(so(e,"beforeSelectionChange")||e.cm&&so(e.cm,"beforeSelectionChange"))&&(t=lt(e,t));var r=n&&n.bias||(xa(t.primary().head,e.sel.primary().head)<0?-1:1);ft(e,ht(e,t,r,!0)),n&&n.scroll===!1||!e.cm||br(e.cm)}function ft(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,ao(e.cm)),ro(e,"cursorActivity",e))}function pt(e){ft(e,ht(e,e.sel,null,!1),gs)}function ht(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=mt(e,a.anchor,n,r),l=mt(e,a.head,n,r);(i||s!=a.anchor||l!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new K(s,l))}return i?Y(i,t.primIndex):t}function mt(e,t,n,r){var i=!1,o=t,a=n||1;e.cantEdit=!1;e:for(;;){var s=Mi(e,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&(fs(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find(0>a?-1:1);if(0==xa(d,o)&&(d.ch+=a,d.ch<0?d=d.line>e.first?Z(e,ba(d.line-1)):null:d.ch>s.text.length&&(d=d.line<e.first+e.size-1?ba(d.line+1,0):null),!d)){if(i)return r?(e.cantEdit=!0,ba(e.first,0)):mt(e,t,n,!0);i=!0,d=t,a=-a}o=d;continue e}}return o}}function gt(e){for(var t=e.display,n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++){var s=n.sel.ranges[a],l=s.empty();(l||e.options.showCursorWhenSelecting)&&bt(e,s,i),l||xt(e,s,o)}if(e.options.moveInputWithCursor){var c=Vt(e,n.sel.primary().head,"div"),u=t.wrapper.getBoundingClientRect(),d=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,c.top+d.top-u.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,c.left+d.left-u.left))}return r}function vt(e,t){So(e.display.cursorDiv,t.cursors),So(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function yt(e){vt(e,gt(e))}function bt(e,t,n){var r=Vt(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(Co("div","\xa0","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(Co("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function xt(e,t,n){function r(e,t,n,r){0>t&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(Co("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(r-t)+"px"))}function i(t,n,i){function o(n,r){return Ut(e,ba(t,n),"div",d,r)}var s,l,d=Mi(a,t),f=d.text.length;return Po(Pi(d),n||0,null==i?f:i,function(e,t,a){var d,p,h,m=o(e,"left");if(e==t)d=m,p=h=m.left;else{if(d=o(t-1,"right"),"rtl"==a){var g=m;m=d,d=g}p=m.left,h=d.right}null==n&&0==e&&(p=c),d.top-m.top>3&&(r(p,m.top,null,m.bottom),p=c,m.bottom<d.top&&r(p,m.bottom,null,d.top)),null==i&&t==f&&(h=u),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),c+1>p&&(p=c),r(p,d.top,h-p,d.bottom)}),{start:s,end:l}}var o=e.display,a=e.doc,s=document.createDocumentFragment(),l=Nt(e.display),c=l.left,u=o.lineSpace.offsetWidth-l.right,d=t.from(),f=t.to();if(d.line==f.line)i(d.line,d.ch,f.ch);else{var p=Mi(a,d.line),h=Mi(a,f.line),m=Zr(p)==Zr(h),g=i(d.line,d.ch,m?p.text.length+1:null).end,v=i(f.line,m?0:null,f.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(c,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(c,g.bottom,null,v.top)}n.appendChild(s)}function wt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ct(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,yo(Tt,e))}function Tt(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=Wa(t.mode,kt(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var a=o.styles,s=hi(e,o,r,!0);o.styles=s.styles;var l=o.styleClasses,c=s.classes;c?o.styleClasses=c:l&&(o.styleClasses=null);for(var u=!a||a.length!=o.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),d=0;!u&&d<a.length;++d)u=a[d]!=o.styles[d];u&&i.push(t.frontier),o.stateAfter=Wa(t.mode,r)}else gi(e,o.text,r),o.stateAfter=t.frontier%5==0?Wa(t.mode,r):null;return++t.frontier,+new Date>n?(Ct(e,e.options.workDelay),!0):void 0}),i.length&&cn(e,function(){for(var t=0;t<i.length;t++)gn(e,i[t],"text")})}}function St(e,t,n){for(var r,i,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=Mi(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var c=bs(l.text,null,e.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}function kt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var o=St(e,t,n),a=o>r.first&&Mi(r,o-1).stateAfter;return a=a?Wa(r.mode,a):za(r.mode),r.iter(o,t,function(n){gi(e,n.text,a);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?Wa(r.mode,a):null,++o}),n&&(r.frontier=o),a}function Lt(e){return e.lineSpace.offsetTop}function Et(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Nt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=So(e.measure,Co("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function At(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function $t(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(_i(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Mt(e,t){t=Zr(t);var n=_i(t),r=e.display.externalMeasured=new pn(e.doc,t,n);r.lineN=n;var i=r.built=yi(e,r);return r.text=i.pre,So(e.display.lineMeasure,i.pre),r}function Dt(e,t,n,r){return _t(e,Ot(e,t),n,r)}function jt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[yn(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Ot(e,t){var n=_i(t),r=jt(e,n);r&&!r.text?r=null:r&&r.changes&&j(e,r,n,M(e)),r||(r=Mt(e,t));var i=$t(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function _t(e,t,n,r,i){t.before&&(n=-1);var o,a=n+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(At(e,t.view,t.rect),t.hasHeights=!0),o=Ht(e,t,n,r),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Ht(e,t,n,r){for(var i,o,a,s,l=t.map,c=0;c<l.length;c+=3){var u=l[c],d=l[c+1];if(u>n?(o=0,a=1,s="left"):d>n?(o=n-u,a=o+1):(c==l.length-3||n==d&&l[c+3]>n)&&(a=d-u,o=a-1,n>=d&&(s="right")),null!=o){if(i=l[c+2],u==d&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==o)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)i=l[(c-=3)+2],s="left";if("right"==r&&o==d-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)i=l[(c+=3)+2],s="right";break}}var f;if(3==i.nodeType){for(;o&&wo(t.line.text.charAt(u+o));)--o;for(;d>u+a&&wo(t.line.text.charAt(u+a));)++a;if(ea&&9>ta&&0==o&&a==d-u)f=i.parentNode.getBoundingClientRect();else if(ea&&e.options.lineWrapping){var p=Cs(i,o,a).getClientRects();f=p.length?p["right"==r?p.length-1:0]:Sa}else f=Cs(i,o,a).getBoundingClientRect()||Sa}else{o>0&&(s=r="right");var p;f=e.options.lineWrapping&&(p=i.getClientRects()).length>1?p["right"==r?p.length-1:0]:i.getBoundingClientRect()}if(ea&&9>ta&&!o&&(!f||!f.left&&!f.right)){var h=i.parentNode.getClientRects()[0];f=h?{left:h.left,right:h.left+Jt(e.display),top:h.top,bottom:h.bottom}:Sa}ea&&11>ta&&(f=It(e.display.measure,f));for(var m=f.top-t.rect.top,g=f.bottom-t.rect.top,v=(m+g)/2,y=t.view.measure.heights,c=0;c<y.length-1&&!(v<y[c]);c++);var b=c?y[c-1]:0,x=y[c],w={left:("right"==s?f.right:f.left)-t.rect.left,right:("left"==s?f.left:f.right)-t.rect.left,top:b,bottom:x};return f.left||f.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}function It(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Io(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function Pt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ft(e){e.display.externalMeasure=null,To(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Pt(e.display.view[t])}function Rt(e){Ft(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Bt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function zt(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=ai(t.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Ii(t);if("local"==r?a+=Lt(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Wt());var l=s.left+("window"==r?0:Bt());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function qt(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Bt(),i-=Wt();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Ut(e,t,n,r,i){return r||(r=Mi(e.doc,t.line)),zt(e,r,Dt(e,r,t.ch,i),n)}function Vt(e,t,n,r,i,o){function a(t,a){var s=_t(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,zt(e,r,s,n)
}function s(e,t){var n=l[t],r=n.level%2;return e==Fo(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=Ro(n)-(n.level%2?0:1),r=!0):e==Ro(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=Fo(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?a(e-1):a(e,r)}r=r||Mi(e.doc,t.line),i||(i=Ot(e,r));var l=Pi(r),c=t.ch;if(!l)return a(c);var u=Xo(l,c),d=s(c,u);return null!=Hs&&(d.other=s(c,Hs)),d}function Xt(e,t){var n=0,t=Z(e.doc,t);e.options.lineWrapping||(n=Jt(e.display)*t.ch);var r=Mi(e.doc,t.line),i=Ii(r)+Lt(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Gt(e,t,n,r){var i=ba(e,t);return i.xRel=r,n&&(i.outside=!0),i}function Kt(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,0>n)return Gt(r.first,0,!0,-1);var i=Hi(r,n),o=r.first+r.size-1;if(i>o)return Gt(r.first+r.size-1,Mi(r,o).text.length,!0,1);0>t&&(t=0);for(var a=Mi(r,i);;){var s=Yt(e,a,i,t,n),l=Qr(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=_i(a=c.to.line)}}function Yt(e,t,n,r,i){function o(r){var i=Vt(e,ba(n,r),"line",t,c);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-Ii(t),s=!1,l=2*e.display.wrapper.clientWidth,c=Ot(e,t),u=Pi(t),d=t.text.length,f=Bo(t),p=Wo(t),h=o(f),m=s,g=o(p),v=s;if(r>g)return Gt(n,p,v,1);for(;;){if(u?p==f||p==Ko(t,f,1):1>=p-f){for(var y=h>r||g-r>=r-h?f:p,b=r-(y==f?h:g);wo(t.text.charAt(y));)++y;var x=Gt(n,y,y==f?m:v,-1>b?-1:b>1?1:0);return x}var w=Math.ceil(d/2),C=f+w;if(u){C=f;for(var T=0;w>T;++T)C=Ko(t,C,1)}var S=o(C);S>r?(p=C,g=S,(v=s)&&(g+=1e3),d=w):(f=C,h=S,m=s,d-=w)}}function Qt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==wa){wa=Co("pre");for(var t=0;49>t;++t)wa.appendChild(document.createTextNode("x")),wa.appendChild(Co("br"));wa.appendChild(document.createTextNode("x"))}So(e.measure,wa);var n=wa.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),To(e.measure),n||1}function Jt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Co("span","xxxxxxxxxx"),n=Co("pre",[t]);So(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Zt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++La},ka?ka.ops.push(e.curOp):e.curOp.ownsGroup=ka={ops:[e.curOp],delayedCallbacks:[]}}function en(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n]();for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(n<t.length)}function tn(e){var t=e.curOp,n=t.ownsGroup;if(n)try{en(n)}finally{ka=null;for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;nn(n)}}function nn(e){for(var t=e.ops,n=0;n<t.length;n++)rn(t[n]);for(var n=0;n<t.length;n++)on(t[n]);for(var n=0;n<t.length;n++)an(t[n]);for(var n=0;n<t.length;n++)sn(t[n]);for(var n=0;n<t.length;n++)ln(t[n])}function rn(e){var t=e.cm,n=t.display;e.updateMaxLine&&p(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new T(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function on(e){e.updatedDisplay=e.mustUpdate&&S(e.cm,e.update)}function an(e){var t=e.cm,n=t.display;if(e.updatedDisplay&&A(t),e.barMeasure=g(t),n.maxLineChanged&&!t.options.lineWrapping){e.adjustWidthTo=Dt(t,n.maxLine,n.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo+hs-n.scroller.clientWidth);var r=n.sizer.style.minWidth;r&&e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&(e.barMeasure.scrollWidth+=e.adjustWidthTo-parseInt(r))}(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=gt(t))}function sn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Wn(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&vt(t,e.newSelectionNodes),e.updatedDisplay&&E(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&v(t,e.barMeasure),e.selectionChanged&&wt(t),t.state.focused&&e.updateInput&&kn(t,e.typing)}function ln(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&k(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&n.scroller.scrollTop!=e.scrollTop){var i=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop));n.scroller.scrollTop=n.scrollbarV.scrollTop=r.scrollTop=i}if(null!=e.scrollLeft&&n.scroller.scrollLeft!=e.scrollLeft){var o=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft));n.scroller.scrollLeft=n.scrollbarH.scrollLeft=r.scrollLeft=o,b(t)}if(e.scrollToPos){var a=mr(t,Z(r,e.scrollToPos.from),Z(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&hr(t,a)}var s=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(s)for(var c=0;c<s.length;++c)s[c].lines.length||fs(s[c],"hide");if(l)for(var c=0;c<l.length;++c)l[c].lines.length&&fs(l[c],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&na&&(t.options.lineWrapping&&N(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!m(t)&&v(t)),e.changeObjs&&fs(t,"changes",t,e.changeObjs)}function cn(e,t){if(e.curOp)return t();Zt(e);try{return t()}finally{tn(e)}}function un(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Zt(e);try{return t.apply(e,arguments)}finally{tn(e)}}}function dn(e){return function(){if(this.curOp)return e.apply(this,arguments);Zt(this);try{return e.apply(this,arguments)}finally{tn(this)}}}function fn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Zt(t);try{return e.apply(this,arguments)}finally{tn(t)}}}function pn(e,t,n){this.line=t,this.rest=ei(t),this.size=this.rest?_i(po(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ri(e,t)}function hn(e,t,n){for(var r,i=[],o=t;n>o;o=r){var a=new pn(e.doc,Mi(e.doc,o),o);r=o+a.size,i.push(a)}return i}function mn(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)ya&&ti(e.doc,t)<i.viewTo&&vn(e);else if(n<=i.viewFrom)ya&&ni(e.doc,n+r)>i.viewFrom?vn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)vn(e);else if(t<=i.viewFrom){var o=bn(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):vn(e)}else if(n>=i.viewTo){var o=bn(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):vn(e)}else{var a=bn(e,t,t,-1),s=bn(e,n,n+r,1);a&&s?(i.view=i.view.slice(0,a.index).concat(hn(e,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):vn(e)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:t<l.lineN+l.size&&(i.externalMeasured=null))}function gn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[yn(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==ho(a,n)&&a.push(n)}}}function vn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function yn(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,0>t)return r}function bn(e,t,n,r){var i,o=yn(e,t),a=e.display.view;if(!ya||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var s=0,l=e.display.viewFrom;o>s;s++)l+=a[s].size;if(l!=t){if(r>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,n+=i}for(;ti(e.doc,n)!=n;){if(o==(0>r?0:a.length-1))return null;n+=r*a[o-(0>r?1:0)].size,o+=r}return{index:o,lineN:n}}function xn(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=hn(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=hn(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(yn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(hn(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,yn(e,n)))),r.viewTo=n}function wn(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function Cn(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Sn(e),e.state.focused&&Cn(e)})}function Tn(e){function t(){var r=Sn(e);r||n?(e.display.pollingFast=!1,Cn(e)):(n=!0,e.display.poll.set(60,t))}var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Sn(e){var t=e.display.input,n=e.display.prevInput,r=e.doc;if(!e.state.focused||Ds(t)&&!n||Nn(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(ea&&ta>=9&&e.display.inputHasSelection===i||fa&&/[\uf700-\uf7ff]/.test(i))return kn(e),!1;var o=!e.curOp;o&&Zt(e),e.display.shift=!1,8203!=i.charCodeAt(0)||r.sel!=e.display.selForContextMenu||n||(n="\u200b");for(var a=0,s=Math.min(n.length,i.length);s>a&&n.charCodeAt(a)==i.charCodeAt(a);)++a;var l=i.slice(a),c=Ms(l),u=null;e.state.pasteIncoming&&r.sel.ranges.length>1&&(Ea&&Ea.join("\n")==l?u=r.sel.ranges.length%Ea.length==0&&mo(Ea,Ms):c.length==r.sel.ranges.length&&(u=mo(c,function(e){return[e]})));for(var d=r.sel.ranges.length-1;d>=0;d--){var f=r.sel.ranges[d],p=f.from(),h=f.to();a<n.length?p=ba(p.line,p.ch-(n.length-a)):e.state.overwrite&&f.empty()&&!e.state.pasteIncoming&&(h=ba(h.line,Math.min(Mi(r,h.line).text.length,h.ch+po(c).length)));var m=e.curOp.updateInput,g={from:p,to:h,text:u?u[d%u.length]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(sr(e.doc,g),ro(e,"inputRead",e,g),l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&f.head.ch<100&&(!d||r.sel.ranges[d-1].head.line!=f.head.line)){var v=e.getModeAt(f.head);if(v.electricChars){for(var y=0;y<v.electricChars.length;y++)if(l.indexOf(v.electricChars.charAt(y))>-1){wr(e,f.head.line,"smart");break}}else if(v.electricInput){var b=ja(g);v.electricInput.test(Mi(r,b.line).text.slice(0,b.ch))&&wr(e,f.head.line,"smart")}}}return br(e),e.curOp.updateInput=m,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&tn(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function kn(e,t){var n,r,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();n=js&&(o.to().line-o.from().line>100||(r=e.getSelection()).length>1e3);var a=n?"-":r||e.getSelection();e.display.input.value=a,e.state.focused&&ws(e.display.input),ea&&ta>=9&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",ea&&ta>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function Ln(e){"nocursor"==e.options.readOnly||da&&Lo()==e.display.input||e.display.input.focus()}function En(e){e.state.focused||(Ln(e),Jn(e))}function Nn(e){return e.options.readOnly||e.doc.cantEdit}function An(e){function t(){e.state.focused&&setTimeout(yo(Ln,e),0)}function n(t){oo(e,t)||cs(t)}function r(t){if(e.somethingSelected())Ea=e.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=Ea.join("\n"),ws(i.input));else{for(var n=[],r=[],o=0;o<e.doc.sel.ranges.length;o++){var a=e.doc.sel.ranges[o].head.line,s={anchor:ba(a,0),head:ba(a+1,0)};r.push(s),n.push(e.getRange(s.anchor,s.head))}"cut"==t.type?e.setSelections(r,null,gs):(i.prevInput="",i.input.value=n.join("\n"),ws(i.input)),Ea=n}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;us(i.scroller,"mousedown",un(e,jn)),ea&&11>ta?us(i.scroller,"dblclick",un(e,function(t){if(!oo(e,t)){var n=Dn(e,t);if(n&&!Pn(e,t)&&!Mn(e.display,t)){ss(t);var r=Lr(e,n);it(e.doc,r.anchor,r.head)}}})):us(i.scroller,"dblclick",function(t){oo(e,t)||ss(t)}),us(i.lineSpace,"selectstart",function(e){Mn(i,e)||ss(e)}),ga||us(i.scroller,"contextmenu",function(t){er(e,t)}),us(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Bn(e,i.scroller.scrollTop),Wn(e,i.scroller.scrollLeft,!0),fs(e,"scroll",e))}),us(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Bn(e,i.scrollbarV.scrollTop)}),us(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Wn(e,i.scrollbarH.scrollLeft)}),us(i.scroller,"mousewheel",function(t){zn(e,t)}),us(i.scroller,"DOMMouseScroll",function(t){zn(e,t)}),us(i.scrollbarH,"mousedown",t),us(i.scrollbarV,"mousedown",t),us(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),us(i.input,"keyup",function(t){Yn.call(e,t)}),us(i.input,"input",function(){ea&&ta>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Tn(e)}),us(i.input,"keydown",un(e,Gn)),us(i.input,"keypress",un(e,Qn)),us(i.input,"focus",yo(Jn,e)),us(i.input,"blur",yo(Zn,e)),e.options.dragDrop&&(us(i.scroller,"dragstart",function(t){Rn(e,t)}),us(i.scroller,"dragenter",n),us(i.scroller,"dragover",n),us(i.scroller,"drop",un(e,Fn))),us(i.scroller,"paste",function(t){Mn(i,t)||(e.state.pasteIncoming=!0,Ln(e),Tn(e))}),us(i.input,"paste",function(){if(na&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,n=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=n,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Tn(e)}),us(i.input,"cut",r),us(i.input,"copy",r),sa&&us(i.sizer,"mouseup",function(){Lo()==i.input&&i.input.blur(),Ln(e)})}function $n(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function Mn(e,t){for(var n=to(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function Dn(e,t,n,r){var i=e.display;if(!n){var o=to(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var a,s,l=i.lineSpace.getBoundingClientRect();try{a=t.clientX-l.left,s=t.clientY-l.top}catch(t){return null}var c,u=Kt(e,a,s);if(r&&1==u.xRel&&(c=Mi(e.doc,u.line).text).length==u.ch){var d=bs(c,c.length,e.options.tabSize)-c.length;u=ba(u.line,Math.max(0,Math.round((a-Nt(e.display).left)/Jt(e.display))-d))}return u}function jn(e){if(!oo(this,e)){var t=this,n=t.display;if(n.shift=e.shiftKey,Mn(n,e))return void(na||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Pn(t,e)){var r=Dn(t,e);switch(window.focus(),no(e)){case 1:r?On(t,e,r):to(e)==n.scroller&&ss(e);break;case 2:na&&(t.state.lastMiddleDown=+new Date),r&&it(t.doc,r),setTimeout(yo(Ln,t),20),ss(e);break;case 3:ga&&er(t,e)}}}}function On(e,t,n){setTimeout(yo(En,e),0);var r,i=+new Date;Ta&&Ta.time>i-400&&0==xa(Ta.pos,n)?r="triple":Ca&&Ca.time>i-400&&0==xa(Ca.pos,n)?(r="double",Ta={time:i,pos:n}):(r="single",Ca={time:i,pos:n});var o=e.doc.sel,a=fa?t.metaKey:t.ctrlKey;e.options.dragDrop&&$s&&!Nn(e)&&"single"==r&&o.contains(n)>-1&&o.somethingSelected()?_n(e,t,n,a):Hn(e,t,n,r,a)}function _n(e,t,n,r){var i=e.display,o=un(e,function(a){na&&(i.scroller.draggable=!1),e.state.draggingText=!1,ds(document,"mouseup",o),ds(i.scroller,"drop",o),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(ss(a),r||it(e.doc,n),Ln(e),ea&&9==ta&&setTimeout(function(){document.body.focus(),Ln(e)},20))});na&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),us(document,"mouseup",o),us(i.scroller,"drop",o)}function Hn(e,t,n,r,i){function o(t){if(0!=xa(m,t))if(m=t,"rect"==r){for(var i=[],o=e.options.tabSize,a=bs(Mi(c,n.line).text,n.ch,o),s=bs(Mi(c,t.line).text,t.ch,o),l=Math.min(a,s),p=Math.max(a,s),h=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));g>=h;h++){var v=Mi(c,h).text,y=uo(v,l,o);l==p?i.push(new K(ba(h,y),ba(h,y))):v.length>y&&i.push(new K(ba(h,y),ba(h,uo(v,p,o))))}i.length||i.push(new K(n,n)),ut(c,Y(f.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=u,x=b.anchor,w=t;if("single"!=r){if("double"==r)var C=Lr(e,t);else var C=new K(ba(t.line,0),Z(c,ba(t.line+1,0)));xa(C.anchor,x)>0?(w=C.head,x=X(b.from(),C.anchor)):(w=C.anchor,x=V(b.to(),C.head))}var i=f.ranges.slice(0);i[d]=new K(Z(c,x),w),ut(c,Y(i,d),vs)}}function a(t){var n=++v,i=Dn(e,t,!0,"rect"==r);if(i)if(0!=xa(i,m)){En(e),o(i);var s=y(l,c);(i.line>=s.to||i.line<s.from)&&setTimeout(un(e,function(){v==n&&a(t)}),150)}else{var u=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;u&&setTimeout(un(e,function(){v==n&&(l.scroller.scrollTop+=u,a(t))}),50)}}function s(t){v=1/0,ss(t),Ln(e),ds(document,"mousemove",b),ds(document,"mouseup",x),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;ss(t);var u,d,f=c.sel;if(i&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?c.sel.ranges[d]:new K(n,n)):u=c.sel.primary(),t.altKey)r="rect",i||(u=new K(n,n)),n=Dn(e,t,!0,!0),d=-1;else if("double"==r){var p=Lr(e,n);u=e.display.shift||c.extend?rt(c,u,p.anchor,p.head):p}else if("triple"==r){var h=new K(ba(n.line,0),Z(c,ba(n.line+1,0)));u=e.display.shift||c.extend?rt(c,u,h.anchor,h.head):h}else u=rt(c,u,n);i?d>-1?at(c,d,u,vs):(d=c.sel.ranges.length,ut(c,Y(c.sel.ranges.concat([u]),d),{scroll:!1,origin:"*mouse"})):(d=0,ut(c,new G([u],0),vs),f=c.sel);var m=n,g=l.wrapper.getBoundingClientRect(),v=0,b=un(e,function(e){no(e)?a(e):s(e)}),x=un(e,s);us(document,"mousemove",b),us(document,"mouseup",x)}function In(e,t,n,r,i){try{var o=t.clientX,a=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ss(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(a>l.bottom||!so(e,n))return eo(t);a-=l.top-s.viewOffset;for(var c=0;c<e.options.gutters.length;++c){var u=s.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=o){var d=Hi(e.doc,a),f=e.options.gutters[c];return i(e,n,e,d,f,t),eo(t)}}}function Pn(e,t){return In(e,t,"gutterClick",!0,ro)}function Fn(e){var t=this;if(!oo(t,e)&&!Mn(t.display,e)){ss(e),ea&&(Na=+new Date);var n=Dn(t,e,!0),r=e.dataTransfer.files;if(n&&!Nn(t))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(e,r){var s=new FileReader;s.onload=un(t,function(){if(o[r]=s.result,++a==i){n=Z(t.doc,n);var e={from:n,to:n,text:Ms(o.join("\n")),origin:"paste"};sr(t.doc,e),ct(t.doc,Q(n,ja(e)))}}),s.readAsText(e)},l=0;i>l;++l)s(r[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(yo(Ln,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(fa?e.metaKey:e.ctrlKey))var c=t.listSelections();if(dt(t.doc,Q(n,n)),c)for(var l=0;l<c.length;++l)pr(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(o,"around","paste"),Ln(t)}}catch(e){}}}}function Rn(e,t){if(ea&&(!e.state.draggingText||+new Date-Na<100))return void cs(t);if(!oo(e,t)&&!Mn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!aa)){var n=Co("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",oa&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),oa&&n.parentNode.removeChild(n)}}function Bn(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Qo||L(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Qo&&L(e),Ct(e,100))}function Wn(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,b(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function zn(e,t){var n=t.wheelDeltaX,r=t.wheelDeltaY;null==n&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(n=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta);var i=e.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&fa&&na)e:for(var a=t.target,s=i.view;a!=o;a=a.parentNode)for(var l=0;l<s.length;l++)if(s[l].node==a){e.display.currentWheelTarget=a;break e}if(n&&!Qo&&!oa&&null!=$a)return r&&Bn(e,Math.max(0,Math.min(o.scrollTop+r*$a,o.scrollHeight-o.clientHeight))),Wn(e,Math.max(0,Math.min(o.scrollLeft+n*$a,o.scrollWidth-o.clientWidth))),ss(t),void(i.wheelStartX=null);if(r&&null!=$a){var c=r*$a,u=e.doc.scrollTop,d=u+i.wrapper.clientHeight;0>c?u=Math.max(0,u+c-50):d=Math.min(e.doc.height,d+c+50),L(e,{top:u,bottom:d})}20>Aa&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&($a=($a*Aa+n)/(Aa+1),++Aa)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function qn(e,t,n){if("string"==typeof t&&(t=qa[t],!t))return!1;e.display.pollingFast&&Sn(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{Nn(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=ms}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function Un(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Vn(e,t){var n=Nr(e.options.keyMap),r=n.auto;clearTimeout(Ma),r&&!Xa(t)&&(Ma=setTimeout(function(){Nr(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,s(e))},50));var i=Ga(t,!0),o=!1;if(!i)return!1;var a=Un(e);return o=t.shiftKey?Va("Shift-"+i,a,function(t){return qn(e,t,!0)})||Va(i,a,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?qn(e,t):void 0}):Va(i,a,function(t){return qn(e,t)}),o&&(ss(t),wt(e),ro(e,"keyHandled",e,i,t)),o}function Xn(e,t,n){var r=Va("'"+n+"'",Un(e),function(t){return qn(e,t,!0)});return r&&(ss(t),wt(e),ro(e,"keyHandled",e,"'"+n+"'",t)),r}function Gn(e){var t=this;if(En(t),!oo(t,e)){ea&&11>ta&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=Vn(t,e);oa&&(Da=r?n:null,!r&&88==n&&!js&&(fa?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Kn(t)}}function Kn(e){function t(e){18!=e.keyCode&&e.altKey||(No(n,"CodeMirror-crosshair"),ds(document,"keyup",t),ds(document,"mouseover",t))}var n=e.display.lineDiv;Ao(n,"CodeMirror-crosshair"),us(document,"keyup",t),us(document,"mouseover",t)}function Yn(e){16==e.keyCode&&(this.doc.sel.shift=!1),oo(this,e)}function Qn(e){var t=this;if(!(oo(t,e)||e.ctrlKey&&!e.altKey||fa&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(oa&&n==Da)return Da=null,void ss(e);if(!(oa&&(!e.which||e.which<10)||sa)||!Vn(t,e)){var i=String.fromCharCode(null==r?n:r);Xn(t,e,i)||(ea&&ta>=9&&(t.display.inputHasSelection=null),Tn(t))}}}function Jn(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(fs(e,"focus",e),e.state.focused=!0,Ao(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(kn(e),na&&setTimeout(yo(kn,e,!0),0))),Cn(e),wt(e))}function Zn(e){e.state.focused&&(fs(e,"blur",e),e.state.focused=!1,No(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function er(e,t){function n(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),n=i.input.value="\u200b"+(t?i.input.value:"");i.prevInput=t?"":"\u200b",i.input.selectionStart=1,i.input.selectionEnd=n.length,i.selForContextMenu=e.doc.sel}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=l,ea&&9>ta&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),Cn(e),null!=i.input.selectionStart){(!ea||ea&&9>ta)&&n();var t=0,r=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?un(e,qa.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(r,500):kn(e)};i.detectingSelectAll=setTimeout(r,200)}}if(!oo(e,t,"contextmenu")){var i=e.display;if(!Mn(i,t)&&!tr(e,t)){var o=Dn(e,t),a=i.scroller.scrollTop;if(o&&!oa){var s=e.options.resetSelectionOnContextMenu;s&&-1==e.doc.sel.contains(o)&&un(e,ut)(e.doc,Q(o),gs);var l=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(ea?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",na)var c=window.scrollY;if(Ln(e),na&&window.scrollTo(null,c),kn(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),ea&&ta>=9&&n(),ga){cs(t);var u=function(){ds(window,"mouseup",u),setTimeout(r,20)};us(window,"mouseup",u)}else setTimeout(r,50)}}}}function tr(e,t){return so(e,"gutterContextMenu")?In(e,t,"gutterContextMenu",!1,fs):!1}function nr(e,t){if(xa(e,t.from)<0)return e;if(xa(e,t.to)<=0)return ja(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=ja(t).ch-t.to.ch),ba(n,r)}function rr(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new K(nr(i.anchor,t),nr(i.head,t)))}return Y(n,e.sel.primIndex)}function ir(e,t,n){return e.line==t.line?ba(n.line,e.ch-t.ch+n.ch):ba(n.line+(e.line-t.line),e.ch)}function or(e,t,n){for(var r=[],i=ba(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=ir(s.from,i,o),c=ir(ja(s),i,o);if(i=s.to,o=c,"around"==n){var u=e.sel.ranges[a],d=xa(u.head,u.anchor)<0;r[a]=new K(d?c:l,d?l:c)}else r[a]=new K(l,l)}return new G(r,e.sel.primIndex)}function ar(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Z(e,t)),n&&(this.to=Z(e,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),fs(e,"beforeChange",e,r),e.cm&&fs(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function sr(e,t,n){if(e.cm){if(!e.cm.curOp)return un(e.cm,sr)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(so(e,"beforeChange")||e.cm&&so(e.cm,"beforeChange"))||(t=ar(e,t,!0))){var r=va&&!n&&zr(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)lr(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else lr(e,t)}}function lr(e,t){if(1!=t.text.length||""!=t.text[0]||0!=xa(t.from,t.to)){var n=rr(e,t);zi(e,t,n,e.cm?e.cm.curOp.id:0/0),dr(e,t,n,Rr(e,t));var r=[];Ai(e,function(e,n){n||-1!=ho(r,e.history)||(Zi(e.history,t),r.push(e.history)),dr(e,t,null,Rr(e,t))})}}function cr(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var r,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(e.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if(Vi(r,s),n&&!r.equals(e.sel))return void ut(e,r,{clearRedo:!1});o=r}var c=[];Vi(o,s),s.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=so(e,"beforeChange")||e.cm&&so(e.cm,"beforeChange"),l=r.changes.length-1;l>=0;--l){var d=r.changes[l];if(d.origin=t,u&&!ar(e,d,!1))return void(a.length=0);c.push(Ri(e,d));var f=l?rr(e,d):po(a);dr(e,d,f,Wr(e,d)),!l&&e.cm&&e.cm.scrollIntoView({from:d.from,to:ja(d)});var p=[];Ai(e,function(e,t){t||-1!=ho(p,e.history)||(Zi(e.history,d),p.push(e.history)),dr(e,d,null,Wr(e,d))})}}}}function ur(e,t){if(0!=t&&(e.first+=t,e.sel=new G(mo(e.sel.ranges,function(e){return new K(ba(e.anchor.line+t,e.anchor.ch),ba(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){mn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)gn(e.cm,r,"gutter")}}function dr(e,t,n,r){if(e.cm&&!e.cm.curOp)return un(e.cm,dr)(e,t,n,r);if(t.to.line<e.first)return void ur(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);ur(e,i),t={from:ba(e.first,0),to:ba(t.to.line+i,t.to.ch),text:[po(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:ba(o,Mi(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Di(e,t.from,t.to),n||(n=rr(e,t)),e.cm?fr(e.cm,t,r):Li(e,t,r),dt(e,n,gs)}}function fr(e,t,n){var r=e.doc,i=e.display,a=t.from,s=t.to,l=!1,c=a.line;e.options.lineWrapping||(c=_i(Zr(Mi(r,a.line))),r.iter(c,s.line+1,function(e){return e==i.maxLine?(l=!0,!0):void 0})),r.sel.contains(t.from,t.to)>-1&&ao(e),Li(r,t,n,o(e)),e.options.lineWrapping||(r.iter(c,a.line+t.text.length,function(e){var t=f(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),Ct(e,400);var u=t.text.length-(s.line-a.line)-1;a.line!=s.line||1!=t.text.length||ki(e.doc,t)?mn(e,a.line,s.line+1,u):gn(e,a.line,"text");var d=so(e,"changes"),p=so(e,"change");if(p||d){var h={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};p&&ro(e,"change",e,h),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function pr(e,t,n,r,i){if(r||(r=n),xa(r,n)<0){var o=r;r=n,n=o}"string"==typeof t&&(t=Ms(t)),sr(e,{from:n,to:r,text:t,origin:i})}function hr(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!ca){var o=Co("div","\u200b",null,"position: absolute; top: "+(t.top-n.viewOffset-Lt(e.display))+"px; height: "+(t.bottom-t.top+hs)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function mr(e,t,n,r){for(null==r&&(r=0);;){var i=!1,o=Vt(e,t),a=n&&n!=t?Vt(e,n):o,s=vr(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),l=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=s.scrollTop&&(Bn(e,s.scrollTop),Math.abs(e.doc.scrollTop-l)>1&&(i=!0)),null!=s.scrollLeft&&(Wn(e,s.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(i=!0)),!i)return o}}function gr(e,t,n,r,i){var o=vr(e,t,n,r,i);null!=o.scrollTop&&Bn(e,o.scrollTop),null!=o.scrollLeft&&Wn(e,o.scrollLeft)}function vr(e,t,n,r,i){var o=e.display,a=Qt(e.display);0>n&&(n=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-hs,c={};i-n>l&&(i=n+l);var u=e.doc.height+Et(o),d=a>n,f=i>u-a;if(s>n)c.scrollTop=d?0:n;else if(i>s+l){var p=Math.min(n,(f?u:i)-l);p!=s&&(c.scrollTop=p)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-hs,g=r-t>m;return g&&(r=n+l),t<o.gutters.offsetWidth+10?c.scrollLeft=0:h>t?c.scrollLeft=Math.max(0,t-(g?0:10)):r>m+h-3&&(c.scrollLeft=r+(g?0:10)-m),c}function yr(e,t,n){(null!=t||null!=n)&&xr(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function br(e){xr(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?ba(t.line,t.ch-1):t,r=ba(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function xr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Xt(e,t.from),r=Xt(e,t.to),i=vr(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function wr(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=kt(e,t):n="prev");var a=e.options.tabSize,s=Mi(o,t),l=bs(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(c=o.mode.indent(i,s.text.slice(u.length),s.text),c==ms||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?bs(Mi(o,t-1).text,null,a):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/a);p;--p)f+=a,d+="	";if(c>f&&(d+=fo(c-f)),d!=u)pr(o,d,ba(t,0),ba(t,u.length),"+input");else for(var p=0;p<o.sel.ranges.length;p++){var h=o.sel.ranges[p];if(h.head.line==t&&h.head.ch<u.length){var f=ba(t,u.length);at(o,p,new K(f,f));break}}s.stateAfter=null}function Cr(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Mi(e,J(e,t)):i=_i(t),null==i?null:(r(o,i)&&e.cm&&gn(e.cm,i,n),o)}function Tr(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&xa(o.from,po(r).to)<=0;){var a=r.pop();
if(xa(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}cn(e,function(){for(var t=r.length-1;t>=0;t--)pr(e.doc,"",r[t].from,r[t].to,"+delete");br(e)})}function Sr(e,t,n,r,i){function o(){var t=s+n;return t<e.first||t>=e.first+e.size?d=!1:(s=t,u=Mi(e,t))}function a(e){var t=(i?Ko:Yo)(u,l,n,!0);if(null==t){if(e||!o())return d=!1;l=i?(0>n?Wo:Bo)(u):0>n?u.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,c=n,u=Mi(e,s),d=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var f=null,p="group"==r,h=e.cm&&e.cm.getHelper(t,"wordChars"),m=!0;!(0>n)||a(!m);m=!1){var g=u.text.charAt(l)||"\n",v=bo(g,h)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(!p||m||v||(v="s"),f&&f!=v){0>n&&(n=1,a());break}if(v&&(f=v),n>0&&!a(!m))break}var y=mt(e,ba(s,l),c,!0);return d||(y.hitSide=!0),y}function kr(e,t,n,r){var i,o=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+n*(s-(0>n?1.5:.5)*Qt(e.display))}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;;){var l=Kt(e,a,i);if(!l.outside)break;if(0>n?0>=i:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function Lr(e,t){var n=e.doc,r=Mi(n,t.line).text,i=t.ch,o=t.ch;if(r){var a=e.getHelper(t,"wordChars");(t.xRel<0||o==r.length)&&i?--i:++o;for(var s=r.charAt(i),l=bo(s,a)?function(e){return bo(e,a)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!bo(e)};i>0&&l(r.charAt(i-1));)--i;for(;o<r.length&&l(r.charAt(o));)++o}return new K(ba(t.line,i),ba(t.line,o))}function Er(t,n,r,i){e.defaults[t]=n,r&&(_a[t]=i?function(e,t,n){n!=Ha&&r(e,t,n)}:r)}function Nr(e){return"string"==typeof e?Ua[e]:e}function Ar(e,t,n,r,i){if(r&&r.shared)return $r(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return un(e.cm,Ar)(e,t,n,r,i);var o=new Ya(e,i),a=xa(t,n);if(r&&vo(r,o,!1),a>0||0==a&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=Co("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Jr(e,t.line,t,n,o)||t.line!=n.line&&Jr(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");ya=!0}o.addToHistory&&zi(e,{from:t,to:n,origin:"markText"},e.sel,0/0);var s,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&Zr(e)==c.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&Oi(e,0),Ir(e,new Or(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){ri(e,t)&&Oi(t,0)}),o.clearOnEnter&&us(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(va=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Qa,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)mn(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var u=t.line;u<=n.line;u++)gn(c,u,"text");o.atomic&&pt(c.doc),ro(c,"markerAdded",c,o)}return o}function $r(e,t,n,r,i){r=vo(r),r.shared=!1;var o=[Ar(e,t,n,r,i)],a=o[0],s=r.widgetNode;return Ai(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),o.push(Ar(e,Z(e,t),Z(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=po(o)}),new Ja(o,a)}function Mr(e){return e.findMarks(ba(e.first,0),e.clipPos(ba(e.lastLine())),function(e){return e.parent})}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(xa(o,a)){var s=Ar(e,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function jr(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Ai(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==ho(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}}}function Or(e,t,n){this.marker=e,this.from=t,this.to=n}function _r(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Hr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ir(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Pr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Or(a,o.from,l?null:o.to))}}return r}function Fr(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Or(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}function Rr(e,t){var n=tt(e,t.from.line)&&Mi(e,t.from.line).markedSpans,r=tt(e,t.to.line)&&Mi(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,a=0==xa(t.from,t.to),s=Pr(n,i,a),l=Fr(r,o,a),c=1==t.text.length,u=po(t.text).length+(c?i:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var p=_r(l,f.marker);p?c&&(f.to=null==p.to?null:p.to+u):f.to=i}}if(l)for(var d=0;d<l.length;++d){var f=l[d];if(null!=f.to&&(f.to+=u),null==f.from){var p=_r(s,f.marker);p||(f.from=u,c&&(s||(s=[])).push(f))}else f.from+=u,c&&(s||(s=[])).push(f)}s&&(s=Br(s)),l&&l!=s&&(l=Br(l));var h=[s];if(!c){var m,g=t.text.length-2;if(g>0&&s)for(var d=0;d<s.length;++d)null==s[d].to&&(m||(m=[])).push(new Or(s[d].marker,null,null));for(var d=0;g>d;++d)h.push(m);h.push(l)}return h}function Br(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Wr(e,t){var n=Ki(e,t),r=Rr(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[i]=a)}return n}function zr(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=ho(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(xa(c.to,s.from)<0||xa(c.from,s.to)>0)){var u=[l,1],d=xa(c.from,s.from),f=xa(c.to,s.to);(0>d||!a.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(f>0||!a.inclusiveRight&&!f)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function qr(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Ur(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Vr(e){return e.inclusiveLeft?-1:0}function Xr(e){return e.inclusiveRight?1:0}function Gr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=xa(r.from,i.from)||Vr(e)-Vr(t);if(o)return-o;var a=xa(r.to,i.to)||Xr(e)-Xr(t);return a?a:t.id-e.id}function Kr(e,t){var n,r=ya&&e.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||Gr(n,i.marker)<0)&&(n=i.marker);return n}function Yr(e){return Kr(e,!0)}function Qr(e){return Kr(e,!1)}function Jr(e,t,n,r,i){var o=Mi(e,t),a=ya&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=xa(c.from,n)||Vr(l.marker)-Vr(i),d=xa(c.to,r)||Xr(l.marker)-Xr(i);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(xa(c.to,n)>0||l.marker.inclusiveRight&&i.inclusiveLeft)||u>=0&&(xa(c.from,r)<0||l.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Zr(e){for(var t;t=Yr(e);)e=t.find(-1,!0).line;return e}function ei(e){for(var t,n;t=Qr(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function ti(e,t){var n=Mi(e,t),r=Zr(n);return n==r?t:_i(r)}function ni(e,t){if(t>e.lastLine())return t;var n,r=Mi(e,t);if(!ri(e,r))return t;for(;n=Qr(r);)r=n.find(1,!0).line;return _i(r)+1}function ri(e,t){var n=ya&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&ii(e,t,r))return!0}}function ii(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return ii(e,r.line,_r(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&ii(e,t,i))return!0}function oi(e,t,n){Ii(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&yr(e,null,n)}function ai(e){if(null!=e.height)return e.height;if(!ko(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),So(e.cm.display.measure,Co("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function si(e,t,n,r){var i=new Za(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),Cr(e.doc,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!ri(e.doc,t)){var r=Ii(t)<e.doc.scrollTop;Oi(t,t.height+ai(i)),r&&yr(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function li(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),qr(e),Ur(e,n);var i=r?r(e):1;i!=e.height&&Oi(e,i)}function ci(e){e.parent=null,qr(e)}function ui(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function di(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var r=e.innerMode(t,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function fi(e,t,n){for(var r=0;10>r;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function pi(t,n,r,i,o,a,s){var l=r.flattenSpans;null==l&&(l=t.options.flattenSpans);var c,u=0,d=null,f=new Ka(n,t.options.tabSize);for(""==n&&ui(di(r,i),a);!f.eol();){if(f.pos>t.options.maxHighlightLength?(l=!1,s&&gi(t,n,i,f.pos),f.pos=n.length,c=null):c=ui(fi(r,f,i),a),t.options.addModeClass){var p=e.innerMode(r,i).mode.name;p&&(c="m-"+(c?p+" "+c:p))}l&&d==c||(u<f.start&&o(f.start,d),u=f.start,d=c),f.start=f.pos}for(;u<f.pos;){var h=Math.min(f.pos,u+5e4);o(h,d),u=h}}function hi(e,t,n,r){var i=[e.state.modeGen],o={};pi(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},o,r);for(var a=0;a<e.state.overlays.length;++a){var s=e.state.overlays[a],l=1,c=0;pi(e,t.text,s.mode,!0,function(e,t){for(var n=l;e>c;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(s.opaque)i.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function mi(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=hi(e,t,t.stateAfter=kt(e,_i(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function gi(e,t,n,r){var i=e.doc.mode,o=new Ka(t,e.options.tabSize);for(o.start=o.pos=r||0,""==t&&di(i,n);!o.eol()&&o.pos<=e.options.maxHighlightLength;)fi(i,o,n),o.start=o.pos}function vi(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?ns:ts;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function yi(e,t){var n=Co("span",null,null,na?"padding-right: .1px":null),r={pre:Co("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;r.pos=0,r.addToken=xi,(ea||na)&&e.getOption("lineWrapping")&&(r.addToken=wi(r.addToken)),Ho(e.display.measure)&&(o=Pi(a))&&(r.addToken=Ci(r.addToken,o)),r.map=[],Si(a,r,mi(e,a)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=$o(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=$o(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(_o(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return fs(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=$o(r.pre.className,r.textClass||"")),r}function bi(e){var t=Co("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function xi(e,t,n,r,i,o){if(t){var a=e.cm.options.specialChars,s=!1;if(a.test(t))for(var l=document.createDocumentFragment(),c=0;;){a.lastIndex=c;var u=a.exec(t),d=u?u.index-c:t.length-c;if(d){var f=document.createTextNode(t.slice(c,c+d));l.appendChild(ea&&9>ta?Co("span",[f]):f),e.map.push(e.pos,e.pos+d,f),e.col+=d,e.pos+=d}if(!u)break;if(c+=d+1,"	"==u[0]){var p=e.cm.options.tabSize,h=p-e.col%p,f=l.appendChild(Co("span",fo(h),"cm-tab"));e.col+=h}else{var f=e.cm.options.specialCharPlaceholder(u[0]);l.appendChild(ea&&9>ta?Co("span",[f]):f),e.col+=1}e.map.push(e.pos,e.pos+1,f),e.pos++}else{e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),ea&&9>ta&&(s=!0),e.pos+=t.length}if(n||r||i||s){var m=n||"";r&&(m+=r),i&&(m+=i);var g=Co("span",[l],m);return o&&(g.title=o),e.content.appendChild(g)}e.content.appendChild(l)}}function wi(e){function t(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":"\xa0";return t+=" "}return function(n,r,i,o,a,s){e(n,r.replace(/ {3,}/g,t),i,o,a,s)}}function Ci(e,t){return function(n,r,i,o,a,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var u=0;u<t.length;u++){var d=t[u];if(d.to>l&&d.from<=l)break}if(d.to>=c)return e(n,r,i,o,a,s);e(n,r.slice(0,d.to-l),i,o,null,s),o=null,r=r.slice(d.to-l),l=d.to}}}function Ti(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function Si(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var a,s,l,c,u,d,f=i.length,p=0,h=1,m="",g=0;;){if(g==p){s=l=c=u="",d=null,g=1/0;for(var v=[],y=0;y<r.length;++y){var b=r[y],x=b.marker;b.from<=p&&(null==b.to||b.to>p)?(null!=b.to&&g>b.to&&(g=b.to,l=""),x.className&&(s+=" "+x.className),x.startStyle&&b.from==p&&(c+=" "+x.startStyle),x.endStyle&&b.to==g&&(l+=" "+x.endStyle),x.title&&!u&&(u=x.title),x.collapsed&&(!d||Gr(d.marker,x)<0)&&(d=b)):b.from>p&&g>b.from&&(g=b.from),"bookmark"==x.type&&b.from==p&&x.widgetNode&&v.push(x)}if(d&&(d.from||0)==p&&(Ti(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var y=0;y<v.length;++y)Ti(t,0,v[y])}if(p>=f)break;for(var w=Math.min(f,g);;){if(m){var C=p+m.length;if(!d){var T=C>w?m.slice(0,w-p):m;t.addToken(t,T,a?a+s:s,c,p+T.length==g?l:"",u)}if(C>=w){m=m.slice(w-p),p=w;break}p=C,c=""}m=i.slice(o,o=n[h++]),a=vi(n[h++],t.cm.options)}}else for(var h=1;h<n.length;h+=2)t.addToken(t,i.slice(o,o=n[h]),vi(n[h+1],t.cm.options))}function ki(e,t){return 0==t.from.ch&&0==t.to.ch&&""==po(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Li(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){li(e,n,i,r),ro(e,"change",e,t)}var a=t.from,s=t.to,l=t.text,c=Mi(e,a.line),u=Mi(e,s.line),d=po(l),f=i(l.length-1),p=s.line-a.line;if(ki(e,t)){for(var h=0,m=[];h<l.length-1;++h)m.push(new es(l[h],i(h),r));o(u,u.text,f),p&&e.remove(a.line,p),m.length&&e.insert(a.line,m)}else if(c==u)if(1==l.length)o(c,c.text.slice(0,a.ch)+d+c.text.slice(s.ch),f);else{for(var m=[],h=1;h<l.length-1;++h)m.push(new es(l[h],i(h),r));m.push(new es(d+c.text.slice(s.ch),f,r)),o(c,c.text.slice(0,a.ch)+l[0],i(0)),e.insert(a.line+1,m)}else if(1==l.length)o(c,c.text.slice(0,a.ch)+l[0]+u.text.slice(s.ch),i(0)),e.remove(a.line+1,p);else{o(c,c.text.slice(0,a.ch)+l[0],i(0)),o(u,d+u.text.slice(s.ch),f);for(var h=1,m=[];h<l.length-1;++h)m.push(new es(l[h],i(h),r));p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,m)}ro(e,"change",e,t)}function Ei(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Ni(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function Ai(e,t,n){function r(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;(!n||l)&&(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function $i(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),n(e),e.options.lineWrapping||p(e),e.options.mode=t.modeOption,mn(e)}function Mi(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(o>t){n=i;break}t-=o}return n.lines[t]}function Di(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i}),r}function ji(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function Oi(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function _i(e){if(null==e.parent)return null;for(var t=e.parent,n=ho(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Hi(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(o>t){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var a=e.lines[r],s=a.height;if(s>t)break;t-=s}return n+r}function Ii(e){e=Zr(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;t+=a.height}return t}function Pi(e){var t=e.order;return null==t&&(t=e.order=Is(e.text)),t}function Fi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ri(e,t){var n={from:U(t.from),to:ja(t),text:Di(e,t.from,t.to)};return Xi(e,n,t.from.line,t.to.line+1),Ai(e,function(e){Xi(e,n,t.from.line,t.to.line+1)},!0),n}function Bi(e){for(;e.length;){var t=po(e);if(!t.ranges)break;e.pop()}}function Wi(e,t){return t?(Bi(e.done),po(e.done)):e.done.length&&!po(e.done).ranges?po(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),po(e.done)):void 0}function zi(e,t,n,r){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Wi(i,i.lastOp==r))){var s=po(o.changes);0==xa(t.from,t.to)&&0==xa(t.from,s.to)?s.to=ja(t):o.changes.push(Ri(e,t))}else{var l=po(i.done);for(l&&l.ranges||Vi(e.sel,i.done),o={changes:[Ri(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||fs(e,"historyAdded")}function qi(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ui(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||qi(e,o,po(i.done),t))?i.done[i.done.length-1]=t:Vi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&r.clearRedo!==!1&&Bi(i.undone)}function Vi(e,t){var n=po(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Xi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Gi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Ki(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(Gi(n[r]));return i}function Yi(e,t,n){for(var r=0,i=[];r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?G.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var c,u=a[l];if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&ho(t,Number(c[1]))>-1&&(po(s)[d]=u[d],delete u[d])}}}return i}function Qi(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Ji(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)Qi(o.ranges[s].anchor,t,n,r),Qi(o.ranges[s].head,t,n,r)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=ba(l.from.line+r,l.from.ch),l.to=ba(l.to.line+r,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Zi(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Ji(e.done,n,r,i),Ji(e.undone,n,r,i)}function eo(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function to(e){return e.target||e.srcElement}function no(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),fa&&e.ctrlKey&&1==t&&(t=3),t}function ro(e,t){function n(e){return function(){e.apply(null,o)}}var r=e._handlers&&e._handlers[t];if(r){var i,o=Array.prototype.slice.call(arguments,2);ka?i=ka.delayedCallbacks:ps?i=ps:(i=ps=[],setTimeout(io,0));for(var a=0;a<r.length;++a)i.push(n(r[a]))}}function io(){var e=ps;ps=null;for(var t=0;t<e.length;++t)e[t]()}function oo(e,t,n){return fs(e,n||t.type,e,t),eo(t)||t.codemirrorIgnore}function ao(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==ho(n,t[r])&&n.push(t[r])}function so(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function lo(e){e.prototype.on=function(e,t){us(this,e,t)},e.prototype.off=function(e,t){ds(this,e,t)}}function co(){this.id=null}function uo(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("	",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||i+a>=t)return r+Math.min(a,t-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=t)return r}}function fo(e){for(;xs.length<=e;)xs.push(po(xs)+" ");return xs[e]}function po(e){return e[e.length-1]}function ho(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function mo(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function go(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&vo(t,n),n}function vo(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function yo(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function bo(e,t){return t?t.source.indexOf("\\w")>-1&&Ss(e)?!0:t.test(e):Ss(e)}function xo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function wo(e){return e.charCodeAt(0)>=768&&ks.test(e)}function Co(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function To(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function So(e,t){return To(e).appendChild(t)}function ko(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function Lo(){return document.activeElement}function Eo(e){return new RegExp("\\b"+e+"\\b\\s*")}function No(e,t){var n=Eo(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function Ao(e,t){Eo(t).test(e.className)||(e.className+=" "+t)}function $o(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!Eo(n[r]).test(t)&&(t+=" "+n[r]);return t}function Mo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function Do(){As||(jo(),As=!0)}function jo(){var e;us(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Ls=null,Mo($n)},100))}),us(window,"blur",function(){Mo(Zn)})}function Oo(e){if(null!=Ls)return Ls;var t=Co("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return So(e,t),t.offsetWidth&&(Ls=t.offsetHeight-t.clientHeight),Ls||0}function _o(e){if(null==Es){var t=Co("span","\u200b");So(e,Co("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Es=t.offsetWidth<=1&&t.offsetHeight>2&&!(ea&&8>ta))}return Es?Co("span","\u200b"):Co("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ho(e){if(null!=Ns)return Ns;var t=So(e,document.createTextNode("A\u062eA")),n=Cs(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=Cs(t,1,2).getBoundingClientRect();return Ns=r.right-n.right<3}function Io(e){if(null!=Os)return Os;var t=So(e,Co("span","x")),n=t.getBoundingClientRect(),r=Cs(t,0,1).getBoundingClientRect();return Os=Math.abs(n.left-r.left)>1}function Po(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function Fo(e){return e.level%2?e.to:e.from}function Ro(e){return e.level%2?e.from:e.to}function Bo(e){var t=Pi(e);return t?Fo(t[0]):0}function Wo(e){var t=Pi(e);return t?Ro(po(t)):e.text.length}function zo(e,t){var n=Mi(e.doc,t),r=Zr(n);r!=n&&(t=_i(r));var i=Pi(r),o=i?i[0].level%2?Wo(r):Bo(r):0;return ba(t,o)}function qo(e,t){for(var n,r=Mi(e.doc,t);n=Qr(r);)r=n.find(1,!0).line,t=null;var i=Pi(r),o=i?i[0].level%2?Bo(r):Wo(r):r.text.length;return ba(null==t?_i(r):t,o)}function Uo(e,t){var n=zo(e,t.line),r=Mi(e.doc,n.line),i=Pi(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return ba(n.line,a?0:o)}return n}function Vo(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:n>t}function Xo(e,t){Hs=null;for(var n,r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return Vo(e,i.level,e[n].level)?(i.from!=i.to&&(Hs=n),r):(i.from!=i.to&&(Hs=r),n);n=r}}return n}function Go(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&wo(e.text.charAt(t)));return t}function Ko(e,t,n,r){var i=Pi(e);if(!i)return Yo(e,t,n,r);for(var o=Xo(i,t),a=i[o],s=Go(e,t,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return Xo(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;s=n>0==a.level%2?Go(e,a.to,-1,r):Go(e,a.from,1,r)}}function Yo(e,t,n,r){var i=t+n;if(r)for(;i>0&&wo(e.text.charAt(i));)i+=n;return 0>i||i>e.text.length?null:i}var Qo=/gecko\/\d/i.test(navigator.userAgent),Jo=/MSIE \d/.test(navigator.userAgent),Zo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ea=Jo||Zo,ta=ea&&(Jo?document.documentMode||6:Zo[1]),na=/WebKit\//.test(navigator.userAgent),ra=na&&/Qt\/\d+\.\d+/.test(navigator.userAgent),ia=/Chrome\//.test(navigator.userAgent),oa=/Opera\//.test(navigator.userAgent),aa=/Apple Computer/.test(navigator.vendor),sa=/KHTML\//.test(navigator.userAgent),la=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ca=/PhantomJS/.test(navigator.userAgent),ua=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),da=ua||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),fa=ua||/Mac/.test(navigator.platform),pa=/win/i.test(navigator.platform),ha=oa&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);ha&&(ha=Number(ha[1])),ha&&ha>=15&&(oa=!1,na=!0);var ma=fa&&(ra||oa&&(null==ha||12.11>ha)),ga=Qo||ea&&ta>=9,va=!1,ya=!1,ba=e.Pos=function(e,t){return this instanceof ba?(this.line=e,void(this.ch=t)):new ba(e,t)},xa=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};G.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(0!=xa(n.anchor,r.anchor)||0!=xa(n.head,r.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new K(U(this.ranges[t].anchor),U(this.ranges[t].head));return new G(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(xa(t,r.from())>=0&&xa(e,r.to())<=0)return n}return-1}},K.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return V(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var wa,Ca,Ta,Sa={left:0,right:0,top:0,bottom:0},ka=null,La=0,Ea=null,Na=0,Aa=0,$a=null;ea?$a=-.53:Qo?$a=15:ia?$a=-.7:aa&&($a=-1/3);var Ma,Da=null,ja=e.changeEnd=function(e){return e.text?ba(e.from.line+e.text.length-1,po(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),Ln(this),Tn(this)},setOption:function(e,t){var n=this.options,r=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,_a.hasOwnProperty(e)&&un(this,_a[e])(this,t,r))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||"string"!=typeof t[n]&&t[n].name==e)return t.splice(n,1),!0},addOverlay:dn(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,mn(this)}),removeOverlay:dn(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void mn(this)}}),indentLine:dn(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),tt(this.doc,e)&&wr(this,e,t,n)}),indentSelection:dn(function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(wr(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&br(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;n>l;++l)wr(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&at(this.doc,r,new K(o,c[r].to()))}}}),getTokenAt:function(e,t){var n=this.doc;e=Z(n,e);for(var r=kt(this,e.line,t),i=this.doc.mode,o=Mi(n,e.line),a=new Ka(o.text,this.options.tabSize);a.pos<e.ch&&!a.eol();){a.start=a.pos;var s=fi(i,a,r)}return{start:a.start,end:a.pos,string:a.current(),type:s||null,state:r}},getTokenTypeAt:function(e){e=Z(this.doc,e);var t,n=mi(this,Mi(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!Ba.hasOwnProperty(t))return Ba;var r=Ba[t],i=this.getModeAt(e);if("string"==typeof i[t])r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=r[i[t][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var o=0;o<r._global.length;o++){var s=r._global[o];s.pred(i,this)&&-1==ho(n,s.val)&&n.push(s.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=J(n,null==e?n.first+n.size-1:e),kt(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?Z(this.doc,e):e?r.from():r.to(),Vt(this,n,t||"page")},charCoords:function(e,t){return Ut(this,Z(this.doc,e),t||"page")},coordsChar:function(e,t){return e=qt(this,e,t||"page"),Kt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=qt(this,{top:e,left:0},t||"page").top,Hi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=Mi(this.doc,e);return zt(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-Ii(i):0)},defaultTextHeight:function(){return Qt(this.display)},defaultCharWidth:function(){return Jt(this.display)
},setGutterMarker:dn(function(e,t,n){return Cr(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&xo(r)&&(e.gutterMarkers=null),!0})}),clearGutter:dn(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,gn(t,r,"gutter"),xo(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:dn(function(e,t,n){return si(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!tt(this.doc,e))return null;var t=e;if(e=Mi(this.doc,e),!e)return null}else{var t=_i(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o=this.display;e=Vt(this,Z(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&gr(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:dn(Gn),triggerOnKeyPress:dn(Qn),triggerOnKeyUp:Yn,execCommand:function(e){return qa.hasOwnProperty(e)?qa[e](this):void 0},findPosH:function(e,t,n,r){var i=1;0>t&&(i=-1,t=-t);for(var o=0,a=Z(this.doc,e);t>o&&(a=Sr(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:dn(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Sr(n.doc,r.head,e,t,n.options.rtlMoveVisually):0>e?r.from():r.to()},ys)}),deleteH:dn(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Tr(this,function(n){var i=Sr(r,n.head,e,t,!1);return 0>e?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=1,o=r;0>t&&(i=-1,t=-t);for(var a=0,s=Z(this.doc,e);t>a;++a){var l=Vt(this,s,"div");if(null==o?o=l.left:l.left=o,s=kr(this,l,i,n),s.hitSide)break}return s},moveV:dn(function(e,t){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return 0>e?a.from():a.to();var s=Vt(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=kr(n,s,e,t);return"page"==t&&a==r.sel.primary()&&yr(n,null,Ut(n,l,"div").top-s.top),l},ys),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ao(this.display.cursorDiv,"CodeMirror-overwrite"):No(this.display.cursorDiv,"CodeMirror-overwrite"),fs(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return Lo()==this.display.input},scrollTo:dn(function(e,t){(null!=e||null!=t)&&xr(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=hs;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:dn(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ba(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)xr(this),this.curOp.scrollToPos=e;else{var n=vr(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:dn(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var r=this;null!=e&&(r.display.wrapper.style.width=n(e)),null!=t&&(r.display.wrapper.style.height=n(t)),r.options.lineWrapping&&Ft(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){gn(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,fs(r,"refresh",this)}),operation:function(e){return cn(this,e)},refresh:dn(function(){var e=this.display.cachedTextHeight;mn(this),this.curOp.forceUpdate=!0,Rt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==e||Math.abs(e-Qt(this.display))>.5)&&a(this),fs(this,"refresh",this)}),swapDoc:dn(function(e){var t=this.doc;return t.cm=null,$i(this,e),Rt(this),kn(this),this.scrollTo(e.scrollLeft,e.scrollTop),ro(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},lo(e);var Oa=e.defaults={},_a=e.optionHandlers={},Ha=e.Init={toString:function(){return"CodeMirror.Init"}};Er("value","",function(e,t){e.setValue(t)},!0),Er("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),Er("indentUnit",2,n,!0),Er("indentWithTabs",!1),Er("smartIndent",!0),Er("tabSize",4,function(e){r(e),Rt(e),mn(e)},!0),Er("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),Er("specialCharPlaceholder",bi,function(e){e.refresh()},!0),Er("electricChars",!0),Er("rtlMoveVisually",!pa),Er("wholeLineUpdateBefore",!0),Er("theme","default",function(e){l(e),c(e)},!0),Er("keyMap","default",s),Er("extraKeys",null),Er("lineWrapping",!1,i,!0),Er("gutters",[],function(e){h(e.options),c(e)},!0),Er("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?C(e.display)+"px":"0",e.refresh()},!0),Er("coverGutterNextToScrollbar",!1,v,!0),Er("lineNumbers",!1,function(e){h(e.options),c(e)},!0),Er("firstLineNumber",1,c,!0),Er("lineNumberFormatter",function(e){return e},c,!0),Er("showCursorWhenSelecting",!1,yt,!0),Er("resetSelectionOnContextMenu",!0),Er("readOnly",!1,function(e,t){"nocursor"==t?(Zn(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||kn(e))}),Er("disableInput",!1,function(e,t){t||kn(e)},!0),Er("dragDrop",!0),Er("cursorBlinkRate",530),Er("cursorScrollMargin",0),Er("cursorHeight",1,yt,!0),Er("singleCursorHeightPerLine",!0,yt,!0),Er("workTime",100),Er("workDelay",100),Er("flattenSpans",!0,r,!0),Er("addModeClass",!1,r,!0),Er("pollInterval",100),Er("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Er("historyEventDelay",1250),Er("viewportMargin",10,function(e){e.refresh()},!0),Er("maxHighlightLength",1e4,r,!0),Er("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Er("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Er("autofocus",null);var Ia=e.modes={},Pa=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}Ia[t]=n},e.defineMIME=function(e,t){Pa[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Pa.hasOwnProperty(t))t=Pa[t];else if(t&&"string"==typeof t.name&&Pa.hasOwnProperty(t.name)){var n=Pa[t.name];"string"==typeof n&&(n={name:n}),t=go(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=Ia[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(Fa.hasOwnProperty(n.name)){var o=Fa[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Fa=e.modeExtensions={};e.extendMode=function(e,t){var n=Fa.hasOwnProperty(e)?Fa[e]:Fa[e]={};vo(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){is.prototype[e]=t},e.defineOption=Er;var Ra=[];e.defineInitHook=function(e){Ra.push(e)};var Ba=e.helpers={};e.registerHelper=function(t,n,r){Ba.hasOwnProperty(t)||(Ba[t]=e[t]={_global:[]}),Ba[t][n]=r},e.registerGlobalHelper=function(t,n,r,i){e.registerHelper(t,n,i),Ba[t]._global.push({pred:r,val:i})};var Wa=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},za=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var qa=e.commands={selectAll:function(e){e.setSelection(ba(e.firstLine(),0),ba(e.lastLine()),gs)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),gs)},killLine:function(e){Tr(e,function(t){if(t.empty()){var n=Mi(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:ba(t.head.line+1,0)}:{from:t.head,to:ba(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Tr(e,function(t){return{from:ba(t.from().line,0),to:Z(e.doc,ba(t.to().line+1,0))}})},delLineLeft:function(e){Tr(e,function(e){return{from:ba(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Tr(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){Tr(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(ba(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(ba(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return zo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Uo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return qo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},ys)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},ys)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Uo(e,t.head):r},ys)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=bs(e.getLine(o.line),o.ch,r);t.push(new Array(r-a%r+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){cn(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++){var i=t[r].head,o=Mi(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new ba(i.line,i.ch-1)),i.ch>0)i=new ba(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),ba(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=Mi(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+"\n"+a.charAt(a.length-1),ba(i.line-1,a.length-1),ba(i.line,1),"+transpose")}n.push(new K(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){cn(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),br(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Ua=e.keyMap={};Ua.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ua.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ua.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Ua.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Ua["default"]=fa?Ua.macDefault:Ua.pcDefault;var Va=e.lookupKey=function(e,t,n){function r(t){t=Nr(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0;a<o.length;++a){var s=r(o[a]);if(s)return s}return!1}for(var i=0;i<t.length;++i){var o=r(t[i]);if(o)return"stop"!=o}},Xa=e.isModifierKey=function(e){var t=_s[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},Ga=e.keyName=function(e,t){if(oa&&34==e.keyCode&&e["char"])return!1;var n=_s[e.keyCode];return null==n||e.altGraphKey?!1:(e.altKey&&(n="Alt-"+n),(ma?e.metaKey:e.ctrlKey)&&(n="Ctrl-"+n),(ma?e.ctrlKey:e.metaKey)&&(n="Cmd-"+n),!t&&e.shiftKey&&(n="Shift-"+n),n)};e.fromTextArea=function(t,n){function r(){t.value=c.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var i=Lo();n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(us(t.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var s=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=s}}catch(l){}}t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c.save=r,c.getTextArea=function(){return t},c.toTextArea=function(){r(),t.parentNode.removeChild(c.getWrapperElement()),t.style.display="",t.form&&(ds(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=a))},c};var Ka=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Ka.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=bs(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?bs(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bs(this.string,null,this.tabSize)-(this.lineStart?bs(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Ya=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};lo(Ya),Ya.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Zt(e),so(this,"clear")){var n=this.find();n&&ro(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=_r(a.markedSpans,this);e&&!this.collapsed?gn(e,_i(a),"text"):e&&(null!=s.to&&(i=_i(a)),null!=s.from&&(r=_i(a))),a.markedSpans=Hr(a.markedSpans,s),null==s.from&&this.collapsed&&!ri(this.doc,a)&&e&&Oi(a,Qt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=Zr(this.lines[o]),c=f(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&mn(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&pt(e.doc)),e&&ro(e,"markerCleared",e,this),t&&tn(e),this.parent&&this.parent.clear()}},Ya.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=_r(o.markedSpans,this);if(null!=a.from&&(n=ba(t?o:_i(o),a.from),-1==e))return n;if(null!=a.to&&(r=ba(t?o:_i(o),a.to),1==e))return r}return n&&{from:n,to:r}},Ya.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&cn(n,function(){var r=e.line,i=_i(e.line),o=jt(n,i);if(o&&(Pt(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!ri(t.doc,r)&&null!=t.height){var a=t.height;t.height=null;var s=ai(t)-a;s&&Oi(r,r.height+s)}})},Ya.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ho(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ya.prototype.detachLine=function(e){if(this.lines.splice(ho(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Qa=0,Ja=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};lo(Ja),Ja.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ro(this,"clear")}},Ja.prototype.find=function(e,t){return this.primary.find(e,t)};var Za=e.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};lo(Za),Za.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=_i(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=ai(this);cn(e,function(){oi(e,n,-o),gn(e,r,"widget"),Oi(n,Math.max(0,n.height-o))})}},Za.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=ai(this)-e;r&&cn(t,function(){t.curOp.forceUpdate=!0,oi(t,n,r),Oi(n,n.height+r)})};var es=e.Line=function(e,t,n){this.text=e,Ur(this,t),this.height=n?n(this):1};lo(es),es.prototype.lineNo=function(){return _i(this)};var ts={},ns={};Ei.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;r>n;++n){var i=this.lines[n];this.height-=i.height,ci(i),ro(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},Ni.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(i>e){var o=Math.min(t,i-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ei))){var s=[];this.collapse(s),this.children=[new Ei(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var a=i.lines.splice(i.lines.length-25,25),s=new Ei(a);i.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Ni(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=ho(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new Ni(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var a=Math.min(t,o-e);if(i.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var rs=0,is=e.Doc=function(e,t,n){if(!(this instanceof is))return new is(e,t,n);null==n&&(n=0),Ni.call(this,[new Ei([new es("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=ba(n,0);this.sel=Q(r),this.history=new Fi(null),this.id=++rs,this.modeOption=t,"string"==typeof e&&(e=Ms(e)),Li(this,{from:r,to:r,text:e}),ut(this,Q(r),gs)};is.prototype=go(Ni.prototype,{constructor:is,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ji(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:fn(function(e){var t=ba(this.first,0),n=this.first+this.size-1;sr(this,{from:t,to:ba(n,Mi(this,n).text.length),text:Ms(e),origin:"setValue"},!0),ut(this,Q(t))}),replaceRange:function(e,t,n,r){t=Z(this,t),n=n?Z(this,n):t,pr(this,e,t,n,r)},getRange:function(e,t,n){var r=Di(this,Z(this,e),Z(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return tt(this,e)?Mi(this,e):void 0},getLineNumber:function(e){return _i(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Mi(this,e)),Zr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Z(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:fn(function(e,t,n){st(this,Z(this,"number"==typeof e?ba(e,t||0):e),null,n)}),setSelection:fn(function(e,t,n){st(this,Z(this,e),Z(this,t||e),n)}),extendSelection:fn(function(e,t,n){it(this,Z(this,e),t&&Z(this,t),n)}),extendSelections:fn(function(e,t){ot(this,nt(this,e,t))}),extendSelectionsBy:fn(function(e,t){ot(this,mo(this.sel.ranges,e),t)}),setSelections:fn(function(e,t,n){if(e.length){for(var r=0,i=[];r<e.length;r++)i[r]=new K(Z(this,e[r].anchor),Z(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ut(this,Y(i,t),n)}}),addSelection:fn(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new K(Z(this,e),Z(this,t||e))),ut(this,Y(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Di(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Di(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:fn(function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:Ms(e[o]),origin:n}}for(var s=t&&"end"!=t&&or(this,r,t),o=r.length-1;o>=0;o--)sr(this,r[o]);s?ct(this,s):this.cm&&br(this.cm)}),undo:fn(function(){cr(this,"undo")}),redo:fn(function(){cr(this,"redo")}),undoSelection:fn(function(){cr(this,"undo",!0)}),redoSelection:fn(function(){cr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Fi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Yi(this.history.done),undone:Yi(this.history.undone)}},setHistory:function(e){var t=this.history=new Fi(this.history.maxGeneration);t.done=Yi(e.done.slice(0),null,!0),t.undone=Yi(e.undone.slice(0),null,!0)},addLineClass:fn(function(e,t,n){return Cr(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0})}),removeLineClass:fn(function(e,t,n){return Cr(this,e,"class",function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),markText:function(e,t,n){return Ar(this,Z(this,e),Z(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=Z(this,e),Ar(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Z(this,e);var t=[],n=Mi(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=Z(this,e),t=Z(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];i==e.line&&e.ch>l.to||null==l.from&&i!=e.line||i==t.line&&l.from>t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),Z(this,ba(n,t))},indexFromPos:function(e){e=Z(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new is(ji(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new is(ji(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Dr(r,Mr(this)),r},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),jr(Mr(this));break}}if(t.history==this.history){var i=[t.id];Ai(t,function(e){i.push(e.id)},!0),t.history=new Fi(null),t.history.done=Yi(this.history.done,i),t.history.undone=Yi(this.history.undone,i)}},iterLinkedDocs:function(e){Ai(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),is.prototype.eachLine=is.prototype.iter;var os="iter insert remove copy getEditor".split(" ");for(var as in is.prototype)is.prototype.hasOwnProperty(as)&&ho(os,as)<0&&(e.prototype[as]=function(e){return function(){return e.apply(this.doc,arguments)}}(is.prototype[as]));lo(is);var ss=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},ls=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},cs=e.e_stop=function(e){ss(e),ls(e)},us=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},ds=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},fs=e.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},ps=null,hs=30,ms=e.Pass={toString:function(){return"CodeMirror.Pass"}},gs={scroll:!1},vs={origin:"*mouse"},ys={origin:"+move"};co.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var bs=e.countColumn=function(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=r||0,a=i||0;;){var s=e.indexOf("	",o);if(0>s||s>=t)return a+(t-o);a+=s-o,a+=n-a%n,o=s+1}},xs=[""],ws=function(e){e.select()};ua?ws=function(e){e.selectionStart=0,e.selectionEnd=e.value.length
}:ea&&(ws=function(e){try{e.select()}catch(t){}}),[].indexOf&&(ho=function(e,t){return e.indexOf(t)}),[].map&&(mo=function(e,t){return e.map(t)});var Cs,Ts=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ss=e.isWordChar=function(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Ts.test(e))},ks=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Cs=document.createRange?function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},ea&&11>ta&&(Lo=function(){try{return document.activeElement}catch(e){return document.body}});var Ls,Es,Ns,As=!1,$s=function(){if(ea&&9>ta)return!1;var e=Co("div");return"draggable"in e||"dragDrop"in e}(),Ms=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ds=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},js=function(){var e=Co("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Os=null,_s={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=_s,function(){for(var e=0;10>e;e++)_s[e+48]=_s[e+96]=String(e);for(var e=65;90>=e;e++)_s[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)_s[e+111]=_s[e+63235]="F"+e}();var Hs,Is=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?r.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r,u=n.length,d=[],f=0;u>f;++f)d.push(r=e(n.charCodeAt(f)));for(var f=0,p=c;u>f;++f){var r=d[f];"m"==r?d[f]=p:p=r}for(var f=0,h=c;u>f;++f){var r=d[f];"1"==r&&"r"==h?d[f]="n":a.test(r)&&(h=r,"r"==r&&(d[f]="R"))}for(var f=1,p=d[0];u-1>f;++f){var r=d[f];"+"==r&&"1"==p&&"1"==d[f+1]?d[f]="1":","!=r||p!=d[f+1]||"1"!=p&&"n"!=p||(d[f]=p),p=r}for(var f=0;u>f;++f){var r=d[f];if(","==r)d[f]="N";else if("%"==r){for(var m=f+1;u>m&&"%"==d[m];++m);for(var g=f&&"!"==d[f-1]||u>m&&"1"==d[m]?"1":"N",v=f;m>v;++v)d[v]=g;f=m-1}}for(var f=0,h=c;u>f;++f){var r=d[f];"L"==h&&"1"==r?d[f]="L":a.test(r)&&(h=r)}for(var f=0;u>f;++f)if(o.test(d[f])){for(var m=f+1;u>m&&o.test(d[m]);++m);for(var y="L"==(f?d[f-1]:c),b="L"==(u>m?d[m]:c),g=y||b?"L":"R",v=f;m>v;++v)d[v]=g;f=m-1}for(var x,w=[],f=0;u>f;)if(s.test(d[f])){var C=f;for(++f;u>f&&s.test(d[f]);++f);w.push(new t(0,C,f))}else{var T=f,S=w.length;for(++f;u>f&&"L"!=d[f];++f);for(var v=T;f>v;)if(l.test(d[v])){v>T&&w.splice(S,0,new t(1,T,v));var k=v;for(++v;f>v&&l.test(d[v]);++v);w.splice(S,0,new t(2,k,v)),T=v}else++v;f>T&&w.splice(S,0,new t(1,T,f))}return 1==w[0].level&&(x=n.match(/^\s+/))&&(w[0].from=x[0].length,w.unshift(new t(0,0,x[0].length))),1==po(w).level&&(x=n.match(/\s+$/))&&(po(w).to-=x[0].length,w.push(new t(0,u-x[0].length,u))),w[0].level!=po(w).level&&w.push(new t(w[0].level,u,u)),w}}();return e.version="4.4.1",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function n(e){return e.scopes[e.scopes.length-1]}var r=t(["and","or","not","is"]),i=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],o=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],a={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},s={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};e.registerHelper("hintWords","python",i.concat(o)),e.defineMode("python",function(l,c){function u(e,t){if(e.sol()&&"py"==n(t).type){var r=n(t).offset;if(e.eatSpace()){var i=e.indentation();return i>r?p(e,t,"py"):r>i&&h(e,t)&&(t.errorToken=!0),null}var o=d(e,t);return r>0&&h(e,t)&&(o+=" "+g),o}return d(e,t)}function d(e,t){if(e.eatSpace())return null;var n=e.peek();if("#"==n)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var i=!1;if(e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),e.match(/^\d+\.\d*/)&&(i=!0),e.match(/^\.\d+/)&&(i=!0),i)return e.eat(/J/i),"number";var o=!1;if(e.match(/^0x[0-9a-f]+/i)&&(o=!0),e.match(/^0b[01]+/i)&&(o=!0),e.match(/^0o[0-7]+/i)&&(o=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),o=!0),e.match(/^0(?![\dx])/i)&&(o=!0),o)return e.eat(/L/i),"number"}return e.match(L)?(t.tokenize=f(e.current()),t.tokenize(e,t)):e.match(x)||e.match(b)?null:e.match(y)||e.match(w)||e.match(r)?"operator":e.match(v)?null:e.match(E)?"keyword":e.match(N)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(C)?"def"==t.lastToken||"class"==t.lastToken?"def":"variable":(e.next(),g)}function f(e){function t(t,i){for(;!t.eol();)if(t.eatWhile(/[^'"\\]/),t.eat("\\")){if(t.next(),n&&t.eol())return r}else{if(t.match(e))return i.tokenize=u,r;t.eat(/['"]/)}if(n){if(c.singleLineStringErrors)return g;i.tokenize=u}return r}for(;"rub".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var n=1==e.length,r="string";return t.isString=!0,t}function p(e,t,r){var i=0,o=null;if("py"==r)for(;"py"!=n(t).type;)t.scopes.pop();i=n(t).offset+("py"==r?l.indentUnit:T),"py"==r||e.match(/^(\s|#.*)*$/,!1)||(o=e.column()+1),t.scopes.push({offset:i,type:r,align:o})}function h(e,t){for(var r=e.indentation();n(t).offset>r;){if("py"!=n(t).type)return!0;t.scopes.pop()}return n(t).offset!=r}function m(e,t){var r=t.tokenize(e,t),i=e.current();if("."==i)return r=e.match(C,!1)?null:g,null==r&&"meta"==t.lastStyle&&(r="meta"),r;if("@"==i)return c.version&&3==parseInt(c.version,10)?e.match(C,!1)?"meta":"operator":e.match(C,!1)?"meta":g;"variable"!=r&&"builtin"!=r||"meta"!=t.lastStyle||(r="meta"),("pass"==i||"return"==i)&&(t.dedent+=1),"lambda"==i&&(t.lambda=!0),":"!=i||t.lambda||"py"!=n(t).type||p(e,t,"py");var o=1==i.length?"[({".indexOf(i):-1;if(-1!=o&&p(e,t,"])}".slice(o,o+1)),o="])}".indexOf(i),-1!=o){if(n(t).type!=i)return g;t.scopes.pop()}return t.dedent>0&&e.eol()&&"py"==n(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),r}var g="error",v=c.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),y=c.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),b=c.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),x=c.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))");if(c.version&&3==parseInt(c.version,10))var w=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!@]"),C=c.identifiers||new RegExp("^[_A-Za-z\xa1-\uffff][_A-Za-z0-9\xa1-\uffff]*");else var w=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),C=c.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*");var T=c.hangingIndent||l.indentUnit,S=i,k=o;if(void 0!=c.extra_keywords&&(S=S.concat(c.extra_keywords)),void 0!=c.extra_builtins&&(k=k.concat(c.extra_builtins)),c.version&&3==parseInt(c.version,10)){S=S.concat(s.keywords),k=k.concat(s.builtins);var L=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{S=S.concat(a.keywords),k=k.concat(a.builtins);var L=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var E=t(S),N=t(k),A={startState:function(e){return{tokenize:u,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=!1);var r=m(e,t);t.lastStyle=r;var i=e.current();return i&&r&&(t.lastToken=i),e.eol()&&t.lambda&&(t.lambda=!1),n?r+" "+g:r},indent:function(t,r){if(t.tokenize!=u)return t.tokenize.isString?e.Pass:0;var i=n(t),o=r&&r.charAt(0)==i.type;return null!=i.align?i.align-(o?1:0):o&&t.scopes.length>1?t.scopes[t.scopes.length-2].offset:i.offset},lineComment:"#",fold:"indent"};return A}),e.defineMIME("text/x-python","python");var l=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:l("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return 1>(t/=i/2)?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return 1>(t/=i/2)?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return 1>(t/=i/2)?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return 1>(t/=i/2)?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return 0==t?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return 0==t?n:t==i?n+r:1>(t/=i/2)?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return 1>(t/=i/2)?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){e=1.70158;var o=0,a=r;return 0==t?n:1==(t/=i)?n+r:(o||(o=.3*i),a<Math.abs(r)?(a=r,e=o/4):e=o/(2*Math.PI)*Math.asin(r/a),-(a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-e)*Math.PI/o))+n)},easeOutElastic:function(e,t,n,r,i){e=1.70158;var o=0,a=r;return 0==t?n:1==(t/=i)?n+r:(o||(o=.3*i),a<Math.abs(r)?(a=r,e=o/4):e=o/(2*Math.PI)*Math.asin(r/a),a*Math.pow(2,-10*t)*Math.sin(2*(t*i-e)*Math.PI/o)+r+n)},easeInOutElastic:function(e,t,n,r,i){e=1.70158;var o=0,a=r;return 0==t?n:2==(t/=i/2)?n+r:(o||(o=.3*i*1.5),a<Math.abs(r)?(a=r,e=o/4):e=o/(2*Math.PI)*Math.asin(r/a),1>t?-.5*a*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-e)*Math.PI/o)+n:a*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-e)*Math.PI/o)*.5+r+n)},easeInBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*(t/=i)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),1>(t/=i/2)?r/2*t*t*(((o*=1.525)+1)*t-o)+n:r/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?7.5625*r*t*t+n:2/2.75>t?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return i/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,r,i)+n:.5*jQuery.easing.easeOutBounce(e,2*t-i,0,r,i)+.5*r+n}}),function(e){function t(){}function n(e){o=[e]}function r(e,t,n){return e&&e.apply(t.context||t,n)}function i(i){function A(e){X++||(G(),W&&(S[q]={s:[e]}),P&&(e=P.apply(i,[e])),r(_,i,[e,b,i]),r(I,i,[i,b]))}function $(e){X++||(G(),W&&e!=x&&(S[q]=e),r(H,i,[i,e]),r(I,i,[i,e]))}i=e.extend({},L,i);var M,D,j,O,_=i.success,H=i.error,I=i.complete,P=i.dataFilter,F=i.callbackParameter,R=i.callback,B=i.cache,W=i.pageCache,z=i.charset,q=i.url,U=i.data,V=i.timeout,X=0,G=t;return C&&C(function(e){e.done(_).fail(H),_=e.resolve,H=e.reject}).promise(i),i.abort=function(){!X++&&G()},!1===r(i.beforeSend,i,[i])||X?i:(q=q||l,U=U?"string"==typeof U?U:e.param(U,i.traditional):l,q+=U?(/\?/.test(q)?"&":"?")+U:l,F&&(q+=(/\?/.test(q)?"&":"?")+encodeURIComponent(F)+"=?"),B||W||(q+=(/\?/.test(q)?"&":"?")+"_"+(new Date).getTime()+"="),q=q.replace(/=\?(&|$)/,"="+R+"$1"),W&&(M=S[q])?M.s?A(M.s[0]):$(M):(w[R]=n,D=e(y)[0],D.id=d+k++,z&&(D[s]=z),E&&11.6>E.version()?(j=e(y)[0]).text="document.getElementById('"+D.id+"')."+p+"()":D[a]=a,N&&(D.htmlFor=D.id,D.event=f),D[h]=D[p]=D[m]=function(e){if(!D[g]||!/i/.test(D[g])){try{D[f]&&D[f]()}catch(t){}e=o,o=0,e?A(e[0]):$(c)}},D.src=q,G=function(){O&&clearTimeout(O),D[m]=D[h]=D[p]=null,T[v](D),j&&T[v](j)},T[u](D,F=T.firstChild),j&&T[u](j,F),O=V>0&&setTimeout(function(){$(x)},V)),i)}var o,a="async",s="charset",l="",c="error",u="insertBefore",d="_jqjsp",f="onclick",p="on"+c,h="onload",m="onreadystatechange",g="readyState",v="removeChild",y="<script>",b="success",x="timeout",w=window,C=e.Deferred,T=e("head")[0]||document.documentElement,S={},k=0,L={callback:d,url:location.href},E=w.opera,N=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;i.setup=function(t){e.extend(L,t)},e.jsonp=i}(jQuery),this.JSON||(this.JSON={}),function(){function d(e){return 10>e?"0"+e:e}function a(t){return c.lastIndex=0,c.test(t)?'"'+t.replace(c,function(t){var n=e[t];return"string"==typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function f(e,t){var n,r,i,o,l,c=g,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof s&&(u=s.call(t,e,u)),typeof u){case"string":return a(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(g+=h,l=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)l[n]=f(n,u)||"null";return i=0===l.length?"[]":g?"[\n"+g+l.join(",\n"+g)+"\n"+c+"]":"["+l.join(",")+"]",g=c,i}if(s&&"object"==typeof s)for(o=s.length,n=0;o>n;n+=1)r=s[n],"string"==typeof r&&(i=f(r,u))&&l.push(a(r)+(g?": ":":")+i);else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=f(r,u))&&l.push(a(r)+(g?": ":":")+i);return i=0===l.length?"{}":g?"{\n"+g+l.join(",\n"+g)+"\n"+c+"}":"{"+l.join(",")+"}",g=c,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+d(this.getUTCMonth()+1)+"-"+d(this.getUTCDate())+"T"+d(this.getUTCHours())+":"+d(this.getUTCMinutes())+":"+d(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,h,e={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(h=g="","number"==typeof n)for(r=0;n>r;r+=1)h+=" ";else"string"==typeof n&&(h=n);if((s=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return f("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(a,e){function h(t,n){var r,i,o=t[n];if(o&&"object"==typeof o)for(r in o)Object.hasOwnProperty.call(o,r)&&(i=h(o,r),void 0!==i?o[r]=i:delete o[r]);return e.call(t,n,o)}var c;if(a=String(a),b.lastIndex=0,b.test(a)&&(a=a.replace(b,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),"function"==typeof e?h({"":c},""):c;throw new SyntaxError("JSON.parse")})}(),function(e){e.tools=e.tools||{version:"2013-02-15"};var t,n,r,i,o,a=e.tools.expose={conf:{maskId:"exposeMask",loadSpeed:"slow",closeSpeed:"fast",zIndex:9998,opacity:.8,startOpacity:0,color:"#fff"}};e.mask={load:function(s,l){return r?this:(s=s||i,i=s=e.extend(e.extend({},a.conf),s),t=e("#"+s.maskId),t.length||(t=e("<div/>").attr("id",s.maskId),e("body").append(t)),t.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"block",opacity:s.opacity,zIndex:s.zIndex,backgroundColor:s.color}),l&&l.length&&(o=l.eq(0).css("zIndex"),n=l.css({zIndex:Math.max(s.zIndex+1,"auto"==o?0:o)})),r=!0,this)},close:function(){return r&&(t.fadeOut(i.closeSpeed,function(){n&&n.css({zIndex:o})}),r=!1),this}},e.fn.mask=function(t){return e.mask.load(t),this},e.fn.expose=function(t){return e.mask.load(t,this),this}}(jQuery),!function(e){function t(){this.timer=this.documentTitle=this.instance=this.assemblyId=null,this._options={},this.uploads=[],this.results={},this.pollStarted=this.ended=null,this.seq=this.pollRetries=0,this.started=!1,this.params=this.assembly=null,this.lastPoll=this.bytesReceivedBefore=0,this.$modal=this.$iframe=this.$fileClones=this.$files=this.$form=this.$params=null,this._clockseq=this._lastNSecs=this._lastMSecs=0}var n="https:"==document.location.protocol?"https://":"http://",r=n+"api2.transloadit.com/",i={service:r,assets:n+"assets.transloadit.com/",onFileSelect:function(){},onStart:function(){},onProgress:function(){},onUpload:function(){},onResult:function(){},onCancel:function(){},onError:function(){},onSuccess:function(){},interval:2500,pollTimeout:8e3,poll404Retries:15,pollConnectionRetries:3,wait:!1,processZeroFiles:!0,triggerUploadOnFileSelection:!1,autoSubmit:!0,modal:!0,exclude:"",fields:!1,params:null,signature:null,region:"us-east-1",debug:!0},o=!1;e.fn.transloadit=function(){var n,r,i=Array.prototype.slice.call(arguments);if(0!==this.length){if(!(1<this.length)){if((1==i.length&&"object"==typeof i[0]||void 0===i[0])&&i.unshift("init"),n=i.shift(),"init"==n?(r=new t,i.unshift(this),this.data("transloadit.uploader",r)):r=this.data("transloadit.uploader"),!r)throw Error("Element is not initialized for transloadit!");return n=r[n].apply(r,i),void 0===n?this:n}this.each(function(){e.fn.transloadit.apply(e(this),i)})}},t.prototype.init=function(t,n){this.$form=t,this.options(e.extend({},i,n||{}));var r=this;t.bind("submit.transloadit",function(){return r.validate(),r.detectFileInputs(),r._options.processZeroFiles||0!==r.$files.length?r.getBoredInstance():r.submitForm(),!1}),this._options.triggerUploadOnFileSelection&&t.on("change",'input[type="file"]',function(){t.trigger("submit.transloadit")}),t.on("change",'input[type="file"]',function(){r._options.onFileSelect(e(this).val(),e(this))}),this.includeCss()},t.prototype.getBoredInstance=function(){function t(){e.jsonp({url:o,timeout:i._options.pollTimeout,callbackParameter:"callback",success:function(e){e.error?(i.ended=!0,e.url=o,i.renderError(e),i._options.onError(e)):(i.instance=e.api2_host,i.start())},error:function(e,s){if(a&&i._options.service===r&&"https://"!==n)a=!1,i._findBoredInstanceUrl(function(e,r){e?(i.ended=!0,e={error:"BORED_INSTANCE_ERROR",message:"Could not find a bored instance. "+e.message},i.renderError(e),i._options.onError(e)):(o=n+"api2."+r+"/instances/bored",t())});else{i.ended=!0;var l={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+s,url:o};i.renderError(l),i._options.onError(l)}}})}var i=this;this.instance=null;var o=this._options.service+"instances/bored",a=!0;t(),this._options.modal&&this.showModal()},t.prototype._findBoredInstanceUrl=function(t){var n=this;e.ajax({url:"http://infra-"+this._options.region+".transloadit.com.s3.amazonaws.com/cached_instances.json",datatype:"json",timeout:3e3,success:function(e){e=n._shuffle(e.uploaders),n._findResponsiveInstance(e,0,t)},error:function(){t(Error("Could not query S3 for cached uploaders"))}})},t.prototype._findResponsiveInstance=function(t,r,i){if(!t[r])return i(Error("No responsive uploaders"));var o=this,a=t[r];e.jsonp({url:n+a,timeout:3e3,callbackParameter:"callback",success:function(){i(null,a)},error:function(){o._findResponsiveInstance(t,r+1,i)}})},t.prototype._shuffle=function(e){for(var t,n=[],r=0;r<e.length;r++)t=Math.floor(Math.random()*(r+1)),n[r]=n[t],n[t]=e[r];return n},t.prototype.start=function(){var t=this;this.ended=this.started=!1,this.seq=this.pollRetries=this.bytesReceivedBefore=0,this.uploads=[],this.results={},this.assemblyId=this._genUuid(),this.$fileClones=e().not(document),this.$files.each(function(){var n=e(this).clone(!0);t.$fileClones=t.$fileClones.add(n),n.insertAfter(this)}),this.$iframe=e('<iframe id="transloadit-'+this.assemblyId+'" name="transloadit-'+this.assemblyId+'"/>').appendTo("body").hide();var r=n+this.instance+"/assemblies/"+this.assemblyId+"?redirect=false";if(this._options.formData){this._options.formData.append("params",this.$form.find("input[name=params]").val());var i=new XMLHttpRequest;i.open("POST",r),i.send(this._options.formData)}else{this.$uploadForm=e('<form enctype="multipart/form-data" />').attr("action",r).attr("target","transloadit-"+this.assemblyId).attr("method","POST").append(this.$files).appendTo("body").hide(),r="[name=params], [name=signature]",!0===this._options.fields?r="*":"string"==typeof this._options.fields&&(r+=", "+this._options.fields);var o=this.$form.find(":input[type!=file]").filter(r),r=o.filter("select"),o=o.filter(function(){return!e(this).is("select")}),o=o.filter("[type!=submit]"),o=this.clone(o);if(this._options.params&&!this.$params&&(o=o.add('<input name="params" value=\''+JSON.stringify(this._options.params)+"'>")),this._options.signature&&(o=o.add('<input name="signature" value=\''+this._options.signature+"'>")),"object"==typeof this._options.fields)for(i in this._options.fields)o=o.add('<input name="'+i+"\" value='"+this._options.fields[i]+"'>");o.prependTo(this.$uploadForm),r.each(function(){e('<input type="hidden"/>').attr("name",e(this).attr("name")).attr("value",e(this).val()).prependTo(t.$uploadForm)}),this.$uploadForm.submit()}this.lastPoll=+new Date,setTimeout(function(){t._poll()},300)},t.prototype.clone=function(t){var n=t.clone();t=t.filter("textarea");for(var r=n.filter("textarea"),i=0;i<t.length;++i)e(r[i]).val(e(t[i]).val());return n},t.prototype.detectFileInputs=function(){var e=this.$form.find("input[type=file]").not(this._options.exclude);this._options.processZeroFiles||(e=e.filter(function(){return""!==this.value})),this.$files=e},t.prototype.validate=function(){if(this._options.params)this.params=this._options.params;else{var e=this.$form.find("input[name=params]");if(!e.length)return void alert("Could not find input[name=params] in your form.");this.$params=e;try{this.params=JSON.parse(e.val())}catch(t){return void alert("Error: input[name=params] seems to contain invalid JSON.")}}this.params.redirect_url?this.$form.attr("action",this.params.redirect_url):this._options.autoSubmit&&this.$form.attr("action")==this._options.service+"assemblies"&&alert("Error: input[name=params] does not include a redirect_url")},t.prototype._poll=function(t){var r=this;if(!this.ended){var i=/(mozilla)(?:.*? rv:([\w.]+))?/.exec(navigator.userAgent),i=i&&i[1];this.documentTitle=document.title,i&&!this.documentTitle&&(document.title="Loading..."),this.pollStarted=+new Date;var i=this.instance.replace(/\.transloadit\.com/,"")+"-status.transloadit.com",o=n+i+"/assemblies/"+this.assemblyId+(t||"?seq="+this.seq);e.jsonp({url:o,timeout:r._options.pollTimeout,callbackParameter:"callback",success:function(e){if(!r.ended)if(r.assembly=e,"ASSEMBLY_NOT_FOUND"==e.error)r.pollRetries++,r.pollRetries>r._options.poll404Retries?(document.title=r.documentTitle,r.ended=!0,r.renderError(e),r._options.onError(e)):setTimeout(function(){r._poll()},400);else if(e.error)r.ended=!0,r.renderError(e),document.title=r.documentTitle,r._options.onError(e);else{r.seq=e.last_seq,r.started||(r.started=!0,r._options.onStart(e)),r.pollRetries=0;var t="ASSEMBLY_EXECUTING"===e.ok,n="ASSEMBLY_CANCELED"===e.ok,i="ASSEMBLY_COMPLETED"===e.ok;r._options.onProgress(e.bytes_received,e.bytes_expected,e);for(var o=0;o<e.uploads.length;o++)r._options.onUpload(e.uploads[o],e),r.uploads.push(e.uploads[o]);for(var a in e.results)for(r.results[a]=r.results[a]||[],o=0;o<e.results[a].length;o++)r._options.onResult(a,e.results[a][o],e),r.results[a].push(e.results[a][o]);n?(r.ended=!0,document.title=r.documentTitle,r._options.onCancel(e)):(r.renderProgress(e),i||!r._options.wait&&t?(r.ended=!0,document.title=r.documentTitle,e.uploads=r.uploads,e.results=r.results,r._options.onSuccess(e),r._options.modal&&r.cancel(),r.submitForm()):(e=r.pollStarted-+new Date,r.timer=setTimeout(function(){r._poll()},e<r._options.interval?r._options.interval:e),r.lastPoll=+new Date))}},error:function(e,t){if(!r.ended)if(r.pollRetries++,r.pollRetries>r._options.pollConnectionRetries){document.title=r.documentTitle,r.ended=!0;var n={error:"CONNECTION_ERROR",message:"There was a problem connecting to the upload server",reason:"JSONP request status: "+t,url:o};r.renderError(n),r._options.onError(n)}else setTimeout(function(){r._poll()},350)}})}},t.prototype.stop=function(){document.title=this.documentTitle,this.ended=!0},t.prototype.cancel=function(){if(!this.ended){var t=this;this.$params&&this.$params.prependTo(this.$form),this.$fileClones.each(function(n){n=e(t.$files[n]).clone(!0);var r=e(this);n.insertAfter(r),r.remove()}),clearTimeout(t.timer),this._poll("?method=delete"),"Microsoft Internet Explorer"==navigator.appName&&this.$iframe[0].contentWindow.document.execCommand("Stop"),setTimeout(function(){t.$iframe.remove()},500)}this._options.modal&&(e.mask.close(),this.$modal.remove())},t.prototype.submitForm=function(){"multipart/form-data"===this.$form.attr("enctype")&&this.$form.removeAttr("enctype"),null!==this.assembly&&e("<textarea/>").attr("name","transloadit").text(JSON.stringify(this.assembly)).prependTo(this.$form).hide(),this._options.autoSubmit&&this.$form.unbind("submit.transloadit").submit()},t.prototype.showModal=function(){this.$modal=e('<div id="transloadit"><div class="content"><a href="#close" class="close">Cancel</a><p class="status"></p><div class="progress progress-striped active"><div class="bar"><span class="percent"></span></div></div><label>Starting upload ...</label><p class="error"></p><div class="error-details-toggle"><a href="#">Details</a></div><p class="error-details"></p></div></div>').appendTo("body"),e.extend(this.$modal,{$content:this.$modal.find(".content"),$close:this.$modal.find(".close"),$label:this.$modal.find("label"),$progress:this.$modal.find(".progress"),$percent:this.$modal.find(".progress .percent"),$progressBar:this.$modal.find(".progress .bar"),$error:this.$modal.find(".error"),$errorDetails:this.$modal.find(".error-details"),$errorDetailsToggle:this.$modal.find(".error-details-toggle")});var t=this;this.$modal.$close.click(function(){t.cancel()}),this.$modal.$error.hide(),this.$modal.$errorDetails.hide(),this.$modal.$errorDetailsToggle.hide(),this.$modal.expose({api:!0,maskId:"transloadit_expose",opacity:.9,loadSpeed:250,closeOnEsc:!1,closeOnClick:!1}),this.$modal.$close.click(function(){return t.cancel(),!1})},t.prototype.renderError=function(t){if(this._options.modal){this.$modal.$content.addClass("content-error"),this.$modal.$progress.hide(),this.$modal.$label.hide();var r=t.error+": "+t.message+"<br /><br />",r=r+(t.reason||"");if(-1===["CONNECTION_ERROR","BORED_INSTANCE_ERROR","ASSEMBLY_NOT_FOUND"].indexOf(t.error))this.$modal.$error.html(r).show();else{this.$modal.$error.html("There was an internal error.<br />Please try your upload again.").show();var i=this,o=null;e.getJSON(n+"jsonip.com/",function(e){o=e.ip}).always(function(){var a={endpoint:t.url,instance:i.instance,assembly_id:i.assemblyId,ip:o,time:i.getUTCDatetime(),agent:navigator.userAgent,poll_retries:i.pollRetries,error:r};e.post(n+"status.transloadit.com/client_error",a);var s,l=[];for(s in a)l.push(s+": "+a[s]);a="If you would like our help to troubleshoot this, please email us this information:<br /><br />",i.$modal.$errorDetails.hide().html(a+l.join("<br />")),i.$modal.$errorDetailsToggle.show().find("a").off("click").on("click",function(e){e.preventDefault(),i.$modal.$errorDetails.toggle()})})}}},t.prototype.renderProgress=function(e){if(this._options.modal){var t=e.bytes_received/e.bytes_expected*100;t>100&&(t=0);var n=e.bytes_received-this.bytesReceivedBefore,r=+new Date-this.lastPoll,i=100===t?1e3:2*this._options.interval,o="Processing files";100!=t&&(o=(e.bytes_received/1024/1024).toFixed(2)+" MB / "+(e.bytes_expected/1024/1024).toFixed(2)+" MB ("+(n/1024/(r/1e3)).toFixed(1)+" kB / sec)"),this.$modal.$label.text(o);var a=parseInt(this.$modal.$progress.css("width"),10);if(this.bytesReceivedBefore=e.bytes_received,!(0>=n)){var s=this;
this.$modal.$progressBar.stop().animate({width:t+"%"},{duration:i,easing:"linear",progress:function(e){e=(100*parseInt(s.$modal.$progressBar.css("width"),10)/a).toFixed(0),e>100&&(e=100),e>13&&s.$modal.$percent.text(e+"%")}})}}},t.prototype.includeCss=function(){!o&&this._options.modal&&(o=!0,e('<link rel="stylesheet" type="text/css" href="'+this._options.assets+'css/transloadit2-v2.4.1.css" />').appendTo("head"))},t.prototype.getUTCDatetime=function(){var e=new Date,e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),t=function(e){return 10>e?"0"+e:e},n=e.getTimezoneOffset(),r=(n>0?"-":"+")+t(parseInt(n/60,10));return 0!==n%60&&(r+=t(n%60)),0===n&&(r="Z"),e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+r},t.prototype._genUuid=function(e,t,n){function r(e,t){var n=t||0,r=l;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}e=e||{},n=t&&n||0;var i=t||[],o=Array(16),a=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]];this._clockseq=16383&(a[6]<<8|a[7]);for(var a=null!=e.clockseq?e.clockseq:this._clockseq,l=[],c=0;256>c;c++)l[c]=(c+256).toString(16).substr(1);var c=null!=e.msecs?e.msecs:(new Date).getTime(),u=null!=e.nsecs?e.nsecs:this._lastNSecs+1,d=c-this._lastMSecs+(u-this._lastNSecs)/1e4;if(0>d&&null==e.clockseq&&(a=a+1&16383),(0>d||c>this._lastMSecs)&&null==e.nsecs&&(u=0),u>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(this._lastMSecs=c,this._lastNSecs=u,this._clockseq=a,c+=122192928e5,u=(1e4*(268435455&c)+u)%4294967296,i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u,c=c/4294967296*1e4&268435455,i[n++]=c>>>8&255,i[n++]=255&c,i[n++]=c>>>24&15|16,i[n++]=c>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a,e=e.node||s,s=0;6>s;s++)i[n+s]=e[s];return t?t:r(i)},t.prototype.options=function(t){return 0===arguments.length?this._options:void e.extend(this._options,t)},t.prototype.option=function(e,t){return 1==arguments.length?this._options[e]:void(this._options[e]=t)}}(window.jQuery),function(e){function t(e){this.params=e.params,this.signature=e.signature,this.page=e.page,this.successCb=e.successCb||null,this.errorCb=e.errorCb||null,this.progressCb=e.progressCb||null,this.processCb=e.processCb||null,this.XMLHTTPRequestUpload=null}t.prototype.checkAssemblyStatus=function(e){var t=this;$.ajax({url:e,type:"GET",dataType:"json",success:function(n,r){return n.ok&&"ASSEMBLY_COMPLETED"==n.ok?void("function"==typeof t.successCb&&t.successCb(n.results)):("ASSEMBLY_EXECUTING"==n.ok&&"function"==typeof t.processCb&&t.processCb(),n.error||"ASSEMBLY_EXECUTING"!=n.ok&&"ASSEMBLY_UPLOADING"!=n.ok?void("function"==typeof t.errorCb&&t.errorCb("Failed to check assembly ("+r+")")):void setTimeout(function(){t.checkAssemblyStatus(e)},1e3))},error:function(e,n){"function"==typeof t.errorCb&&t.errorCb("Failed to check assembly ("+n+")")}})},t.prototype.onProgress=function(e){"function"==typeof this.progressCb&&this.progressCb(100*e.loaded/e.total)},t.prototype.uploadFile=function(e,t){var n,r=this,i=new FormData;if(i.append("params",this.params),i.append("signature",this.signature),"undefined"!=typeof t)for(n=0;n<t.length;n++)i.append(t[n].name,t[n].value);i.append("file",e);var o=new XMLHttpRequest;o.open("POST","//api2.transloadit.com/assemblies",!0),o.upload.self=this,o.upload.onprogress=this.onProgress.bind(this),o.onreadystatechange=function(e){var t=e.target;if(4===t.readyState)if(200===t.status){var n=jQuery.parseJSON(t.responseText);r.checkAssemblyStatus(n.assembly_url)}else"function"==typeof r.errorCb&&r.errorCb(t.responseText.length>0?jQuery.parseJSON(t.responseText).message:"Failed to upload file")},o.send(i)},e.TransloaditXhr=t}(window),$(function(){function e(){i.toggleClass(c),r.toggleClass(l),o.toggleClass(u),a.toggleClass(d)}function t(){i.addClass(c),r.animate({left:"0px"},p),o.animate({left:h},p),a.animate({left:h},p)}function n(){i.removeClass(c),r.animate({left:"-"+h},p),o.animate({left:"0px"},p),a.animate({left:"0px"},p)}var r=$(".pushy"),i=$("body"),o=$("#site-content"),a=$(".push"),s=$(".site-overlay"),l="pushy-left pushy-open",c="pushy-active",u="site-content-push",d="push-push",f=$(".menu-button, .pushy a"),p=200,h=r.width()+"px";if(cssTransforms3d=function(){var e=document.createElement("p"),t=!1,n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var r in n)void 0!==e.style[r]&&(e.style[r]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(n[r]));return document.body.removeChild(e),void 0!==t&&t.length>0&&"none"!==t}())f.click(function(){e()}),s.click(function(){e()});else{r.css({left:"-"+h}),o.css({"overflow-x":"hidden"});var m=!0;f.click(function(){m?(t(),m=!1):(n(),m=!0)}),s.click(function(){m?(t(),m=!1):(n(),m=!0)})}}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.fluidvids=t()}(this,function(){"use strict";function e(e){return new RegExp("^(https?:)?//(?:"+i.players.join("|")+").*$","i").test(e)}function t(e,t){return parseInt(e,10)/parseInt(t,10)*100+"%"}function n(n){if((e(n.src)||e(n.data))&&!n.getAttribute("data-fluidvids")){var r=document.createElement("div");n.parentNode.insertBefore(r,n),n.className+=(n.className?" ":"")+"fluidvids-item",n.setAttribute("data-fluidvids","loaded"),r.className+="fluidvids",r.style.paddingTop=t(n.height,n.width),r.appendChild(n)}}function r(){var e=document.createElement("div");e.innerHTML="<p>x</p><style>"+o+"</style>",a.appendChild(e.childNodes[1])}var i={selector:["iframe","object"],players:["www.youtube.com","player.vimeo.com"]},o=[".fluidvids {","width: 100%; max-width: 100%; position: relative;","}",".fluidvids-item {","position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;","}"].join(""),a=document.head||document.getElementsByTagName("head")[0];return i.render=function(){for(var e=document.querySelectorAll(i.selector.join()),t=e.length;t--;)n(e[t])},i.init=function(e){for(var t in e)i[t]=e[t];i.render(),r()},i}),function(e,t,n){"use strict";var r,i,o,a={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0},s=e(t),l=[],c=0;e.scrollDepth=function(u){function d(e,t,n,a){o?(o({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventValue:1,eventNonInteraction:u.nonInteraction}),u.pixelDepth&&arguments.length>2&&n>c&&(c=n,o({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:m(n),eventValue:1,eventNonInteraction:u.nonInteraction})),u.userTiming&&arguments.length>3&&o({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:e,eventLabel:t,eventTiming:a})):(r&&(ga("send","event","Scroll Depth",e,t,1,{nonInteraction:u.nonInteraction}),u.pixelDepth&&arguments.length>2&&n>c&&(c=n,ga("send","event","Scroll Depth","Pixel Depth",m(n),1,{nonInteraction:u.nonInteraction})),u.userTiming&&arguments.length>3&&ga("send","timing","Scroll Depth",e,a,t)),i&&(_gaq.push(["_trackEvent","Scroll Depth",e,t,1,u.nonInteraction]),u.pixelDepth&&arguments.length>2&&n>c&&(c=n,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",m(n),1,u.nonInteraction])),u.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",e,a,t,100])))}function f(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function p(t,n,r){e.each(t,function(t,i){-1===e.inArray(t,l)&&n>=i&&(d("Percentage",t,n,r),l.push(t))})}function h(t,n,r){e.each(t,function(t,i){-1===e.inArray(i,l)&&e(i).length&&n>=e(i).offset().top&&(d("Elements",i,n,r),l.push(i))})}function m(e){return(250*Math.floor(e/250)).toString()}function g(e,t){var n,r,i,o=null,a=0,s=function(){a=new Date,o=null,i=e.apply(n,r)};return function(){var l=new Date;a||(a=l);var c=t-(l-a);return n=this,r=arguments,0>=c?(clearTimeout(o),o=null,a=l,i=e.apply(n,r)):o||(o=setTimeout(s,c)),i}}var v=+new Date;u=e.extend({},a,u),e(n).height()<u.minHeight||("function"==typeof ga&&(r=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(i=!0),"function"==typeof u.eventHandler?o=u.eventHandler:"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(o=dataLayer.push),u.percentage?d("Percentage","Baseline"):u.elements&&d("Elements","Baseline"),s.on("scroll.scrollDepth",g(function(){var r=e(n).height(),i=t.innerHeight?t.innerHeight:s.height(),o=s.scrollTop()+i,a=f(r),c=+new Date-v;return l.length>=4+u.elements.length?void s.off("scroll.scrollDepth"):(u.elements&&h(u.elements,o,c),void(u.percentage&&p(a,o,c)))},500)))}}(jQuery,window,document);var Alert=function(){var e=this;return e.create=function(e){$("<div class='row' />").append($("<div class='small-12 medium-9 medium-centered columns text-center' />").append($("<div class='site-alert'/>").append($("<div class='notice text-center' />").append($("<div class='alert-response' />").append($("<h5 />").text(e)).append($("<a href='#!' class='close' />").html("&times;")))))).appendTo("#site-body")},e},FileUploader=function(e){var t,n,r,i,o=this,a=function(r,i){var o=r.params,a=r.signature,s=new TransloaditXhr({params:o,signature:a,successCb:function(n){t.set(n),t.destroy(),e.finish()},errorCb:function(n){t.destroyPage(),t.destroy(),e.finish();var r=new Alert;throw r.create("Looks like we couldn't convert your video. Try uploading an .mp4"),n}});s.uploadFile(n,i)};return o.setFile=function(e){n=e},o.setMediaType=function(e){r=e},o.getFileSize=function(e){var t=n.size;return e>=t?!0:!1},o.getFileType=function(){var e=n.type.split("/")[0];return"image"===e||"video"===e?e:(e=n.name.split(".").pop(),"stl"===e?e:void 0)},o.getMimeType=function(){return n.type},o.getMediaType=function(){return r},o.createPage=function(e,r){$.post("/ajax/create",{project:e,filetype:r},function(e){if(i=e.page,"image"==r)t=new TransImage(n,i);else{if("video"!=r)throw"Unsupported file type";t=new TransVideo(n,i)}var o=[{name:"page_id",value:i}];t.loadMedia(i),a(e,o)})},o.createProjectHero=function(e){$.post("/ajax/create-hero",{project:e},function(r){var i=(Date.now()/1e3).toString().split(".")[1];t=new TransProjectHero(n,e);var o=[{name:"project_id",value:e},{name:"uuid",value:i}];t.loadMedia(),a(r,o)})},o.destroy=function(){$(o).remove()},o};$(function(){function e(){if(n.hasClass("open")){n.removeClass("open"),n.addClass("close"),$("html").toggleClass("lock");var e=function(){n.removeClass("close")};e()}else n.hasClass("close")||(n.addClass("open"),$("html").toggleClass("lock"))}{var t=$(".trigger-overlay"),n=$(".overlay");$(".overlay-close")}clickZone=$(".overlay"),noClickZone=$(".user-follow-list"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},transEndEventName=transEndEventNames[Modernizr.prefixed("transition")],support={transitions:!0},t.on("click",function(t){t.preventDefault(),e()}),n.on("click",function(t){var n=$(t.target);n.is(".user-follow-list")||n.parents().is(".user-follow-list")||n.is("video")||n.parents().is(".clickable-modal")||n.is(".clickable-modal")||n.is(".link-underline")||e()})});var PageCode=function(e){var t,n=this,r=e,i=function(e){{var n=CodeMirror.fromTextArea(e,{autofocus:!0,theme:"neo",lineNumbers:!0,mode:"python"});n.getTextArea()}n.on("change",function(e){delay(function(){var n=e.getValue();data={id:t,code:n},$.post("/ajax/code",data,function(){})},600)})},o=function(){$.post("/ajax/create-text",{project:r},function(e){t=e,height=$(document).height()-1200,$("body").scrollTo(height,600),a(),s()})},a=function(){var e=$("<textarea class='project-edit-code' data-page='"+t+"' />");$pageText=$("<div class='edit_page' id='edit_"+t+"' />").append($("<div class='project-content' />").append($("<div class='row' />").append($("<div class='small=12 medium-9 medium-centered columns project-page-editor-buttons' />").append($("<h5 />").append($("<ul />").append($("<li class='delete' />").append($("<a href='#!' class='remove_fields fade-opacity' data-page='"+t+"' />").text("DELETE").append($("<span class='page-editor-close-button' />"))))))).append($("<div class='small-12 medium-9 medium-centered columns'>").append(e)))).appendTo("#new_page_location"),i(e.get(0))},s=function(){$thumb=$("<div>").addClass("sortable-item").attr("id",t).append($("<img>").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-code-1e8bb2fe11230a8618db9f67329d7e21.svg")).appendTo(".inner_sortable")};return n.destroy=function(){$(n).remove()},o(),n},PageEmbed=function(e){var t,n,r=this,i=e;r.page;var o=function(){$.post("/ajax/create-text",{project:i},function(e){t=e,height=$(document).height()-1200,$("body").scrollTo(height,600),a(),s()})},a=function(){n=$("<div class='edit_page' id='edit_"+t+"' />").append($("<div class='project-edit-content project-embed' />").append($("<div class='project-page-editor-buttons' />").append($("<div id='img_resizer' class='embed_resizer_"+t+"' style='display:none' />").append($("<h5 />").append($("<ul />").append($("<li />").text("RESIZE")).append($("<li class='resizer inline fade-border' data-size='0' data-id='"+t+"' data-type='embed' />")).append($("<li class='resizer large active fade-border' data-size='1' data-id='"+t+"' data-type='embed' />")).append($("<li class='resizer full fade-border' data-size='2' data-id='"+t+"' data-type='embed' />"))).append($("<ul />").append($("<li class='delete' />").append($("<a href='#!' class='remove_fields fade-opacity' data-page='"+t+"' />").text("DELETE").append($("<span class='page-editor-close-button' />")))))))).append($("<div class='row' />").append($("<div class='small-12 medium-9 medium-centered columns' />").append($("<div id='embed_"+t+"' class='embeddable' placeholder='Paste a video link from YouTube or Vimeo' contenteditable='true' data-id='"+t+"' />")))).append($("<div class='project-caption' style='display:none' />").append($("<div class='row' />").append($("<div class='small-12 medium-9 medium-centered columns text-center' />").append($("<div class='project-edit-caption' placeholder='Add a caption' contenteditable='true' data-id='"+t+"' />")))))).appendTo("#new_page_location"),n.find(".embeddable").focus(),r.page=n},s=function(){$thumb=$("<div>").addClass("sortable-item").attr("id",t).append($("<img>").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-embed-9822206312d70b5b0db8c7b7427223ca.svg")).appendTo(".inner_sortable")};return r.set=function(){},r.destroy=function(){$(r).remove()},o(),r},PageText=function(e){var t,n,r=this,i=e;r.page;var o=function(){new MediumEditor(".editable",{anchorInputPlaceholder:"Paste a link & hit ENTER",anchorTarget:!0,cleanPastedHTML:!1,buttons:["bold","italic","justifyLeft","justifyCenter","anchor","header1"],buttonLabels:"fontawesome",forcePlainText:!0,targetBlank:!0,firstHeader:"h2"})},a=function(){$.post("/ajax/create-text",{project:i},function(e){t=e,height=$(document).height()-1200,$("body").scrollTo(height,600),s(),l()})},s=function(){n=$("<div class='edit_page' id='edit_"+t+"' />").append($("<div class='project-edit-content project-edit-text' />").append($("<div class='row' />").append($("<div class='small=12 medium-9 medium-centered columns project-page-editor-buttons' />").append($("<h5 />").append($("<ul />").append($("<li class='delete' />").append($("<a href='#!' class='remove_fields fade-opacity' data-page='"+t+"' />").text("DELETE").append($("<span class='page-editor-close-button' />"))))))).append($("<div class='small-12 medium-9 medium-centered columns' />").append($("<div id='text_"+t+"' class='editable' data-placeholder='Type here...' data-page='"+t+"' />"))))).appendTo("#new_page_location"),o(),n.find(".editable").focus(),r.page=n},l=function(){$thumb=$("<div>").addClass("sortable-item").attr("id",t).append($("<img>").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-text-30f0a619bb49d12fbed0ad2507263bd6.svg")).appendTo(".inner_sortable")};return r.set=function(){},r.destroy=function(){$(r).remove()},a(),r},Saver=function(e){var t=this,n=e.text(),r=0,i=function(){0===r?(e.text(n),e.removeAttr("disabled"),e.css("color","#333")):1===r&&(e.text("SAVING..."),e.attr("disabled","disabled"),e.css("color","#a9a9a9"))};return t.start=function(){r++,i()},t.finish=function(){r--,i()},t},TransAvatar=function(e){var t=this;t.template="development"===rails_env?"af737a4020f311e4a6c76f3cceed75d6":"f5b26a1020fe11e49812f1c234b9b790";var n=e.data("id"),r=$(".user-avatar"),i=function(){o()},o=function(){var t=e.find("input#avatar_upload")[0].files[0];if(t){var n=new FileReader;n.onload=function(e){r.css({backgroundImage:"url('"+e.target.result+"')",opacity:"0.25"})},n.readAsDataURL(t)}},a=function(e){r.css({backgroundImage:"url('"+e+"')",opacity:"0.5"})};return t.set=function(e,t){var r=e.results[":original"][0].url,i={id:n,avatar_url:r};$.post("/ajax/user/avatar",i,function(){a(r),t.finish()})},i(),t},TransGo=function(e,t,n){var r=e.closest(".edit_page");e.transloadit({wait:!0,triggerUploadOnFileSelection:!0,modal:!1,fields:!0,autoSubmit:!1,params:{auth:{key:"7d32f850062011e4beaf17ccfe906ea8"},template_id:t.template},onProgress:function(){},onSuccess:function(e){t.set(e,n),r&&destroyLoader(r)}}),e.trigger("submit.transloadit")},TransHero=function(e){var t=this;t.template="development"===rails_env?"3579b5705b4411e49fc4557a381d2e2b":"7138c2105eee11e498aab5872e1bd40d";var n=e.data("id"),r=$(".user-hero"),i=function(){o()},o=function(){var t=e.find("input#hero_upload")[0].files[0];if(t){var n=new FileReader;n.onload=function(e){r.css({backgroundImage:"url('"+e.target.result+"')",opacity:"0.25"})},n.readAsDataURL(t)}},a=function(e){r.css({backgroundImage:"url('"+e+"')",opacity:"0.5"})};return t.set=function(e,t){var r=e.results[":original"][0].url,i={id:n,hero_url:r};$.post("/ajax/user/hero",i,function(){a(r),t.finish()})},t.destroy=function(){$(t).remove()},i(),t},TransImage=function(e,t){var n,r,i,o=this,a=e,s=new FormData,l="https://monograph-media-dev.s3.amazonaws.com/",c=function(e,t){r=$("<div class='edit_page' id='edit_"+t+"'/>").append($("<div class='project-edit-content text-center' />").append($("<div class='project-page-editor-buttons' />").append($("<div id='img_resizer' style='display:none' />").append($("<h5 />").append($("<ul />").append($("<li />").text("RESIZE")).append($("<li class='resizer inline' data-size='0' data-id='"+t+"' data-type='image' />")).append($("<li class='resizer large active' data-size='1' data-id='"+t+"' data-type='image' />")).append($("<li class='resizer full' data-size='2' data-id='"+t+"' data-type='image' />"))).append($("<ul />").append($("<li class='delete' />").append($("<a href='#!' class='remove_fields fade-opacity' data-page='"+t+"' />").text("DELETE").append($("<span class='page-editor-close-button' />")))))))).append($("<img style='width:930px;-webkit-filter: brightness(0.4);filter: brightness(0.4)'>").attr("src",e)).append($("<div class='project-caption' style='display:none' />").append($("<div class='row' />").append($("<div class='small-12 medium-9 medium-centered columns text-center' />").append($("<div class='project-edit-caption' placeholder='Add a caption' contenteditable='true' data-id='"+t+"' />")))))).append("<div class='loader animate-spin' />").appendTo("#new_page_location")},u=function(e){i=$("<div>").addClass("sortable-item").attr("id",e).append($("<img>").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-blank-f21cc8bd3fe2057cec6ebd75809a5e4c.svg")).appendTo(".inner_sortable")},d=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var t=$.parseXML(e.responseText),n=$(t),r=n.find("Key"),i=l+r.text();o.set(i)}},e.open("POST",l,!0),e.send(s)},f=function(e){r.find("img").css({"-webkit-filter":"brightness(1.0)",filter:"brightness(1.0)"}).attr("src",e),r.find("#img_resizer").show(),r.find(".project-caption").show(),r.find(".loader").remove()},p=function(e){i.find("img").attr("src",e)};return o.loadMedia=function(){var e=new FileReader;e.onload=function(e){c(e.target.result,n),u(n)},e.readAsDataURL(a)},o.getSignature=function(e,t){$.ajax({url:"/signed-url",type:"GET",dataType:"json",data:{project:e,mime:t,filename:a.name},success:function(e){s.append("key",e.key),s.append("AWSAccessKeyId","AKIAJUBQIKETC5ATM6AQ"),s.append("Content-Type",t),s.append("acl","public-read"),s.append("policy",e.policy),s.append("signature",e.signature),s.append("success_action_status","201"),s.append("file",a),n=e.page,o.loadMedia(),d()}})},o.set=function(e){var r={id:n,image_url:e};$.post("/ajax/image",r,function(){p(e),f(e),t.finish()})},o.destroy=function(){$(o).remove()},o},TransProjectHero=function(e,t){var n=this;_file=e,_project=t;var r=$(".project-hero"),i=function(){var e=new FileReader;e.onload=function(e){r.css({backgroundImage:"url('"+e.target.result+"')",opacity:"0.5"})},e.readAsDataURL(_file)},o=function(e){r.css({backgroundImage:"url('"+e+"')",opacity:"1"})},a=function(){var e=$(".project-hero-upload");e.text("UPDATE HERO IMAGE"),e.removeAttr("disabled"),e.css("color","#333"),$(".remove-hero-ul").show()};return n.loadMedia=function(){i()},n.set=function(e){var t=e[":original"][0].url,n={id:_project,hero_url:t};$.post("/ajax/hero",n,function(){o(t),a(),initDraggable()})},n.destroy=function(){$(n).remove()},n},TransVideo=function(e,t){var n=this;n.file=e,n.page=t;var r,i,o,a=function(e){i=$("<video preload='auto' loop id='video' style='background-color:#333;width:100%;' controls/>"),r=$("<div class='edit_page' id='edit_"+e+"'/>").append($("<div class='project-edit-content project-video text-center' />").append($("<div class='project-page-editor-buttons' />").append($("<div id='img_resizer' style='display:none' />").append($("<h5 />").append($("<ul />").append($("<li />").text("RESIZE")).append($("<li class='resizer inline fade-border' data-size='0' data-id='"+e+"' data-type='video' />")).append($("<li class='resizer large fade-border' data-size='1' data-id='"+e+"' data-type='video' />")).append($("<li class='resizer full active fade-border' data-size='2' data-id='"+e+"' data-type='video' />"))).append($("<ul />").append($("<li class='delete' />").append($("<a href='#!' class='remove_fields fade-opacity' data-page='"+e+"' />").text("DELETE").append($("<span class='page-editor-close-button' />")))))))).append(i).append($("<div class='project-caption' />").append($("<div class='row' />").append($("<div class='small-12 medium-9 medium-centered columns text-center' />").append($("<div class='project-edit-caption' placeholder='Add a caption' contenteditable='true' data-id='"+e+"' />")))))).append("<div class='loader animate-spin' />").appendTo("#new_page_location")},s=function(e){o=$("<div>").addClass("sortable-item").attr("id",e).append($("<img>").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-blank-f21cc8bd3fe2057cec6ebd75809a5e4c.svg")).appendTo(".inner_sortable")},l=function(e,t){i.css({"background-color":"transparent"});var n=$("<source type='video/mp4'>").attr("src",e),o=$("<source type='video/webm'>").attr("src",t);i.append(n).append(o),r.find("#img_resizer").show(),r.find(".loader").remove()},c=function(){o.find("img").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-video-4b8dac94c8d5b62e6a200ae59111f3b7.svg")};return n.loadMedia=function(e){a(e),s(e)},n.set=function(e){var t=e.encode[0].url,r=e.encode2[0].url,i=e.thumb[0].url,o={id:n.page,mp4:t,webm:r,thumb:i};$.post("/ajax/video",o,function(){l(t,r),c()})},n.destroyPage=function(){r.remove(),o.remove()},n.destroy=function(){$(n).remove()},n},Uploader=function(e){var t,n,r,i=Object.create(Uploader.prototype),o=function(){return t.type},a=function(){return t.size<=n.sizeLimit?!0:!1},s=function(e){return(e/1e6).toFixed(1)+"mb"};return i.setFile=function(e){t=e},i.setKey=function(e){r=e},i.getFileType=function(){var e=t.type.split("/")[0];return"image"===e||"video"===e?e:void 0},i.setUploadType=function(r){"project-image"===r?n=new UploaderProjectImage(t,e):"project-hero"===r&&(n=new UploaderProjectHero(t,e))},i.upload=function(){var t=o();if(a())n.startUpload(r,t),n.disableUI();else{e.finish();var i=s(n.sizeLimit),l="Oops, we don't support media larger than "+i;alert(l)}},i},UploaderProjectHero=function(e,t){var n,r=Object.create(UploaderProjectHero.prototype),i=e,o=new FormData,a=$(".project-hero"),s="https://monograph-media.s3.amazonaws.com/",l=$(".project-hero-upload");r.sizeLimit=1e7;var c=function(e){$.ajax({url:"/api/v1/project/project-hero",type:"GET",dataType:"json",data:{project:n,mime:e,filename:i.name},success:function(t){o.append("key",t.key),o.append("AWSAccessKeyId","AKIAJUBQIKETC5ATM6AQ"),o.append("Content-Type",e),o.append("acl","public-read"),o.append("policy",t.policy),o.append("signature",t.signature),o.append("success_action_status","201"),o.append("file",i),u(),d()}})},u=function(){var e=new FileReader;e.onload=function(e){a.css({backgroundImage:"url('"+e.target.result+"')",opacity:"0.5"})},e.readAsDataURL(i)},d=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var t=$.parseXML(e.responseText),n=$(t),r=n.find("Location").text();f(r)}},e.open("POST",s,!0),e.send(o)},f=function(e){var i={id:n,hero_url:e};$.post("/ajax/hero",i,function(){p(e),r.updateUI(),h(),t.finish()})},p=function(e){a.css({backgroundImage:"url('"+e+"')",opacity:"1"})},h=function(){var e=$(".project-hero");e.css("cursor","move"),e.backgroundDraggable({axis:"y",done:function(){var t=e.css("background-position"),n=e.data("project"),r=t.split(" ")[1].replace("%","");$.post("/ajax/hero-position",{id:n,y:r},function(){})}})};return r.disableUI=function(){l.text("UPLOADING..."),l.attr("disabled","disabled"),l.css("color","#a9a9a9")},r.updateUI=function(){l.text("UPDATE HERO IMAGE"),l.removeAttr("disabled"),l.css("color","#333"),$(".remove-hero-ul").show()},r.startUpload=function(e,t){n=e,c(t)},r},UploaderProjectImage=function(e,t){var n,r,i,o=Object.create(UploaderProjectImage.prototype),a=e,s=new FormData,l="https://monograph-media.s3.amazonaws.com/";o.sizeLimit=1e7;var c=function(e,t){$.ajax({url:"/api/v1/project/project-image",type:"GET",dataType:"json",data:{project:e,mime:t,filename:a.name},success:function(e){s.append("key",e.key),s.append("AWSAccessKeyId","AKIAJUBQIKETC5ATM6AQ"),s.append("Content-Type",t),s.append("acl","public-read"),s.append("policy",e.policy),s.append("signature",e.signature),s.append("success_action_status","201"),s.append("file",a),n=e.page,m(),f()}})},u=function(e,t){r=$("<div class='edit_page' id='edit_"+t+"'/>").append($("<div class='project-edit-content text-center' />").append($("<div class='project-page-editor-buttons' />").append($("<div id='img_resizer' style='display:none' />").append($("<h5 />").append($("<ul />").append($("<li />").text("RESIZE")).append($("<li class='resizer inline' data-size='0' data-id='"+t+"' data-type='image' />")).append($("<li class='resizer large active' data-size='1' data-id='"+t+"' data-type='image' />")).append($("<li class='resizer full' data-size='2' data-id='"+t+"' data-type='image' />"))).append($("<ul />").append($("<li class='delete' />").append($("<a href='#!' class='remove_fields fade-opacity' data-page='"+t+"' />").text("DELETE").append($("<span class='page-editor-close-button' />")))))))).append($("<img style='width:930px;-webkit-filter: brightness(0.4);filter: brightness(0.4)'>").attr("src",e)).append($("<div class='project-caption' style='display:none' />").append($("<div class='row' />").append($("<div class='small-12 medium-9 medium-centered columns text-center' />").append($("<div class='project-edit-caption' placeholder='Add a caption' contenteditable='true' data-id='"+t+"' />")))))).append("<div class='loader animate-spin' />").appendTo("#new_page_location")},d=function(e){i=$("<div>").addClass("sortable-item").attr("id",e).append($("<img>").attr("src","http://assets.monograph.io/assets/media-icons/media-icon-black-blank-f21cc8bd3fe2057cec6ebd75809a5e4c.svg")).appendTo(".inner_sortable")},f=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var t=$.parseXML(e.responseText),n=$(t),r=n.find("Location").text();g(r)}},e.open("POST",l,!0),e.send(s)},p=function(e){r.find("img").css({"-webkit-filter":"brightness(1.0)",filter:"brightness(1.0)"}).attr("src",e),r.find("#img_resizer").show(),r.find(".project-caption").show(),r.find(".loader").remove()},h=function(e){i.find("img").attr("src",e)},m=function(){var e=new FileReader;e.onload=function(e){u(e.target.result,n),d(n)},e.readAsDataURL(a)},g=function(e){var r={id:n,image_url:e};$.post("/ajax/image",r,function(){h(e),p(e),t.finish()})};return o.startUpload=function(e,t){c(e,t)},o.disableUI=function(){},o};$(".collaborators.new").ready(function(){var e=$("#full_name").data("project");$("#full_name").autocomplete({serviceUrl:"/ajax/user/get-collaborators",params:{project:e}})}),$(function(){var e,t="https://monograph-media-dev.s3.amazonaws.com/";$(".upload-btn").click(function(t){t.preventDefault();var r=(new FileUploader,$("<input type='file' />"));r.click(),r.on("change",function(){e=$(this)[0].files[0],n()})});var n=function(){$.ajax({url:"/signed-url",type:"GET",dataType:"json",data:{filename:e.name},success:function(t){var n=new FormData;n.append("key",t.key),n.append("AWSAccessKeyId","AKIAJUBQIKETC5ATM6AQ"),n.append("acl","public-read"),n.append("policy",t.policy),n.append("signature",t.signature),n.append("success_action_status","201"),n.append("file",e),r(n)}})},r=function(e){var n=new XMLHttpRequest;n.upload.addEventListener("progress",function(e){var t=Math.round(e.loaded/e.total*100);$(".bar").css("width",t+"%")}),n.onreadystatechange=function(){if(4==n.readyState){var e=$.parseXML(n.responseText),r=$(e),i=r.find("Key"),o=t+i.text();console.log(o)}},n.open("POST",t,!0),n.send(e)}}),$(".drafts").ready(function(){$(".btn_user_nav").click(function(e){e.preventDefault();var t=$(this).data("nav");$(".btn_user_nav").removeClass("active-black"),$(this).addClass("active-black"),$(t).siblings().hide(),$(t).show()})}),$(".drafts.index").ready(function(){});var delay=function(){var e=0;return function(t,n){clearTimeout(e),e=setTimeout(t,n)}}();$(function(){$(".btn-publish").click(function(){var e=$(this),t=e.attr("href");e.removeAttr("href"),e.text("SUBMITTING..."),window.location.href=t})}),$(".home.index, .projects.index, .about, .categories").ready(function(){makeBackgroundResponsive()}),$(function(){$(".close").on("click",function(e){e.preventDefault(),$(this).parent().slideUp()})}),$(".projects.edit, .drafts.edit").ready(function(){var e,t,n=document.getElementById("sortable"),r=3e7,i=new Saver($("#preview")),o=function(){e=new Sortable(n,{draggable:".sortable-item",onUpdate:function(){var e=[];$(".sortable-item").each(function(){e.push($(this).attr("id"))});var t={"page[]":e};$.post($("#sortable").data("url"),t,function(){var t={};$(".edit_page").each(function(e,n){var r=$(n),i=r.attr("id").replace("edit_","");t[i]=r}),e.forEach(function(e){l.append(t[e])})})}})},a=function(){var e=document.querySelectorAll(".project-edit-code");$A=Array.prototype.slice.call(e),$A.forEach(function(e){var t=CodeMirror.fromTextArea(e,{theme:"neo",lineNumbers:!0,mode:"python"}),n=t.getTextArea();t.on("change",function(e){delay(function(){var t=e.getValue(),r=$(n).data("page");data={id:r,code:t},$.post("/ajax/code",data,function(){})},600)})})},s=function(){t=new MediumEditor(".editable",{anchorInputPlaceholder:"Paste a link & hit ENTER",anchorTarget:!0,cleanPastedHTML:!1,buttons:["bold","italic","justifyLeft","justifyCenter","anchor","header1"],buttonLabels:"fontawesome",forcePlainText:!0,targetBlank:!1,firstHeader:"h2"})};$("#add_content").click(function(){$("body").scrollTo("#add_content_container",600)}),$(".trigger-overlay").click(function(e){e.preventDefault();var t="/ajax/"+$(this).data("ajax");$(".overlay .list").empty(),$(".loader").show(),$.get(t,function(){$(".loader").hide()})});var l=$(".edit_content");l.on("click",".remove_fields",function(e){e.preventDefault(),$this=$(this),$this.parents(".project-edit-content").find("img").css("outline","6px solid #7171ff");var t=confirm("Are you sure you want to delete content?");if(t){var n=$this.data("page"),r={page:n};$.post("/ajax/remove",r,function(){var e=$this.closest(".edit_page");e.remove();var t="#"+n;$(t).remove()})}else $this.parents(".project-edit-content").find("img").css("outline","")
}),l.on("input",".editable",function(e){var t="#"+e.target.id,n=$(t).data("page");delay(function(){var e=$(t).html();data={id:n,body:e},unsaved=!0,$.post("/ajax/text",data,function(){})},600)}),l.on("input",".embeddable",function(e){var t=$(this).data("id"),n="#"+e.target.id;delay(function(){var e=$(n).html();if(e.indexOf("youtube.com")>-1)var r="YouTube",i=e.split("v=").pop(),o="https://www.youtube.com/embed/"+i+"?fs=0&amp;amp;modestbranding=1rel=0&amp;showinfo=0&amp;autohide=1&amp;color=white&amp;iv_load_policy=3",a=!0;else{if(!(e.indexOf("vimeo.com")>-1)){var a=!1;return void alert("Hmmm... Looks like we can't process that link :.(")}var r="Vimeo",i=e.substring(e.lastIndexOf("/")+1),o="//player.vimeo.com/video/"+i+"?badge=0&amp;byline=0&amp;title=0&amp;portrait=0&amp;color=fff",a=!0}if(i={id:t,url:e,origin:r,data:i},unsaved=!0,1!=a)throw"Link cannot be parsed";$.post("/ajax/embed",i,function(){$(n).parent().parent().remove(),$("div#edit_"+t).children(".project-embed").append($("<div class='project-embed-wrapper' style='width:930px;height:523px;padding-bottom:0;' />").append($("<iframe width='690' height='388' src='"+o+"' frameborder='0' allowfullscreen />"))),$(".embed_resizer_"+t).show()})},600)}),$(".project-edit-title").on("input",function(){var e=$(this).data("id"),t=$(this).text();delay(function(){data={id:e,title:t},unsaved=!0,$.post("/ajax/title",data,function(e){var t="/"+e.slug,n={foo:"bar"};history.replaceState(n,"title",t);var r=$("#preview"),i=t.replace("/edit","");r.attr("href",i)})},600)}),$(".project-edit-subtitle").on("input",function(){var e=$(this).data("id"),t=$(this).text();delay(function(){data={id:e,subtitle:t},unsaved=!0,$.post("/ajax/subtitle",data,function(){})},600)}),$(".project-edit-summary").on("input",function(){var e=$(this).data("id"),t=$(this).html();delay(function(){data={id:e,summary:t},unsaved=!0,$.post("/ajax/summary",data,function(){})},600)}),l.on("input",".project-edit-caption",function(){var e=$(this).data("id"),t=$(this).text();delay(function(){data={id:e,caption:t},unsaved=!0,$.post("/ajax/page/caption",data,function(){})},600)}),l.on("click",".resizer",function(){var e=$(this),t=e.data("size"),n=e.data("id"),r=e.data("type");if("image"==r)var i=e.closest(".project-edit-content").find("img");else if("video"==r)var i=e.closest(".project-edit-content").find("video");else if("embed"==r)var i=e.closest(".project-edit-content").find(".project-embed-wrapper");var o={id:n,size:t,type:r};$.post("/ajax/page/size",o,function(){if(e.siblings().removeClass("active"),e.addClass("active"),0===t)i.css("width","690px"),"embed"==r&&(i.css("height","388px"),i.css("padding-bottom","0"));else if(1===t)i.css("width","930px"),"embed"==r&&(i.css("height","523px"),i.css("padding-bottom","0"));else if(2===t)if("embed"==r){var n=$(window).width(),o=9*n/16;i.css("width",n),i.css("height",o)}else i.css("width","100%")})}),$(".project-edit-title, .project-edit-subtitle").focusout(function(){var e=$(this);e.text().replace(" ","").length||e.empty()}),$(".inner_sortable").on("click",".sortable-item",function(e){e.preventDefault();var t="#edit_"+$(this).attr("id");$("body").scrollTo($(t),{duration:450,offset:-30})}),$(".media-text").on("click",function(e){e.preventDefault();{var t=$(".project-media-container").data("project");new PageText(t)}}),$(".media-code").on("click",function(e){e.preventDefault();{var t=$(".project-media-container").data("project");new PageCode(t)}}),$(".media-embed").on("click",function(e){e.preventDefault();{var t=$(".project-media-container").data("project");new PageEmbed(t)}});var c=$(".project-hero");c.backgroundDraggable({axis:"y",done:function(){var e=c.css("background-position"),t=c.data("project"),n=e.split(" ")[1].replace("%","");$.post("/ajax/hero-position",{id:t,y:n},function(){})}}),$(".remove-hero").on("click",function(e){e.preventDefault();var t=confirm("Are you sure you want to remove the image?");if(t){var n=$(this).data("project");$.post("/ajax/hero-remove",{id:n},function(){$(".remove-hero-ul").hide(),c.css("background-image",""),c.css("cursor","auto"),$(".project-hero-upload").text("ADD HERO IMAGE")})}}),$(".project-hero-upload").on("click",function(e){e.preventDefault();var t=($(this),$("<input type='file' />"));t.click(),t.on("change",function(){i.start();var e=$(this)[0].files[0],t=Uploader(i),n=$(".project-media-container").data("project");t.setFile(e),t.setKey(n),t.setUploadType("project-hero"),t.upload()})}),$(".media-upload").on("click",function(e){e.preventDefault();var t=$("<input type='file' />");t.click(),t.on("change",function(){var e=$(this)[0].files[0];d(e)})});var u=$(".project-draggable-container");u.on("dragover",function(e){e.preventDefault(),e.stopPropagation(),u.addClass("hover")}),u.on("dragenter",function(e){e.preventDefault(),e.stopPropagation()}),u.on("drop",function(e){e.preventDefault(),e.stopPropagation(),u.removeClass("hover");var t=e.originalEvent.dataTransfer.files[0];d(t)});var d=function(e){i.start();var t=f(e);"video"===t?h(e,t):"image"===t?p(e):(alert("Oops, we don't support that media type"),i.finish())},f=function(e){return e.type.split("/")[0]},p=function(e){var t=Uploader(i),n=$(".project-media-container").data("project");t.setFile(e),t.setKey(n),t.setUploadType("project-image"),t.upload()},h=function(e,t){var n=new FileUploader(i),o=$(".project-media-container").data("project");n.setFile(e);var a=n.getFileSize(r);a?n.createPage(o,t):(alert("Oops, we don't support videos larger than 30mb"),i.finish())};o(),s(),a()}),$(".projects.show, .drafts.show").ready(function(){var e=function(){var e=document.querySelectorAll(".project-code");$A=Array.prototype.slice.call(e),$A.forEach(function(e){var t=CodeMirror.fromTextArea(e,{theme:"neo",lineNumbers:!0,mode:"python",readOnly:!0});$(".btn-show-code").click(function(e){e.preventDefault();var n=$(this).parent().siblings(".CodeMirror");n.css("height","auto"),$(this).remove(),t.refresh()})})},t=function(){$(".project-video").bind("inview",function(e,t,n,r){var i=$(this).find("video").get(0);t?"top"==r?i.play():"bottom"==r||i.play():i.pause()})};$(".btn_user_follow.active").on("mouseenter",function(){$(this).html("<span class='button-uncheck' style='margin-right:9px'></span>UNFOLLOW")}).on("mouseleave",function(){$(this).html("<span class='button-gray-check'></span>")}),$(".btn_user_follow").click(function(e){e.preventDefault();var t,n=$(this),r=n.hasClass("active"),i=n.data("id"),o=n.data("current");t=r?"/ajax/user/unfollow":"/ajax/user/follow",o!==i&&void 0!==o&&(data={user_id:i,current:o},$.post(t,data,function(){r?(n.removeClass("active"),n.html("FOLLOW"),n.off("mouseenter mouseleave")):(n.addClass("active"),n.html("<span class='button-black-check' style='margin-right:9px'></span>FOLLOWING"))}))}),$(".btn_user_favorite").click(function(e){e.preventDefault();var t,n=$(this),r=n.hasClass("active"),i=n.data("id"),o=n.data("current");t=r?"/ajax/user/unfavorite":"/ajax/user/favorite",void 0!==o&&(data={project_id:i,current:o},$.post(t,data,function(){r?(n.removeClass("active button-border-black").addClass("button-border-gray"),n.html("FAVORITE")):(n.addClass("active button-border-black").removeClass("button-border-gray"),n.html("<span class='button-black-check' style='margin-right:9px'></span>FAVORITED"))}))}),$(".btn_user_publish").click(function(e){e.preventDefault();var t,n=$(this),r=n.hasClass("active"),i=n.data("id"),o=n.data("current");if(r)var t="/ajax/publish";else var t="/ajax/unpublish";data={project_id:i,current:o},$.ajax({url:t,data:data,dataType:"json",type:"POST",success:function(){r?(n.removeClass("active"),n.text("PUBLISHED")):(n.addClass("active"),n.text("UNPUBLISHED"))},error:function(e){var t=$.parseJSON(e.responseText).errors,n=new Alert;n.create(t[0])}})}),makeBackgroundResponsive(),makeImagesResponsive(),t(),e(),fluidvids.init({selector:["iframe"],players:["www.youtube.com","player.vimeo.com"]})}),$(".users.edit").ready(function(){var e=document.getElementById("user_projects"),t=new Saver($("#preview")),n=function(){sort=new Sortable(e,{draggable:".sortable",onUpdate:function(){var e=[];$(".sortable").each(function(){e.push($(this).data("id"))});var t={"project[]":e};$.post("/ajax/user/sort",t,function(){})}})};n(),$("#summary").on("input",function(){var e=$(this).data("id"),t=$(this).text();delay(function(){data={id:e,summary:t},unsaved=!0,$.post("/ajax/user/summary",data,function(){})},600)}),$("#location").on("input",function(){var e=$(this).data("id"),t=$(this).text();delay(function(){data={id:e,location:t},unsaved=!0,$.post("/ajax/user/location",data,function(){})},600)}),$("#website").on("input",function(){var e=$(this).data("id"),t=$(this).text();delay(function(){data={id:e,website:t},unsaved=!0,$.post("/ajax/user/website",data,function(){})},600)}),$("#summary, #location, #website").focusout(function(){var e=$(this);e.text().replace(" ","").length||e.empty()}),$(".btn_user_unpublish").click(function(e){e.preventDefault();var t=$(this),n=(t.hasClass("active"),t.data("id")),r=t.data("current"),i="/ajax/unpublish";data={project_id:n,current:r},$.ajax({url:i,data:data,dataType:"json",type:"POST",success:function(){t.removeClass("active"),t.text("UNPUBLISHED")},error:function(e){var t=$.parseJSON(e.responseText).errors,n=new Alert;n.create(t[0])}})}),$("body").on("change","form",function(){var e,n=$(this),r=n.data("type");"hero"===r?e=new TransHero(n):"avatar"===r&&(e=new TransAvatar(n)),t.start(),new TransGo(n,e,t)}),$(".user-hero").backgroundDraggable({axis:"y",done:function(){var e=$("div").css("background-position"),t=e.split(" ")[0],n=e.split(" ")[1];console.log(t,n)}}),$(".user-hero-editor").hover(function(){$(".user-hero-hover").stop(!0).fadeTo("fast",.5)},function(){$(".user-hero-hover").stop(!0).fadeTo("fast",1)}),$(".user-avatar-editor").hover(function(){$(".user-avatar-hover").stop(!0).fadeTo("fast",.5)},function(){$(".user-avatar-hover").stop(!0).fadeTo("fast",1)})}),$(".users.show").ready(function(){var e=$("body");$(".trigger-overlay").click(function(){var e="/ajax/user/"+$(this).data("ajax"),t=$(this).data("user");$(".overlay .list").empty(),$(".loader").show(),$.get(e,{user_id:t},function(){$(".loader").hide()})}),e.on("mouseenter",".btn_user_follow.active",function(){$(this).html("<span class='button-uncheck' style='margin-right:9px'></span>UNFOLLOW")}).on("mouseleave",".btn_user_follow.active",function(){$(this).html("<span class='button-gray-check'></span>")}),e.on("click",".btn_user_follow",function(e){e.preventDefault();var t,n=$(this),r=n.hasClass("active"),i=n.data("id"),o=n.data("current");t=r?"/ajax/user/unfollow":"/ajax/user/follow",o!==i&&void 0!==o&&(data={user_id:i,current:o},$.post(t,data,function(){r?(n.removeClass("active"),n.html("FOLLOW"),n.off("mouseenter mouseleave")):(n.addClass("active"),n.html("<span class='button-black-check' style='margin-right:9px'></span>FOLLOWING"))}))}),e.on("click",".btn_user_favorite",function(e){e.preventDefault();var t,n=$(this),r=n.hasClass("active"),i=n.data("id"),o=n.data("current");t=r?"/ajax/user/unfavorite":"/ajax/user/favorite",void 0!==o&&(data={project_id:i,current:o},$.post(t,data,function(){r?(n.removeClass("active"),n.text("Favorite")):(n.addClass("active"),n.text("Favorited"))}))}),makeBackgroundResponsive()});